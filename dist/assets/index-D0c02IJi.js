(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();var Pt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function am(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Sv(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var s=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:function(){return t[i]}})}),n}var lm={exports:{}},ka={},cm={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $s=Symbol.for("react.element"),Pv=Symbol.for("react.portal"),Ev=Symbol.for("react.fragment"),Cv=Symbol.for("react.strict_mode"),Tv=Symbol.for("react.profiler"),Lv=Symbol.for("react.provider"),Ov=Symbol.for("react.context"),Av=Symbol.for("react.forward_ref"),Iv=Symbol.for("react.suspense"),Mv=Symbol.for("react.memo"),zv=Symbol.for("react.lazy"),kh=Symbol.iterator;function Rv(t){return t===null||typeof t!="object"?null:(t=kh&&t[kh]||t["@@iterator"],typeof t=="function"?t:null)}var um={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dm=Object.assign,hm={};function Ei(t,e,n){this.props=t,this.context=e,this.refs=hm,this.updater=n||um}Ei.prototype.isReactComponent={};Ei.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ei.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function fm(){}fm.prototype=Ei.prototype;function bu(t,e,n){this.props=t,this.context=e,this.refs=hm,this.updater=n||um}var ju=bu.prototype=new fm;ju.constructor=bu;dm(ju,Ei.prototype);ju.isPureReactComponent=!0;var Nh=Array.isArray,mm=Object.prototype.hasOwnProperty,ku={current:null},pm={key:!0,ref:!0,__self:!0,__source:!0};function gm(t,e,n){var i,s={},l=null,u=null;if(e!=null)for(i in e.ref!==void 0&&(u=e.ref),e.key!==void 0&&(l=""+e.key),e)mm.call(e,i)&&!pm.hasOwnProperty(i)&&(s[i]=e[i]);var h=arguments.length-2;if(h===1)s.children=n;else if(1<h){for(var f=Array(h),p=0;p<h;p++)f[p]=arguments[p+2];s.children=f}if(t&&t.defaultProps)for(i in h=t.defaultProps,h)s[i]===void 0&&(s[i]=h[i]);return{$$typeof:$s,type:t,key:l,ref:u,props:s,_owner:ku.current}}function Dv(t,e){return{$$typeof:$s,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Nu(t){return typeof t=="object"&&t!==null&&t.$$typeof===$s}function Bv(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Sh=/\/+/g;function Sl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Bv(""+t.key):e.toString(36)}function Ro(t,e,n,i,s){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var u=!1;if(t===null)u=!0;else switch(l){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case $s:case Pv:u=!0}}if(u)return u=t,s=s(u),t=i===""?"."+Sl(u,0):i,Nh(s)?(n="",t!=null&&(n=t.replace(Sh,"$&/")+"/"),Ro(s,e,n,"",function(p){return p})):s!=null&&(Nu(s)&&(s=Dv(s,n+(!s.key||u&&u.key===s.key?"":(""+s.key).replace(Sh,"$&/")+"/")+t)),e.push(s)),1;if(u=0,i=i===""?".":i+":",Nh(t))for(var h=0;h<t.length;h++){l=t[h];var f=i+Sl(l,h);u+=Ro(l,e,n,f,s)}else if(f=Rv(t),typeof f=="function")for(t=f.call(t),h=0;!(l=t.next()).done;)l=l.value,f=i+Sl(l,h++),u+=Ro(l,e,n,f,s);else if(l==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return u}function po(t,e,n){if(t==null)return t;var i=[],s=0;return Ro(t,i,"","",function(l){return e.call(n,l,s++)}),i}function $v(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var pt={current:null},Do={transition:null},Uv={ReactCurrentDispatcher:pt,ReactCurrentBatchConfig:Do,ReactCurrentOwner:ku};function vm(){throw Error("act(...) is not supported in production builds of React.")}ge.Children={map:po,forEach:function(t,e,n){po(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return po(t,function(){e++}),e},toArray:function(t){return po(t,function(e){return e})||[]},only:function(t){if(!Nu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ge.Component=Ei;ge.Fragment=Ev;ge.Profiler=Tv;ge.PureComponent=bu;ge.StrictMode=Cv;ge.Suspense=Iv;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uv;ge.act=vm;ge.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=dm({},t.props),s=t.key,l=t.ref,u=t._owner;if(e!=null){if(e.ref!==void 0&&(l=e.ref,u=ku.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(f in e)mm.call(e,f)&&!pm.hasOwnProperty(f)&&(i[f]=e[f]===void 0&&h!==void 0?h[f]:e[f])}var f=arguments.length-2;if(f===1)i.children=n;else if(1<f){h=Array(f);for(var p=0;p<f;p++)h[p]=arguments[p+2];i.children=h}return{$$typeof:$s,type:t.type,key:s,ref:l,props:i,_owner:u}};ge.createContext=function(t){return t={$$typeof:Ov,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Lv,_context:t},t.Consumer=t};ge.createElement=gm;ge.createFactory=function(t){var e=gm.bind(null,t);return e.type=t,e};ge.createRef=function(){return{current:null}};ge.forwardRef=function(t){return{$$typeof:Av,render:t}};ge.isValidElement=Nu;ge.lazy=function(t){return{$$typeof:zv,_payload:{_status:-1,_result:t},_init:$v}};ge.memo=function(t,e){return{$$typeof:Mv,type:t,compare:e===void 0?null:e}};ge.startTransition=function(t){var e=Do.transition;Do.transition={};try{t()}finally{Do.transition=e}};ge.unstable_act=vm;ge.useCallback=function(t,e){return pt.current.useCallback(t,e)};ge.useContext=function(t){return pt.current.useContext(t)};ge.useDebugValue=function(){};ge.useDeferredValue=function(t){return pt.current.useDeferredValue(t)};ge.useEffect=function(t,e){return pt.current.useEffect(t,e)};ge.useId=function(){return pt.current.useId()};ge.useImperativeHandle=function(t,e,n){return pt.current.useImperativeHandle(t,e,n)};ge.useInsertionEffect=function(t,e){return pt.current.useInsertionEffect(t,e)};ge.useLayoutEffect=function(t,e){return pt.current.useLayoutEffect(t,e)};ge.useMemo=function(t,e){return pt.current.useMemo(t,e)};ge.useReducer=function(t,e,n){return pt.current.useReducer(t,e,n)};ge.useRef=function(t){return pt.current.useRef(t)};ge.useState=function(t){return pt.current.useState(t)};ge.useSyncExternalStore=function(t,e,n){return pt.current.useSyncExternalStore(t,e,n)};ge.useTransition=function(){return pt.current.useTransition()};ge.version="18.3.1";cm.exports=ge;var z=cm.exports;const nt=am(z);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fv=z,qv=Symbol.for("react.element"),Zv=Symbol.for("react.fragment"),Hv=Object.prototype.hasOwnProperty,Wv=Fv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Vv={key:!0,ref:!0,__self:!0,__source:!0};function ym(t,e,n){var i,s={},l=null,u=null;n!==void 0&&(l=""+n),e.key!==void 0&&(l=""+e.key),e.ref!==void 0&&(u=e.ref);for(i in e)Hv.call(e,i)&&!Vv.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:qv,type:t,key:l,ref:u,props:s,_owner:Wv.current}}ka.Fragment=Zv;ka.jsx=ym;ka.jsxs=ym;lm.exports=ka;var a=lm.exports,_m={exports:{}},Ct={},xm={exports:{}},wm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,Y){var H=D.length;D.push(Y);e:for(;0<H;){var re=H-1>>>1,ue=D[re];if(0<s(ue,Y))D[re]=Y,D[H]=ue,H=re;else break e}}function n(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var Y=D[0],H=D.pop();if(H!==Y){D[0]=H;e:for(var re=0,ue=D.length,Ce=ue>>>1;re<Ce;){var me=2*(re+1)-1,he=D[me],B=me+1,ve=D[B];if(0>s(he,H))B<ue&&0>s(ve,he)?(D[re]=ve,D[B]=H,re=B):(D[re]=he,D[me]=H,re=me);else if(B<ue&&0>s(ve,H))D[re]=ve,D[B]=H,re=B;else break e}}return Y}function s(D,Y){var H=D.sortIndex-Y.sortIndex;return H!==0?H:D.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var f=[],p=[],v=1,x=null,b=3,N=!1,k=!1,S=!1,O=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(D){for(var Y=n(p);Y!==null;){if(Y.callback===null)i(p);else if(Y.startTime<=D)i(p),Y.sortIndex=Y.expirationTime,e(f,Y);else break;Y=n(p)}}function C(D){if(S=!1,w(D),!k)if(n(f)!==null)k=!0,je(T);else{var Y=n(p);Y!==null&&Re(C,Y.startTime-D)}}function T(D,Y){k=!1,S&&(S=!1,g(U),U=-1),N=!0;var H=b;try{for(w(Y),x=n(f);x!==null&&(!(x.expirationTime>Y)||D&&!$());){var re=x.callback;if(typeof re=="function"){x.callback=null,b=x.priorityLevel;var ue=re(x.expirationTime<=Y);Y=t.unstable_now(),typeof ue=="function"?x.callback=ue:x===n(f)&&i(f),w(Y)}else i(f);x=n(f)}if(x!==null)var Ce=!0;else{var me=n(p);me!==null&&Re(C,me.startTime-Y),Ce=!1}return Ce}finally{x=null,b=H,N=!1}}var P=!1,I=null,U=-1,K=5,E=-1;function $(){return!(t.unstable_now()-E<K)}function W(){if(I!==null){var D=t.unstable_now();E=D;var Y=!0;try{Y=I(!0,D)}finally{Y?Z():(P=!1,I=null)}}else P=!1}var Z;if(typeof _=="function")Z=function(){_(W)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ae=J.port2;J.port1.onmessage=W,Z=function(){ae.postMessage(null)}}else Z=function(){O(W,0)};function je(D){I=D,P||(P=!0,Z())}function Re(D,Y){U=O(function(){D(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){k||N||(k=!0,je(T))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_getFirstCallbackNode=function(){return n(f)},t.unstable_next=function(D){switch(b){case 1:case 2:case 3:var Y=3;break;default:Y=b}var H=b;b=Y;try{return D()}finally{b=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,Y){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var H=b;b=D;try{return Y()}finally{b=H}},t.unstable_scheduleCallback=function(D,Y,H){var re=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?re+H:re):H=re,D){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=H+ue,D={id:v++,callback:Y,priorityLevel:D,startTime:H,expirationTime:ue,sortIndex:-1},H>re?(D.sortIndex=H,e(p,D),n(f)===null&&D===n(p)&&(S?(g(U),U=-1):S=!0,Re(C,H-re))):(D.sortIndex=ue,e(f,D),k||N||(k=!0,je(T))),D},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(D){var Y=b;return function(){var H=b;b=Y;try{return D.apply(this,arguments)}finally{b=H}}}})(wm);xm.exports=wm;var Gv=xm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kv=z,Et=Gv;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bm=new Set,xs={};function Or(t,e){xi(t,e),xi(t+"Capture",e)}function xi(t,e){for(xs[t]=e,t=0;t<e.length;t++)bm.add(e[t])}var Sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dc=Object.prototype.hasOwnProperty,Jv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ph={},Eh={};function Qv(t){return dc.call(Eh,t)?!0:dc.call(Ph,t)?!1:Jv.test(t)?Eh[t]=!0:(Ph[t]=!0,!1)}function Xv(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Yv(t,e,n,i){if(e===null||typeof e>"u"||Xv(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gt(t,e,n,i,s,l,u){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=l,this.removeEmptyString=u}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){st[t]=new gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];st[e]=new gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){st[t]=new gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){st[t]=new gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){st[t]=new gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){st[t]=new gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){st[t]=new gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){st[t]=new gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){st[t]=new gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Su=/[\-:]([a-z])/g;function Pu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Su,Pu);st[e]=new gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Su,Pu);st[e]=new gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Su,Pu);st[e]=new gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){st[t]=new gt(t,1,!1,t.toLowerCase(),null,!1,!1)});st.xlinkHref=new gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){st[t]=new gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Eu(t,e,n,i){var s=st.hasOwnProperty(e)?st[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Yv(e,n,s,i)&&(n=null),i||s===null?Qv(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Tn=Kv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,go=Symbol.for("react.element"),ei=Symbol.for("react.portal"),ti=Symbol.for("react.fragment"),Cu=Symbol.for("react.strict_mode"),hc=Symbol.for("react.profiler"),jm=Symbol.for("react.provider"),km=Symbol.for("react.context"),Tu=Symbol.for("react.forward_ref"),fc=Symbol.for("react.suspense"),mc=Symbol.for("react.suspense_list"),Lu=Symbol.for("react.memo"),Bn=Symbol.for("react.lazy"),Nm=Symbol.for("react.offscreen"),Ch=Symbol.iterator;function Vi(t){return t===null||typeof t!="object"?null:(t=Ch&&t[Ch]||t["@@iterator"],typeof t=="function"?t:null)}var ze=Object.assign,Pl;function ns(t){if(Pl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Pl=e&&e[1]||""}return`
`+Pl+t}var El=!1;function Cl(t,e){if(!t||El)return"";El=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var i=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){i=p}t.call(e.prototype)}else{try{throw Error()}catch(p){i=p}t()}}catch(p){if(p&&i&&typeof p.stack=="string"){for(var s=p.stack.split(`
`),l=i.stack.split(`
`),u=s.length-1,h=l.length-1;1<=u&&0<=h&&s[u]!==l[h];)h--;for(;1<=u&&0<=h;u--,h--)if(s[u]!==l[h]){if(u!==1||h!==1)do if(u--,h--,0>h||s[u]!==l[h]){var f=`
`+s[u].replace(" at new "," at ");return t.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",t.displayName)),f}while(1<=u&&0<=h);break}}}finally{El=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ns(t):""}function ey(t){switch(t.tag){case 5:return ns(t.type);case 16:return ns("Lazy");case 13:return ns("Suspense");case 19:return ns("SuspenseList");case 0:case 2:case 15:return t=Cl(t.type,!1),t;case 11:return t=Cl(t.type.render,!1),t;case 1:return t=Cl(t.type,!0),t;default:return""}}function pc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ti:return"Fragment";case ei:return"Portal";case hc:return"Profiler";case Cu:return"StrictMode";case fc:return"Suspense";case mc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case km:return(t.displayName||"Context")+".Consumer";case jm:return(t._context.displayName||"Context")+".Provider";case Tu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Lu:return e=t.displayName||null,e!==null?e:pc(t.type)||"Memo";case Bn:e=t._payload,t=t._init;try{return pc(t(e))}catch{}}return null}function ty(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pc(e);case 8:return e===Cu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function tr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Sm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ny(t){var e=Sm(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,l=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(u){i=""+u,l.call(this,u)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(u){i=""+u},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function vo(t){t._valueTracker||(t._valueTracker=ny(t))}function Pm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Sm(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Ko(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function gc(t,e){var n=e.checked;return ze({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Th(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=tr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Em(t,e){e=e.checked,e!=null&&Eu(t,"checked",e,!1)}function vc(t,e){Em(t,e);var n=tr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?yc(t,e.type,n):e.hasOwnProperty("defaultValue")&&yc(t,e.type,tr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Lh(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function yc(t,e,n){(e!=="number"||Ko(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var rs=Array.isArray;function mi(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+tr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function _c(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return ze({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Oh(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(q(92));if(rs(n)){if(1<n.length)throw Error(q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:tr(n)}}function Cm(t,e){var n=tr(e.value),i=tr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Ah(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Tm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Tm(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var yo,Lm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(yo=yo||document.createElement("div"),yo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=yo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ws(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var as={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ry=["Webkit","ms","Moz","O"];Object.keys(as).forEach(function(t){ry.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),as[e]=as[t]})});function Om(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||as.hasOwnProperty(t)&&as[t]?(""+e).trim():e+"px"}function Am(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=Om(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var iy=ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wc(t,e){if(e){if(iy[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function bc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jc=null;function Ou(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var kc=null,pi=null,gi=null;function Ih(t){if(t=qs(t)){if(typeof kc!="function")throw Error(q(280));var e=t.stateNode;e&&(e=Ca(e),kc(t.stateNode,t.type,e))}}function Im(t){pi?gi?gi.push(t):gi=[t]:pi=t}function Mm(){if(pi){var t=pi,e=gi;if(gi=pi=null,Ih(t),e)for(t=0;t<e.length;t++)Ih(e[t])}}function zm(t,e){return t(e)}function Rm(){}var Tl=!1;function Dm(t,e,n){if(Tl)return t(e,n);Tl=!0;try{return zm(t,e,n)}finally{Tl=!1,(pi!==null||gi!==null)&&(Rm(),Mm())}}function bs(t,e){var n=t.stateNode;if(n===null)return null;var i=Ca(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var Nc=!1;if(Sn)try{var Gi={};Object.defineProperty(Gi,"passive",{get:function(){Nc=!0}}),window.addEventListener("test",Gi,Gi),window.removeEventListener("test",Gi,Gi)}catch{Nc=!1}function sy(t,e,n,i,s,l,u,h,f){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(v){this.onError(v)}}var ls=!1,Jo=null,Qo=!1,Sc=null,oy={onError:function(t){ls=!0,Jo=t}};function ay(t,e,n,i,s,l,u,h,f){ls=!1,Jo=null,sy.apply(oy,arguments)}function ly(t,e,n,i,s,l,u,h,f){if(ay.apply(this,arguments),ls){if(ls){var p=Jo;ls=!1,Jo=null}else throw Error(q(198));Qo||(Qo=!0,Sc=p)}}function Ar(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Bm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Mh(t){if(Ar(t)!==t)throw Error(q(188))}function cy(t){var e=t.alternate;if(!e){if(e=Ar(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var l=s.alternate;if(l===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===n)return Mh(s),t;if(l===i)return Mh(s),e;l=l.sibling}throw Error(q(188))}if(n.return!==i.return)n=s,i=l;else{for(var u=!1,h=s.child;h;){if(h===n){u=!0,n=s,i=l;break}if(h===i){u=!0,i=s,n=l;break}h=h.sibling}if(!u){for(h=l.child;h;){if(h===n){u=!0,n=l,i=s;break}if(h===i){u=!0,i=l,n=s;break}h=h.sibling}if(!u)throw Error(q(189))}}if(n.alternate!==i)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function $m(t){return t=cy(t),t!==null?Um(t):null}function Um(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Um(t);if(e!==null)return e;t=t.sibling}return null}var Fm=Et.unstable_scheduleCallback,zh=Et.unstable_cancelCallback,uy=Et.unstable_shouldYield,dy=Et.unstable_requestPaint,Fe=Et.unstable_now,hy=Et.unstable_getCurrentPriorityLevel,Au=Et.unstable_ImmediatePriority,qm=Et.unstable_UserBlockingPriority,Xo=Et.unstable_NormalPriority,fy=Et.unstable_LowPriority,Zm=Et.unstable_IdlePriority,Na=null,cn=null;function my(t){if(cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(Na,t,void 0,(t.current.flags&128)===128)}catch{}}var Qt=Math.clz32?Math.clz32:vy,py=Math.log,gy=Math.LN2;function vy(t){return t>>>=0,t===0?32:31-(py(t)/gy|0)|0}var _o=64,xo=4194304;function is(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Yo(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,l=t.pingedLanes,u=n&268435455;if(u!==0){var h=u&~s;h!==0?i=is(h):(l&=u,l!==0&&(i=is(l)))}else u=n&~s,u!==0?i=is(u):l!==0&&(i=is(l));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,l=e&-e,s>=l||s===16&&(l&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Qt(e),s=1<<n,i|=t[n],e&=~s;return i}function yy(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _y(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,l=t.pendingLanes;0<l;){var u=31-Qt(l),h=1<<u,f=s[u];f===-1?(!(h&n)||h&i)&&(s[u]=yy(h,e)):f<=e&&(t.expiredLanes|=h),l&=~h}}function Pc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Hm(){var t=_o;return _o<<=1,!(_o&4194240)&&(_o=64),t}function Ll(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Us(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Qt(e),t[e]=n}function xy(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Qt(n),l=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~l}}function Iu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Qt(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var ke=0;function Wm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Vm,Mu,Gm,Km,Jm,Ec=!1,wo=[],Vn=null,Gn=null,Kn=null,js=new Map,ks=new Map,Fn=[],wy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rh(t,e){switch(t){case"focusin":case"focusout":Vn=null;break;case"dragenter":case"dragleave":Gn=null;break;case"mouseover":case"mouseout":Kn=null;break;case"pointerover":case"pointerout":js.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ks.delete(e.pointerId)}}function Ki(t,e,n,i,s,l){return t===null||t.nativeEvent!==l?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:l,targetContainers:[s]},e!==null&&(e=qs(e),e!==null&&Mu(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function by(t,e,n,i,s){switch(e){case"focusin":return Vn=Ki(Vn,t,e,n,i,s),!0;case"dragenter":return Gn=Ki(Gn,t,e,n,i,s),!0;case"mouseover":return Kn=Ki(Kn,t,e,n,i,s),!0;case"pointerover":var l=s.pointerId;return js.set(l,Ki(js.get(l)||null,t,e,n,i,s)),!0;case"gotpointercapture":return l=s.pointerId,ks.set(l,Ki(ks.get(l)||null,t,e,n,i,s)),!0}return!1}function Qm(t){var e=xr(t.target);if(e!==null){var n=Ar(e);if(n!==null){if(e=n.tag,e===13){if(e=Bm(n),e!==null){t.blockedOn=e,Jm(t.priority,function(){Gm(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Cc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);jc=i,n.target.dispatchEvent(i),jc=null}else return e=qs(n),e!==null&&Mu(e),t.blockedOn=n,!1;e.shift()}return!0}function Dh(t,e,n){Bo(t)&&n.delete(e)}function jy(){Ec=!1,Vn!==null&&Bo(Vn)&&(Vn=null),Gn!==null&&Bo(Gn)&&(Gn=null),Kn!==null&&Bo(Kn)&&(Kn=null),js.forEach(Dh),ks.forEach(Dh)}function Ji(t,e){t.blockedOn===e&&(t.blockedOn=null,Ec||(Ec=!0,Et.unstable_scheduleCallback(Et.unstable_NormalPriority,jy)))}function Ns(t){function e(s){return Ji(s,t)}if(0<wo.length){Ji(wo[0],t);for(var n=1;n<wo.length;n++){var i=wo[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Vn!==null&&Ji(Vn,t),Gn!==null&&Ji(Gn,t),Kn!==null&&Ji(Kn,t),js.forEach(e),ks.forEach(e),n=0;n<Fn.length;n++)i=Fn[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Fn.length&&(n=Fn[0],n.blockedOn===null);)Qm(n),n.blockedOn===null&&Fn.shift()}var vi=Tn.ReactCurrentBatchConfig,ea=!0;function ky(t,e,n,i){var s=ke,l=vi.transition;vi.transition=null;try{ke=1,zu(t,e,n,i)}finally{ke=s,vi.transition=l}}function Ny(t,e,n,i){var s=ke,l=vi.transition;vi.transition=null;try{ke=4,zu(t,e,n,i)}finally{ke=s,vi.transition=l}}function zu(t,e,n,i){if(ea){var s=Cc(t,e,n,i);if(s===null)Ul(t,e,i,ta,n),Rh(t,i);else if(by(s,t,e,n,i))i.stopPropagation();else if(Rh(t,i),e&4&&-1<wy.indexOf(t)){for(;s!==null;){var l=qs(s);if(l!==null&&Vm(l),l=Cc(t,e,n,i),l===null&&Ul(t,e,i,ta,n),l===s)break;s=l}s!==null&&i.stopPropagation()}else Ul(t,e,i,null,n)}}var ta=null;function Cc(t,e,n,i){if(ta=null,t=Ou(i),t=xr(t),t!==null)if(e=Ar(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Bm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ta=t,null}function Xm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hy()){case Au:return 1;case qm:return 4;case Xo:case fy:return 16;case Zm:return 536870912;default:return 16}default:return 16}}var Hn=null,Ru=null,$o=null;function Ym(){if($o)return $o;var t,e=Ru,n=e.length,i,s="value"in Hn?Hn.value:Hn.textContent,l=s.length;for(t=0;t<n&&e[t]===s[t];t++);var u=n-t;for(i=1;i<=u&&e[n-i]===s[l-i];i++);return $o=s.slice(t,1<i?1-i:void 0)}function Uo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function bo(){return!0}function Bh(){return!1}function Tt(t){function e(n,i,s,l,u){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=l,this.target=u,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(l):l[h]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?bo:Bh,this.isPropagationStopped=Bh,this}return ze(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=bo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=bo)},persist:function(){},isPersistent:bo}),e}var Ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Du=Tt(Ci),Fs=ze({},Ci,{view:0,detail:0}),Sy=Tt(Fs),Ol,Al,Qi,Sa=ze({},Fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qi&&(Qi&&t.type==="mousemove"?(Ol=t.screenX-Qi.screenX,Al=t.screenY-Qi.screenY):Al=Ol=0,Qi=t),Ol)},movementY:function(t){return"movementY"in t?t.movementY:Al}}),$h=Tt(Sa),Py=ze({},Sa,{dataTransfer:0}),Ey=Tt(Py),Cy=ze({},Fs,{relatedTarget:0}),Il=Tt(Cy),Ty=ze({},Ci,{animationName:0,elapsedTime:0,pseudoElement:0}),Ly=Tt(Ty),Oy=ze({},Ci,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ay=Tt(Oy),Iy=ze({},Ci,{data:0}),Uh=Tt(Iy),My={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ry={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dy(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ry[t])?!!e[t]:!1}function Bu(){return Dy}var By=ze({},Fs,{key:function(t){if(t.key){var e=My[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Uo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bu,charCode:function(t){return t.type==="keypress"?Uo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Uo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$y=Tt(By),Uy=ze({},Sa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fh=Tt(Uy),Fy=ze({},Fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bu}),qy=Tt(Fy),Zy=ze({},Ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hy=Tt(Zy),Wy=ze({},Sa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Vy=Tt(Wy),Gy=[9,13,27,32],$u=Sn&&"CompositionEvent"in window,cs=null;Sn&&"documentMode"in document&&(cs=document.documentMode);var Ky=Sn&&"TextEvent"in window&&!cs,ep=Sn&&(!$u||cs&&8<cs&&11>=cs),qh=" ",Zh=!1;function tp(t,e){switch(t){case"keyup":return Gy.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function np(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ni=!1;function Jy(t,e){switch(t){case"compositionend":return np(e);case"keypress":return e.which!==32?null:(Zh=!0,qh);case"textInput":return t=e.data,t===qh&&Zh?null:t;default:return null}}function Qy(t,e){if(ni)return t==="compositionend"||!$u&&tp(t,e)?(t=Ym(),$o=Ru=Hn=null,ni=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ep&&e.locale!=="ko"?null:e.data;default:return null}}var Xy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Xy[t.type]:e==="textarea"}function rp(t,e,n,i){Im(i),e=na(e,"onChange"),0<e.length&&(n=new Du("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var us=null,Ss=null;function Yy(t){mp(t,0)}function Pa(t){var e=si(t);if(Pm(e))return t}function e_(t,e){if(t==="change")return e}var ip=!1;if(Sn){var Ml;if(Sn){var zl="oninput"in document;if(!zl){var Wh=document.createElement("div");Wh.setAttribute("oninput","return;"),zl=typeof Wh.oninput=="function"}Ml=zl}else Ml=!1;ip=Ml&&(!document.documentMode||9<document.documentMode)}function Vh(){us&&(us.detachEvent("onpropertychange",sp),Ss=us=null)}function sp(t){if(t.propertyName==="value"&&Pa(Ss)){var e=[];rp(e,Ss,t,Ou(t)),Dm(Yy,e)}}function t_(t,e,n){t==="focusin"?(Vh(),us=e,Ss=n,us.attachEvent("onpropertychange",sp)):t==="focusout"&&Vh()}function n_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Pa(Ss)}function r_(t,e){if(t==="click")return Pa(e)}function i_(t,e){if(t==="input"||t==="change")return Pa(e)}function s_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yt=typeof Object.is=="function"?Object.is:s_;function Ps(t,e){if(Yt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!dc.call(e,s)||!Yt(t[s],e[s]))return!1}return!0}function Gh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Kh(t,e){var n=Gh(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Gh(n)}}function op(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?op(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ap(){for(var t=window,e=Ko();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ko(t.document)}return e}function Uu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function o_(t){var e=ap(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&op(n.ownerDocument.documentElement,n)){if(i!==null&&Uu(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,l=Math.min(i.start,s);i=i.end===void 0?l:Math.min(i.end,s),!t.extend&&l>i&&(s=i,i=l,l=s),s=Kh(n,l);var u=Kh(n,i);s&&u&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==u.node||t.focusOffset!==u.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),l>i?(t.addRange(e),t.extend(u.node,u.offset)):(e.setEnd(u.node,u.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var a_=Sn&&"documentMode"in document&&11>=document.documentMode,ri=null,Tc=null,ds=null,Lc=!1;function Jh(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Lc||ri==null||ri!==Ko(i)||(i=ri,"selectionStart"in i&&Uu(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ds&&Ps(ds,i)||(ds=i,i=na(Tc,"onSelect"),0<i.length&&(e=new Du("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=ri)))}function jo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ii={animationend:jo("Animation","AnimationEnd"),animationiteration:jo("Animation","AnimationIteration"),animationstart:jo("Animation","AnimationStart"),transitionend:jo("Transition","TransitionEnd")},Rl={},lp={};Sn&&(lp=document.createElement("div").style,"AnimationEvent"in window||(delete ii.animationend.animation,delete ii.animationiteration.animation,delete ii.animationstart.animation),"TransitionEvent"in window||delete ii.transitionend.transition);function Ea(t){if(Rl[t])return Rl[t];if(!ii[t])return t;var e=ii[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in lp)return Rl[t]=e[n];return t}var cp=Ea("animationend"),up=Ea("animationiteration"),dp=Ea("animationstart"),hp=Ea("transitionend"),fp=new Map,Qh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rr(t,e){fp.set(t,e),Or(e,[t])}for(var Dl=0;Dl<Qh.length;Dl++){var Bl=Qh[Dl],l_=Bl.toLowerCase(),c_=Bl[0].toUpperCase()+Bl.slice(1);rr(l_,"on"+c_)}rr(cp,"onAnimationEnd");rr(up,"onAnimationIteration");rr(dp,"onAnimationStart");rr("dblclick","onDoubleClick");rr("focusin","onFocus");rr("focusout","onBlur");rr(hp,"onTransitionEnd");xi("onMouseEnter",["mouseout","mouseover"]);xi("onMouseLeave",["mouseout","mouseover"]);xi("onPointerEnter",["pointerout","pointerover"]);xi("onPointerLeave",["pointerout","pointerover"]);Or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Or("onBeforeInput",["compositionend","keypress","textInput","paste"]);Or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ss="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),u_=new Set("cancel close invalid load scroll toggle".split(" ").concat(ss));function Xh(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,ly(i,e,void 0,t),t.currentTarget=null}function mp(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var l=void 0;if(e)for(var u=i.length-1;0<=u;u--){var h=i[u],f=h.instance,p=h.currentTarget;if(h=h.listener,f!==l&&s.isPropagationStopped())break e;Xh(s,h,p),l=f}else for(u=0;u<i.length;u++){if(h=i[u],f=h.instance,p=h.currentTarget,h=h.listener,f!==l&&s.isPropagationStopped())break e;Xh(s,h,p),l=f}}}if(Qo)throw t=Sc,Qo=!1,Sc=null,t}function Te(t,e){var n=e[zc];n===void 0&&(n=e[zc]=new Set);var i=t+"__bubble";n.has(i)||(pp(e,t,2,!1),n.add(i))}function $l(t,e,n){var i=0;e&&(i|=4),pp(n,t,i,e)}var ko="_reactListening"+Math.random().toString(36).slice(2);function Es(t){if(!t[ko]){t[ko]=!0,bm.forEach(function(n){n!=="selectionchange"&&(u_.has(n)||$l(n,!1,t),$l(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ko]||(e[ko]=!0,$l("selectionchange",!1,e))}}function pp(t,e,n,i){switch(Xm(e)){case 1:var s=ky;break;case 4:s=Ny;break;default:s=zu}n=s.bind(null,e,n,t),s=void 0,!Nc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Ul(t,e,n,i,s){var l=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var u=i.tag;if(u===3||u===4){var h=i.stateNode.containerInfo;if(h===s||h.nodeType===8&&h.parentNode===s)break;if(u===4)for(u=i.return;u!==null;){var f=u.tag;if((f===3||f===4)&&(f=u.stateNode.containerInfo,f===s||f.nodeType===8&&f.parentNode===s))return;u=u.return}for(;h!==null;){if(u=xr(h),u===null)return;if(f=u.tag,f===5||f===6){i=l=u;continue e}h=h.parentNode}}i=i.return}Dm(function(){var p=l,v=Ou(n),x=[];e:{var b=fp.get(t);if(b!==void 0){var N=Du,k=t;switch(t){case"keypress":if(Uo(n)===0)break e;case"keydown":case"keyup":N=$y;break;case"focusin":k="focus",N=Il;break;case"focusout":k="blur",N=Il;break;case"beforeblur":case"afterblur":N=Il;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":N=$h;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":N=Ey;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":N=qy;break;case cp:case up:case dp:N=Ly;break;case hp:N=Hy;break;case"scroll":N=Sy;break;case"wheel":N=Vy;break;case"copy":case"cut":case"paste":N=Ay;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":N=Fh}var S=(e&4)!==0,O=!S&&t==="scroll",g=S?b!==null?b+"Capture":null:b;S=[];for(var _=p,w;_!==null;){w=_;var C=w.stateNode;if(w.tag===5&&C!==null&&(w=C,g!==null&&(C=bs(_,g),C!=null&&S.push(Cs(_,C,w)))),O)break;_=_.return}0<S.length&&(b=new N(b,k,null,n,v),x.push({event:b,listeners:S}))}}if(!(e&7)){e:{if(b=t==="mouseover"||t==="pointerover",N=t==="mouseout"||t==="pointerout",b&&n!==jc&&(k=n.relatedTarget||n.fromElement)&&(xr(k)||k[Pn]))break e;if((N||b)&&(b=v.window===v?v:(b=v.ownerDocument)?b.defaultView||b.parentWindow:window,N?(k=n.relatedTarget||n.toElement,N=p,k=k?xr(k):null,k!==null&&(O=Ar(k),k!==O||k.tag!==5&&k.tag!==6)&&(k=null)):(N=null,k=p),N!==k)){if(S=$h,C="onMouseLeave",g="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(S=Fh,C="onPointerLeave",g="onPointerEnter",_="pointer"),O=N==null?b:si(N),w=k==null?b:si(k),b=new S(C,_+"leave",N,n,v),b.target=O,b.relatedTarget=w,C=null,xr(v)===p&&(S=new S(g,_+"enter",k,n,v),S.target=w,S.relatedTarget=O,C=S),O=C,N&&k)t:{for(S=N,g=k,_=0,w=S;w;w=Wr(w))_++;for(w=0,C=g;C;C=Wr(C))w++;for(;0<_-w;)S=Wr(S),_--;for(;0<w-_;)g=Wr(g),w--;for(;_--;){if(S===g||g!==null&&S===g.alternate)break t;S=Wr(S),g=Wr(g)}S=null}else S=null;N!==null&&Yh(x,b,N,S,!1),k!==null&&O!==null&&Yh(x,O,k,S,!0)}}e:{if(b=p?si(p):window,N=b.nodeName&&b.nodeName.toLowerCase(),N==="select"||N==="input"&&b.type==="file")var T=e_;else if(Hh(b))if(ip)T=i_;else{T=n_;var P=t_}else(N=b.nodeName)&&N.toLowerCase()==="input"&&(b.type==="checkbox"||b.type==="radio")&&(T=r_);if(T&&(T=T(t,p))){rp(x,T,n,v);break e}P&&P(t,b,p),t==="focusout"&&(P=b._wrapperState)&&P.controlled&&b.type==="number"&&yc(b,"number",b.value)}switch(P=p?si(p):window,t){case"focusin":(Hh(P)||P.contentEditable==="true")&&(ri=P,Tc=p,ds=null);break;case"focusout":ds=Tc=ri=null;break;case"mousedown":Lc=!0;break;case"contextmenu":case"mouseup":case"dragend":Lc=!1,Jh(x,n,v);break;case"selectionchange":if(a_)break;case"keydown":case"keyup":Jh(x,n,v)}var I;if($u)e:{switch(t){case"compositionstart":var U="onCompositionStart";break e;case"compositionend":U="onCompositionEnd";break e;case"compositionupdate":U="onCompositionUpdate";break e}U=void 0}else ni?tp(t,n)&&(U="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(U="onCompositionStart");U&&(ep&&n.locale!=="ko"&&(ni||U!=="onCompositionStart"?U==="onCompositionEnd"&&ni&&(I=Ym()):(Hn=v,Ru="value"in Hn?Hn.value:Hn.textContent,ni=!0)),P=na(p,U),0<P.length&&(U=new Uh(U,t,null,n,v),x.push({event:U,listeners:P}),I?U.data=I:(I=np(n),I!==null&&(U.data=I)))),(I=Ky?Jy(t,n):Qy(t,n))&&(p=na(p,"onBeforeInput"),0<p.length&&(v=new Uh("onBeforeInput","beforeinput",null,n,v),x.push({event:v,listeners:p}),v.data=I))}mp(x,e)})}function Cs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function na(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=bs(t,n),l!=null&&i.unshift(Cs(t,l,s)),l=bs(t,e),l!=null&&i.push(Cs(t,l,s))),t=t.return}return i}function Wr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Yh(t,e,n,i,s){for(var l=e._reactName,u=[];n!==null&&n!==i;){var h=n,f=h.alternate,p=h.stateNode;if(f!==null&&f===i)break;h.tag===5&&p!==null&&(h=p,s?(f=bs(n,l),f!=null&&u.unshift(Cs(n,f,h))):s||(f=bs(n,l),f!=null&&u.push(Cs(n,f,h)))),n=n.return}u.length!==0&&t.push({event:e,listeners:u})}var d_=/\r\n?/g,h_=/\u0000|\uFFFD/g;function ef(t){return(typeof t=="string"?t:""+t).replace(d_,`
`).replace(h_,"")}function No(t,e,n){if(e=ef(e),ef(t)!==e&&n)throw Error(q(425))}function ra(){}var Oc=null,Ac=null;function Ic(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Mc=typeof setTimeout=="function"?setTimeout:void 0,f_=typeof clearTimeout=="function"?clearTimeout:void 0,tf=typeof Promise=="function"?Promise:void 0,m_=typeof queueMicrotask=="function"?queueMicrotask:typeof tf<"u"?function(t){return tf.resolve(null).then(t).catch(p_)}:Mc;function p_(t){setTimeout(function(){throw t})}function Fl(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),Ns(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);Ns(e)}function Jn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function nf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ti=Math.random().toString(36).slice(2),ln="__reactFiber$"+Ti,Ts="__reactProps$"+Ti,Pn="__reactContainer$"+Ti,zc="__reactEvents$"+Ti,g_="__reactListeners$"+Ti,v_="__reactHandles$"+Ti;function xr(t){var e=t[ln];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Pn]||n[ln]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=nf(t);t!==null;){if(n=t[ln])return n;t=nf(t)}return e}t=n,n=t.parentNode}return null}function qs(t){return t=t[ln]||t[Pn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function si(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function Ca(t){return t[Ts]||null}var Rc=[],oi=-1;function ir(t){return{current:t}}function Le(t){0>oi||(t.current=Rc[oi],Rc[oi]=null,oi--)}function Ee(t,e){oi++,Rc[oi]=t.current,t.current=e}var nr={},ct=ir(nr),wt=ir(!1),Sr=nr;function wi(t,e){var n=t.type.contextTypes;if(!n)return nr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in n)s[l]=e[l];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function bt(t){return t=t.childContextTypes,t!=null}function ia(){Le(wt),Le(ct)}function rf(t,e,n){if(ct.current!==nr)throw Error(q(168));Ee(ct,e),Ee(wt,n)}function gp(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(q(108,ty(t)||"Unknown",s));return ze({},n,i)}function sa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||nr,Sr=ct.current,Ee(ct,t),Ee(wt,wt.current),!0}function sf(t,e,n){var i=t.stateNode;if(!i)throw Error(q(169));n?(t=gp(t,e,Sr),i.__reactInternalMemoizedMergedChildContext=t,Le(wt),Le(ct),Ee(ct,t)):Le(wt),Ee(wt,n)}var wn=null,Ta=!1,ql=!1;function vp(t){wn===null?wn=[t]:wn.push(t)}function y_(t){Ta=!0,vp(t)}function sr(){if(!ql&&wn!==null){ql=!0;var t=0,e=ke;try{var n=wn;for(ke=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}wn=null,Ta=!1}catch(s){throw wn!==null&&(wn=wn.slice(t+1)),Fm(Au,sr),s}finally{ke=e,ql=!1}}return null}var ai=[],li=0,oa=null,aa=0,It=[],Mt=0,Pr=null,bn=1,jn="";function gr(t,e){ai[li++]=aa,ai[li++]=oa,oa=t,aa=e}function yp(t,e,n){It[Mt++]=bn,It[Mt++]=jn,It[Mt++]=Pr,Pr=t;var i=bn;t=jn;var s=32-Qt(i)-1;i&=~(1<<s),n+=1;var l=32-Qt(e)+s;if(30<l){var u=s-s%5;l=(i&(1<<u)-1).toString(32),i>>=u,s-=u,bn=1<<32-Qt(e)+s|n<<s|i,jn=l+t}else bn=1<<l|n<<s|i,jn=t}function Fu(t){t.return!==null&&(gr(t,1),yp(t,1,0))}function qu(t){for(;t===oa;)oa=ai[--li],ai[li]=null,aa=ai[--li],ai[li]=null;for(;t===Pr;)Pr=It[--Mt],It[Mt]=null,jn=It[--Mt],It[Mt]=null,bn=It[--Mt],It[Mt]=null}var St=null,Nt=null,Oe=!1,Jt=null;function _p(t,e){var n=zt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function of(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,St=t,Nt=Jn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,St=t,Nt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Pr!==null?{id:bn,overflow:jn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=zt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,St=t,Nt=null,!0):!1;default:return!1}}function Dc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Bc(t){if(Oe){var e=Nt;if(e){var n=e;if(!of(t,e)){if(Dc(t))throw Error(q(418));e=Jn(n.nextSibling);var i=St;e&&of(t,e)?_p(i,n):(t.flags=t.flags&-4097|2,Oe=!1,St=t)}}else{if(Dc(t))throw Error(q(418));t.flags=t.flags&-4097|2,Oe=!1,St=t}}}function af(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;St=t}function So(t){if(t!==St)return!1;if(!Oe)return af(t),Oe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ic(t.type,t.memoizedProps)),e&&(e=Nt)){if(Dc(t))throw xp(),Error(q(418));for(;e;)_p(t,e),e=Jn(e.nextSibling)}if(af(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Nt=Jn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Nt=null}}else Nt=St?Jn(t.stateNode.nextSibling):null;return!0}function xp(){for(var t=Nt;t;)t=Jn(t.nextSibling)}function bi(){Nt=St=null,Oe=!1}function Zu(t){Jt===null?Jt=[t]:Jt.push(t)}var __=Tn.ReactCurrentBatchConfig;function Xi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var i=n.stateNode}if(!i)throw Error(q(147,t));var s=i,l=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===l?e.ref:(e=function(u){var h=s.refs;u===null?delete h[l]:h[l]=u},e._stringRef=l,e)}if(typeof t!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,t))}return t}function Po(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function lf(t){var e=t._init;return e(t._payload)}function wp(t){function e(g,_){if(t){var w=g.deletions;w===null?(g.deletions=[_],g.flags|=16):w.push(_)}}function n(g,_){if(!t)return null;for(;_!==null;)e(g,_),_=_.sibling;return null}function i(g,_){for(g=new Map;_!==null;)_.key!==null?g.set(_.key,_):g.set(_.index,_),_=_.sibling;return g}function s(g,_){return g=er(g,_),g.index=0,g.sibling=null,g}function l(g,_,w){return g.index=w,t?(w=g.alternate,w!==null?(w=w.index,w<_?(g.flags|=2,_):w):(g.flags|=2,_)):(g.flags|=1048576,_)}function u(g){return t&&g.alternate===null&&(g.flags|=2),g}function h(g,_,w,C){return _===null||_.tag!==6?(_=Jl(w,g.mode,C),_.return=g,_):(_=s(_,w),_.return=g,_)}function f(g,_,w,C){var T=w.type;return T===ti?v(g,_,w.props.children,C,w.key):_!==null&&(_.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Bn&&lf(T)===_.type)?(C=s(_,w.props),C.ref=Xi(g,_,w),C.return=g,C):(C=Go(w.type,w.key,w.props,null,g.mode,C),C.ref=Xi(g,_,w),C.return=g,C)}function p(g,_,w,C){return _===null||_.tag!==4||_.stateNode.containerInfo!==w.containerInfo||_.stateNode.implementation!==w.implementation?(_=Ql(w,g.mode,C),_.return=g,_):(_=s(_,w.children||[]),_.return=g,_)}function v(g,_,w,C,T){return _===null||_.tag!==7?(_=Nr(w,g.mode,C,T),_.return=g,_):(_=s(_,w),_.return=g,_)}function x(g,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Jl(""+_,g.mode,w),_.return=g,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case go:return w=Go(_.type,_.key,_.props,null,g.mode,w),w.ref=Xi(g,null,_),w.return=g,w;case ei:return _=Ql(_,g.mode,w),_.return=g,_;case Bn:var C=_._init;return x(g,C(_._payload),w)}if(rs(_)||Vi(_))return _=Nr(_,g.mode,w,null),_.return=g,_;Po(g,_)}return null}function b(g,_,w,C){var T=_!==null?_.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return T!==null?null:h(g,_,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case go:return w.key===T?f(g,_,w,C):null;case ei:return w.key===T?p(g,_,w,C):null;case Bn:return T=w._init,b(g,_,T(w._payload),C)}if(rs(w)||Vi(w))return T!==null?null:v(g,_,w,C,null);Po(g,w)}return null}function N(g,_,w,C,T){if(typeof C=="string"&&C!==""||typeof C=="number")return g=g.get(w)||null,h(_,g,""+C,T);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case go:return g=g.get(C.key===null?w:C.key)||null,f(_,g,C,T);case ei:return g=g.get(C.key===null?w:C.key)||null,p(_,g,C,T);case Bn:var P=C._init;return N(g,_,w,P(C._payload),T)}if(rs(C)||Vi(C))return g=g.get(w)||null,v(_,g,C,T,null);Po(_,C)}return null}function k(g,_,w,C){for(var T=null,P=null,I=_,U=_=0,K=null;I!==null&&U<w.length;U++){I.index>U?(K=I,I=null):K=I.sibling;var E=b(g,I,w[U],C);if(E===null){I===null&&(I=K);break}t&&I&&E.alternate===null&&e(g,I),_=l(E,_,U),P===null?T=E:P.sibling=E,P=E,I=K}if(U===w.length)return n(g,I),Oe&&gr(g,U),T;if(I===null){for(;U<w.length;U++)I=x(g,w[U],C),I!==null&&(_=l(I,_,U),P===null?T=I:P.sibling=I,P=I);return Oe&&gr(g,U),T}for(I=i(g,I);U<w.length;U++)K=N(I,g,U,w[U],C),K!==null&&(t&&K.alternate!==null&&I.delete(K.key===null?U:K.key),_=l(K,_,U),P===null?T=K:P.sibling=K,P=K);return t&&I.forEach(function($){return e(g,$)}),Oe&&gr(g,U),T}function S(g,_,w,C){var T=Vi(w);if(typeof T!="function")throw Error(q(150));if(w=T.call(w),w==null)throw Error(q(151));for(var P=T=null,I=_,U=_=0,K=null,E=w.next();I!==null&&!E.done;U++,E=w.next()){I.index>U?(K=I,I=null):K=I.sibling;var $=b(g,I,E.value,C);if($===null){I===null&&(I=K);break}t&&I&&$.alternate===null&&e(g,I),_=l($,_,U),P===null?T=$:P.sibling=$,P=$,I=K}if(E.done)return n(g,I),Oe&&gr(g,U),T;if(I===null){for(;!E.done;U++,E=w.next())E=x(g,E.value,C),E!==null&&(_=l(E,_,U),P===null?T=E:P.sibling=E,P=E);return Oe&&gr(g,U),T}for(I=i(g,I);!E.done;U++,E=w.next())E=N(I,g,U,E.value,C),E!==null&&(t&&E.alternate!==null&&I.delete(E.key===null?U:E.key),_=l(E,_,U),P===null?T=E:P.sibling=E,P=E);return t&&I.forEach(function(W){return e(g,W)}),Oe&&gr(g,U),T}function O(g,_,w,C){if(typeof w=="object"&&w!==null&&w.type===ti&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case go:e:{for(var T=w.key,P=_;P!==null;){if(P.key===T){if(T=w.type,T===ti){if(P.tag===7){n(g,P.sibling),_=s(P,w.props.children),_.return=g,g=_;break e}}else if(P.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Bn&&lf(T)===P.type){n(g,P.sibling),_=s(P,w.props),_.ref=Xi(g,P,w),_.return=g,g=_;break e}n(g,P);break}else e(g,P);P=P.sibling}w.type===ti?(_=Nr(w.props.children,g.mode,C,w.key),_.return=g,g=_):(C=Go(w.type,w.key,w.props,null,g.mode,C),C.ref=Xi(g,_,w),C.return=g,g=C)}return u(g);case ei:e:{for(P=w.key;_!==null;){if(_.key===P)if(_.tag===4&&_.stateNode.containerInfo===w.containerInfo&&_.stateNode.implementation===w.implementation){n(g,_.sibling),_=s(_,w.children||[]),_.return=g,g=_;break e}else{n(g,_);break}else e(g,_);_=_.sibling}_=Ql(w,g.mode,C),_.return=g,g=_}return u(g);case Bn:return P=w._init,O(g,_,P(w._payload),C)}if(rs(w))return k(g,_,w,C);if(Vi(w))return S(g,_,w,C);Po(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,_!==null&&_.tag===6?(n(g,_.sibling),_=s(_,w),_.return=g,g=_):(n(g,_),_=Jl(w,g.mode,C),_.return=g,g=_),u(g)):n(g,_)}return O}var ji=wp(!0),bp=wp(!1),la=ir(null),ca=null,ci=null,Hu=null;function Wu(){Hu=ci=ca=null}function Vu(t){var e=la.current;Le(la),t._currentValue=e}function $c(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function yi(t,e){ca=t,Hu=ci=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(xt=!0),t.firstContext=null)}function Dt(t){var e=t._currentValue;if(Hu!==t)if(t={context:t,memoizedValue:e,next:null},ci===null){if(ca===null)throw Error(q(308));ci=t,ca.dependencies={lanes:0,firstContext:t}}else ci=ci.next=t;return e}var wr=null;function Gu(t){wr===null?wr=[t]:wr.push(t)}function jp(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,Gu(e)):(n.next=s.next,s.next=n),e.interleaved=n,En(t,i)}function En(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var $n=!1;function Ku(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function kn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Qn(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,xe&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,En(t,n)}return s=i.interleaved,s===null?(e.next=e,Gu(i)):(e.next=s.next,s.next=e),i.interleaved=e,En(t,n)}function Fo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Iu(t,n)}}function cf(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var u={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?s=l=u:l=l.next=u,n=n.next}while(n!==null);l===null?s=l=e:l=l.next=e}else s=l=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ua(t,e,n,i){var s=t.updateQueue;$n=!1;var l=s.firstBaseUpdate,u=s.lastBaseUpdate,h=s.shared.pending;if(h!==null){s.shared.pending=null;var f=h,p=f.next;f.next=null,u===null?l=p:u.next=p,u=f;var v=t.alternate;v!==null&&(v=v.updateQueue,h=v.lastBaseUpdate,h!==u&&(h===null?v.firstBaseUpdate=p:h.next=p,v.lastBaseUpdate=f))}if(l!==null){var x=s.baseState;u=0,v=p=f=null,h=l;do{var b=h.lane,N=h.eventTime;if((i&b)===b){v!==null&&(v=v.next={eventTime:N,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var k=t,S=h;switch(b=e,N=n,S.tag){case 1:if(k=S.payload,typeof k=="function"){x=k.call(N,x,b);break e}x=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=S.payload,b=typeof k=="function"?k.call(N,x,b):k,b==null)break e;x=ze({},x,b);break e;case 2:$n=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,b=s.effects,b===null?s.effects=[h]:b.push(h))}else N={eventTime:N,lane:b,tag:h.tag,payload:h.payload,callback:h.callback,next:null},v===null?(p=v=N,f=x):v=v.next=N,u|=b;if(h=h.next,h===null){if(h=s.shared.pending,h===null)break;b=h,h=b.next,b.next=null,s.lastBaseUpdate=b,s.shared.pending=null}}while(!0);if(v===null&&(f=x),s.baseState=f,s.firstBaseUpdate=p,s.lastBaseUpdate=v,e=s.shared.interleaved,e!==null){s=e;do u|=s.lane,s=s.next;while(s!==e)}else l===null&&(s.shared.lanes=0);Cr|=u,t.lanes=u,t.memoizedState=x}}function uf(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(q(191,s));s.call(i)}}}var Zs={},un=ir(Zs),Ls=ir(Zs),Os=ir(Zs);function br(t){if(t===Zs)throw Error(q(174));return t}function Ju(t,e){switch(Ee(Os,e),Ee(Ls,t),Ee(un,Zs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xc(e,t)}Le(un),Ee(un,e)}function ki(){Le(un),Le(Ls),Le(Os)}function Np(t){br(Os.current);var e=br(un.current),n=xc(e,t.type);e!==n&&(Ee(Ls,t),Ee(un,n))}function Qu(t){Ls.current===t&&(Le(un),Le(Ls))}var Ie=ir(0);function da(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Zl=[];function Xu(){for(var t=0;t<Zl.length;t++)Zl[t]._workInProgressVersionPrimary=null;Zl.length=0}var qo=Tn.ReactCurrentDispatcher,Hl=Tn.ReactCurrentBatchConfig,Er=0,Me=null,Ke=null,Xe=null,ha=!1,hs=!1,As=0,x_=0;function ot(){throw Error(q(321))}function Yu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Yt(t[n],e[n]))return!1;return!0}function ed(t,e,n,i,s,l){if(Er=l,Me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,qo.current=t===null||t.memoizedState===null?k_:N_,t=n(i,s),hs){l=0;do{if(hs=!1,As=0,25<=l)throw Error(q(301));l+=1,Xe=Ke=null,e.updateQueue=null,qo.current=S_,t=n(i,s)}while(hs)}if(qo.current=fa,e=Ke!==null&&Ke.next!==null,Er=0,Xe=Ke=Me=null,ha=!1,e)throw Error(q(300));return t}function td(){var t=As!==0;return As=0,t}function on(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?Me.memoizedState=Xe=t:Xe=Xe.next=t,Xe}function Bt(){if(Ke===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=Ke.next;var e=Xe===null?Me.memoizedState:Xe.next;if(e!==null)Xe=e,Ke=t;else{if(t===null)throw Error(q(310));Ke=t,t={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Xe===null?Me.memoizedState=Xe=t:Xe=Xe.next=t}return Xe}function Is(t,e){return typeof e=="function"?e(t):e}function Wl(t){var e=Bt(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var i=Ke,s=i.baseQueue,l=n.pending;if(l!==null){if(s!==null){var u=s.next;s.next=l.next,l.next=u}i.baseQueue=s=l,n.pending=null}if(s!==null){l=s.next,i=i.baseState;var h=u=null,f=null,p=l;do{var v=p.lane;if((Er&v)===v)f!==null&&(f=f.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),i=p.hasEagerState?p.eagerState:t(i,p.action);else{var x={lane:v,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};f===null?(h=f=x,u=i):f=f.next=x,Me.lanes|=v,Cr|=v}p=p.next}while(p!==null&&p!==l);f===null?u=i:f.next=h,Yt(i,e.memoizedState)||(xt=!0),e.memoizedState=i,e.baseState=u,e.baseQueue=f,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do l=s.lane,Me.lanes|=l,Cr|=l,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Vl(t){var e=Bt(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,l=e.memoizedState;if(s!==null){n.pending=null;var u=s=s.next;do l=t(l,u.action),u=u.next;while(u!==s);Yt(l,e.memoizedState)||(xt=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),n.lastRenderedState=l}return[l,i]}function Sp(){}function Pp(t,e){var n=Me,i=Bt(),s=e(),l=!Yt(i.memoizedState,s);if(l&&(i.memoizedState=s,xt=!0),i=i.queue,nd(Tp.bind(null,n,i,t),[t]),i.getSnapshot!==e||l||Xe!==null&&Xe.memoizedState.tag&1){if(n.flags|=2048,Ms(9,Cp.bind(null,n,i,s,e),void 0,null),Ye===null)throw Error(q(349));Er&30||Ep(n,e,s)}return s}function Ep(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Cp(t,e,n,i){e.value=n,e.getSnapshot=i,Lp(e)&&Op(t)}function Tp(t,e,n){return n(function(){Lp(e)&&Op(t)})}function Lp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Yt(t,n)}catch{return!0}}function Op(t){var e=En(t,1);e!==null&&Xt(e,t,1,-1)}function df(t){var e=on();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:t},e.queue=t,t=t.dispatch=j_.bind(null,Me,t),[e.memoizedState,t]}function Ms(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Ap(){return Bt().memoizedState}function Zo(t,e,n,i){var s=on();Me.flags|=t,s.memoizedState=Ms(1|e,n,void 0,i===void 0?null:i)}function La(t,e,n,i){var s=Bt();i=i===void 0?null:i;var l=void 0;if(Ke!==null){var u=Ke.memoizedState;if(l=u.destroy,i!==null&&Yu(i,u.deps)){s.memoizedState=Ms(e,n,l,i);return}}Me.flags|=t,s.memoizedState=Ms(1|e,n,l,i)}function hf(t,e){return Zo(8390656,8,t,e)}function nd(t,e){return La(2048,8,t,e)}function Ip(t,e){return La(4,2,t,e)}function Mp(t,e){return La(4,4,t,e)}function zp(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Rp(t,e,n){return n=n!=null?n.concat([t]):null,La(4,4,zp.bind(null,e,t),n)}function rd(){}function Dp(t,e){var n=Bt();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Yu(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Bp(t,e){var n=Bt();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Yu(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function $p(t,e,n){return Er&21?(Yt(n,e)||(n=Hm(),Me.lanes|=n,Cr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,xt=!0),t.memoizedState=n)}function w_(t,e){var n=ke;ke=n!==0&&4>n?n:4,t(!0);var i=Hl.transition;Hl.transition={};try{t(!1),e()}finally{ke=n,Hl.transition=i}}function Up(){return Bt().memoizedState}function b_(t,e,n){var i=Yn(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Fp(t))qp(e,n);else if(n=jp(t,e,n,i),n!==null){var s=ft();Xt(n,t,i,s),Zp(n,e,i)}}function j_(t,e,n){var i=Yn(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Fp(t))qp(e,s);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=e.lastRenderedReducer,l!==null))try{var u=e.lastRenderedState,h=l(u,n);if(s.hasEagerState=!0,s.eagerState=h,Yt(h,u)){var f=e.interleaved;f===null?(s.next=s,Gu(e)):(s.next=f.next,f.next=s),e.interleaved=s;return}}catch{}finally{}n=jp(t,e,s,i),n!==null&&(s=ft(),Xt(n,t,i,s),Zp(n,e,i))}}function Fp(t){var e=t.alternate;return t===Me||e!==null&&e===Me}function qp(t,e){hs=ha=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Zp(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Iu(t,n)}}var fa={readContext:Dt,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},k_={readContext:Dt,useCallback:function(t,e){return on().memoizedState=[t,e===void 0?null:e],t},useContext:Dt,useEffect:hf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Zo(4194308,4,zp.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Zo(4194308,4,t,e)},useInsertionEffect:function(t,e){return Zo(4,2,t,e)},useMemo:function(t,e){var n=on();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=on();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=b_.bind(null,Me,t),[i.memoizedState,t]},useRef:function(t){var e=on();return t={current:t},e.memoizedState=t},useState:df,useDebugValue:rd,useDeferredValue:function(t){return on().memoizedState=t},useTransition:function(){var t=df(!1),e=t[0];return t=w_.bind(null,t[1]),on().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Me,s=on();if(Oe){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),Ye===null)throw Error(q(349));Er&30||Ep(i,e,n)}s.memoizedState=n;var l={value:n,getSnapshot:e};return s.queue=l,hf(Tp.bind(null,i,l,t),[t]),i.flags|=2048,Ms(9,Cp.bind(null,i,l,n,e),void 0,null),n},useId:function(){var t=on(),e=Ye.identifierPrefix;if(Oe){var n=jn,i=bn;n=(i&~(1<<32-Qt(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=As++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=x_++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},N_={readContext:Dt,useCallback:Dp,useContext:Dt,useEffect:nd,useImperativeHandle:Rp,useInsertionEffect:Ip,useLayoutEffect:Mp,useMemo:Bp,useReducer:Wl,useRef:Ap,useState:function(){return Wl(Is)},useDebugValue:rd,useDeferredValue:function(t){var e=Bt();return $p(e,Ke.memoizedState,t)},useTransition:function(){var t=Wl(Is)[0],e=Bt().memoizedState;return[t,e]},useMutableSource:Sp,useSyncExternalStore:Pp,useId:Up,unstable_isNewReconciler:!1},S_={readContext:Dt,useCallback:Dp,useContext:Dt,useEffect:nd,useImperativeHandle:Rp,useInsertionEffect:Ip,useLayoutEffect:Mp,useMemo:Bp,useReducer:Vl,useRef:Ap,useState:function(){return Vl(Is)},useDebugValue:rd,useDeferredValue:function(t){var e=Bt();return Ke===null?e.memoizedState=t:$p(e,Ke.memoizedState,t)},useTransition:function(){var t=Vl(Is)[0],e=Bt().memoizedState;return[t,e]},useMutableSource:Sp,useSyncExternalStore:Pp,useId:Up,unstable_isNewReconciler:!1};function Vt(t,e){if(t&&t.defaultProps){e=ze({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Uc(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:ze({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Oa={isMounted:function(t){return(t=t._reactInternals)?Ar(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=ft(),s=Yn(t),l=kn(i,s);l.payload=e,n!=null&&(l.callback=n),e=Qn(t,l,s),e!==null&&(Xt(e,t,s,i),Fo(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=ft(),s=Yn(t),l=kn(i,s);l.tag=1,l.payload=e,n!=null&&(l.callback=n),e=Qn(t,l,s),e!==null&&(Xt(e,t,s,i),Fo(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ft(),i=Yn(t),s=kn(n,i);s.tag=2,e!=null&&(s.callback=e),e=Qn(t,s,i),e!==null&&(Xt(e,t,i,n),Fo(e,t,i))}};function ff(t,e,n,i,s,l,u){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,l,u):e.prototype&&e.prototype.isPureReactComponent?!Ps(n,i)||!Ps(s,l):!0}function Hp(t,e,n){var i=!1,s=nr,l=e.contextType;return typeof l=="object"&&l!==null?l=Dt(l):(s=bt(e)?Sr:ct.current,i=e.contextTypes,l=(i=i!=null)?wi(t,s):nr),e=new e(n,l),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Oa,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=l),e}function mf(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Oa.enqueueReplaceState(e,e.state,null)}function Fc(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Ku(t);var l=e.contextType;typeof l=="object"&&l!==null?s.context=Dt(l):(l=bt(e)?Sr:ct.current,s.context=wi(t,l)),s.state=t.memoizedState,l=e.getDerivedStateFromProps,typeof l=="function"&&(Uc(t,e,l,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Oa.enqueueReplaceState(s,s.state,null),ua(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ni(t,e){try{var n="",i=e;do n+=ey(i),i=i.return;while(i);var s=n}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:e,stack:s,digest:null}}function Gl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function qc(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var P_=typeof WeakMap=="function"?WeakMap:Map;function Wp(t,e,n){n=kn(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){pa||(pa=!0,Yc=i),qc(t,e)},n}function Vp(t,e,n){n=kn(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){qc(t,e)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){qc(t,e),typeof i!="function"&&(Xn===null?Xn=new Set([this]):Xn.add(this));var u=e.stack;this.componentDidCatch(e.value,{componentStack:u!==null?u:""})}),n}function pf(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new P_;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=U_.bind(null,t,e,n),e.then(t,t))}function gf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function vf(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=kn(-1,1),e.tag=2,Qn(n,e,1))),n.lanes|=1),t)}var E_=Tn.ReactCurrentOwner,xt=!1;function ht(t,e,n,i){e.child=t===null?bp(e,null,n,i):ji(e,t.child,n,i)}function yf(t,e,n,i,s){n=n.render;var l=e.ref;return yi(e,s),i=ed(t,e,n,i,l,s),n=td(),t!==null&&!xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Cn(t,e,s)):(Oe&&n&&Fu(e),e.flags|=1,ht(t,e,i,s),e.child)}function _f(t,e,n,i,s){if(t===null){var l=n.type;return typeof l=="function"&&!dd(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=l,Gp(t,e,l,i,s)):(t=Go(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(l=t.child,!(t.lanes&s)){var u=l.memoizedProps;if(n=n.compare,n=n!==null?n:Ps,n(u,i)&&t.ref===e.ref)return Cn(t,e,s)}return e.flags|=1,t=er(l,i),t.ref=e.ref,t.return=e,e.child=t}function Gp(t,e,n,i,s){if(t!==null){var l=t.memoizedProps;if(Ps(l,i)&&t.ref===e.ref)if(xt=!1,e.pendingProps=i=l,(t.lanes&s)!==0)t.flags&131072&&(xt=!0);else return e.lanes=t.lanes,Cn(t,e,s)}return Zc(t,e,n,i,s)}function Kp(t,e,n){var i=e.pendingProps,s=i.children,l=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(di,kt),kt|=n;else{if(!(n&1073741824))return t=l!==null?l.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ee(di,kt),kt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=l!==null?l.baseLanes:n,Ee(di,kt),kt|=i}else l!==null?(i=l.baseLanes|n,e.memoizedState=null):i=n,Ee(di,kt),kt|=i;return ht(t,e,s,n),e.child}function Jp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Zc(t,e,n,i,s){var l=bt(n)?Sr:ct.current;return l=wi(e,l),yi(e,s),n=ed(t,e,n,i,l,s),i=td(),t!==null&&!xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Cn(t,e,s)):(Oe&&i&&Fu(e),e.flags|=1,ht(t,e,n,s),e.child)}function xf(t,e,n,i,s){if(bt(n)){var l=!0;sa(e)}else l=!1;if(yi(e,s),e.stateNode===null)Ho(t,e),Hp(e,n,i),Fc(e,n,i,s),i=!0;else if(t===null){var u=e.stateNode,h=e.memoizedProps;u.props=h;var f=u.context,p=n.contextType;typeof p=="object"&&p!==null?p=Dt(p):(p=bt(n)?Sr:ct.current,p=wi(e,p));var v=n.getDerivedStateFromProps,x=typeof v=="function"||typeof u.getSnapshotBeforeUpdate=="function";x||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==i||f!==p)&&mf(e,u,i,p),$n=!1;var b=e.memoizedState;u.state=b,ua(e,i,u,s),f=e.memoizedState,h!==i||b!==f||wt.current||$n?(typeof v=="function"&&(Uc(e,n,v,i),f=e.memoizedState),(h=$n||ff(e,n,h,i,b,f,p))?(x||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(e.flags|=4194308)):(typeof u.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=f),u.props=i,u.state=f,u.context=p,i=h):(typeof u.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{u=e.stateNode,kp(t,e),h=e.memoizedProps,p=e.type===e.elementType?h:Vt(e.type,h),u.props=p,x=e.pendingProps,b=u.context,f=n.contextType,typeof f=="object"&&f!==null?f=Dt(f):(f=bt(n)?Sr:ct.current,f=wi(e,f));var N=n.getDerivedStateFromProps;(v=typeof N=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==x||b!==f)&&mf(e,u,i,f),$n=!1,b=e.memoizedState,u.state=b,ua(e,i,u,s);var k=e.memoizedState;h!==x||b!==k||wt.current||$n?(typeof N=="function"&&(Uc(e,n,N,i),k=e.memoizedState),(p=$n||ff(e,n,p,i,b,k,f)||!1)?(v||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(i,k,f),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(i,k,f)),typeof u.componentDidUpdate=="function"&&(e.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof u.componentDidUpdate!="function"||h===t.memoizedProps&&b===t.memoizedState||(e.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&b===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=k),u.props=i,u.state=k,u.context=f,i=p):(typeof u.componentDidUpdate!="function"||h===t.memoizedProps&&b===t.memoizedState||(e.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&b===t.memoizedState||(e.flags|=1024),i=!1)}return Hc(t,e,n,i,l,s)}function Hc(t,e,n,i,s,l){Jp(t,e);var u=(e.flags&128)!==0;if(!i&&!u)return s&&sf(e,n,!1),Cn(t,e,l);i=e.stateNode,E_.current=e;var h=u&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&u?(e.child=ji(e,t.child,null,l),e.child=ji(e,null,h,l)):ht(t,e,h,l),e.memoizedState=i.state,s&&sf(e,n,!0),e.child}function Qp(t){var e=t.stateNode;e.pendingContext?rf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&rf(t,e.context,!1),Ju(t,e.containerInfo)}function wf(t,e,n,i,s){return bi(),Zu(s),e.flags|=256,ht(t,e,n,i),e.child}var Wc={dehydrated:null,treeContext:null,retryLane:0};function Vc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Xp(t,e,n){var i=e.pendingProps,s=Ie.current,l=!1,u=(e.flags&128)!==0,h;if((h=u)||(h=t!==null&&t.memoizedState===null?!1:(s&2)!==0),h?(l=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ee(Ie,s&1),t===null)return Bc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(u=i.children,t=i.fallback,l?(i=e.mode,l=e.child,u={mode:"hidden",children:u},!(i&1)&&l!==null?(l.childLanes=0,l.pendingProps=u):l=Ma(u,i,0,null),t=Nr(t,i,n,null),l.return=e,t.return=e,l.sibling=t,e.child=l,e.child.memoizedState=Vc(n),e.memoizedState=Wc,t):id(e,u));if(s=t.memoizedState,s!==null&&(h=s.dehydrated,h!==null))return C_(t,e,u,i,h,s,n);if(l){l=i.fallback,u=e.mode,s=t.child,h=s.sibling;var f={mode:"hidden",children:i.children};return!(u&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=f,e.deletions=null):(i=er(s,f),i.subtreeFlags=s.subtreeFlags&14680064),h!==null?l=er(h,l):(l=Nr(l,u,n,null),l.flags|=2),l.return=e,i.return=e,i.sibling=l,e.child=i,i=l,l=e.child,u=t.child.memoizedState,u=u===null?Vc(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},l.memoizedState=u,l.childLanes=t.childLanes&~n,e.memoizedState=Wc,i}return l=t.child,t=l.sibling,i=er(l,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function id(t,e){return e=Ma({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Eo(t,e,n,i){return i!==null&&Zu(i),ji(e,t.child,null,n),t=id(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function C_(t,e,n,i,s,l,u){if(n)return e.flags&256?(e.flags&=-257,i=Gl(Error(q(422))),Eo(t,e,u,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(l=i.fallback,s=e.mode,i=Ma({mode:"visible",children:i.children},s,0,null),l=Nr(l,s,u,null),l.flags|=2,i.return=e,l.return=e,i.sibling=l,e.child=i,e.mode&1&&ji(e,t.child,null,u),e.child.memoizedState=Vc(u),e.memoizedState=Wc,l);if(!(e.mode&1))return Eo(t,e,u,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var h=i.dgst;return i=h,l=Error(q(419)),i=Gl(l,i,void 0),Eo(t,e,u,i)}if(h=(u&t.childLanes)!==0,xt||h){if(i=Ye,i!==null){switch(u&-u){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|u)?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,En(t,s),Xt(i,t,s,-1))}return ud(),i=Gl(Error(q(421))),Eo(t,e,u,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=F_.bind(null,t),s._reactRetry=e,null):(t=l.treeContext,Nt=Jn(s.nextSibling),St=e,Oe=!0,Jt=null,t!==null&&(It[Mt++]=bn,It[Mt++]=jn,It[Mt++]=Pr,bn=t.id,jn=t.overflow,Pr=e),e=id(e,i.children),e.flags|=4096,e)}function bf(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),$c(t.return,e,n)}function Kl(t,e,n,i,s){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=i,l.tail=n,l.tailMode=s)}function Yp(t,e,n){var i=e.pendingProps,s=i.revealOrder,l=i.tail;if(ht(t,e,i.children,n),i=Ie.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&bf(t,n,e);else if(t.tag===19)bf(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Ee(Ie,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&da(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Kl(e,!1,s,n,l);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&da(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Kl(e,!0,n,null,l);break;case"together":Kl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ho(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Cn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Cr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=er(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=er(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function T_(t,e,n){switch(e.tag){case 3:Qp(e),bi();break;case 5:Np(e);break;case 1:bt(e.type)&&sa(e);break;case 4:Ju(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;Ee(la,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ee(Ie,Ie.current&1),e.flags|=128,null):n&e.child.childLanes?Xp(t,e,n):(Ee(Ie,Ie.current&1),t=Cn(t,e,n),t!==null?t.sibling:null);Ee(Ie,Ie.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return Yp(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ee(Ie,Ie.current),i)break;return null;case 22:case 23:return e.lanes=0,Kp(t,e,n)}return Cn(t,e,n)}var eg,Gc,tg,ng;eg=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Gc=function(){};tg=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,br(un.current);var l=null;switch(n){case"input":s=gc(t,s),i=gc(t,i),l=[];break;case"select":s=ze({},s,{value:void 0}),i=ze({},i,{value:void 0}),l=[];break;case"textarea":s=_c(t,s),i=_c(t,i),l=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=ra)}wc(n,i);var u;n=null;for(p in s)if(!i.hasOwnProperty(p)&&s.hasOwnProperty(p)&&s[p]!=null)if(p==="style"){var h=s[p];for(u in h)h.hasOwnProperty(u)&&(n||(n={}),n[u]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(xs.hasOwnProperty(p)?l||(l=[]):(l=l||[]).push(p,null));for(p in i){var f=i[p];if(h=s!=null?s[p]:void 0,i.hasOwnProperty(p)&&f!==h&&(f!=null||h!=null))if(p==="style")if(h){for(u in h)!h.hasOwnProperty(u)||f&&f.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in f)f.hasOwnProperty(u)&&h[u]!==f[u]&&(n||(n={}),n[u]=f[u])}else n||(l||(l=[]),l.push(p,n)),n=f;else p==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,h=h?h.__html:void 0,f!=null&&h!==f&&(l=l||[]).push(p,f)):p==="children"?typeof f!="string"&&typeof f!="number"||(l=l||[]).push(p,""+f):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(xs.hasOwnProperty(p)?(f!=null&&p==="onScroll"&&Te("scroll",t),l||h===f||(l=[])):(l=l||[]).push(p,f))}n&&(l=l||[]).push("style",n);var p=l;(e.updateQueue=p)&&(e.flags|=4)}};ng=function(t,e,n,i){n!==i&&(e.flags|=4)};function Yi(t,e){if(!Oe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function at(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function L_(t,e,n){var i=e.pendingProps;switch(qu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(e),null;case 1:return bt(e.type)&&ia(),at(e),null;case 3:return i=e.stateNode,ki(),Le(wt),Le(ct),Xu(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(So(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jt!==null&&(nu(Jt),Jt=null))),Gc(t,e),at(e),null;case 5:Qu(e);var s=br(Os.current);if(n=e.type,t!==null&&e.stateNode!=null)tg(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(q(166));return at(e),null}if(t=br(un.current),So(e)){i=e.stateNode,n=e.type;var l=e.memoizedProps;switch(i[ln]=e,i[Ts]=l,t=(e.mode&1)!==0,n){case"dialog":Te("cancel",i),Te("close",i);break;case"iframe":case"object":case"embed":Te("load",i);break;case"video":case"audio":for(s=0;s<ss.length;s++)Te(ss[s],i);break;case"source":Te("error",i);break;case"img":case"image":case"link":Te("error",i),Te("load",i);break;case"details":Te("toggle",i);break;case"input":Th(i,l),Te("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!l.multiple},Te("invalid",i);break;case"textarea":Oh(i,l),Te("invalid",i)}wc(n,l),s=null;for(var u in l)if(l.hasOwnProperty(u)){var h=l[u];u==="children"?typeof h=="string"?i.textContent!==h&&(l.suppressHydrationWarning!==!0&&No(i.textContent,h,t),s=["children",h]):typeof h=="number"&&i.textContent!==""+h&&(l.suppressHydrationWarning!==!0&&No(i.textContent,h,t),s=["children",""+h]):xs.hasOwnProperty(u)&&h!=null&&u==="onScroll"&&Te("scroll",i)}switch(n){case"input":vo(i),Lh(i,l,!0);break;case"textarea":vo(i),Ah(i);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(i.onclick=ra)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{u=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Tm(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=u.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=u.createElement(n,{is:i.is}):(t=u.createElement(n),n==="select"&&(u=t,i.multiple?u.multiple=!0:i.size&&(u.size=i.size))):t=u.createElementNS(t,n),t[ln]=e,t[Ts]=i,eg(t,e,!1,!1),e.stateNode=t;e:{switch(u=bc(n,i),n){case"dialog":Te("cancel",t),Te("close",t),s=i;break;case"iframe":case"object":case"embed":Te("load",t),s=i;break;case"video":case"audio":for(s=0;s<ss.length;s++)Te(ss[s],t);s=i;break;case"source":Te("error",t),s=i;break;case"img":case"image":case"link":Te("error",t),Te("load",t),s=i;break;case"details":Te("toggle",t),s=i;break;case"input":Th(t,i),s=gc(t,i),Te("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=ze({},i,{value:void 0}),Te("invalid",t);break;case"textarea":Oh(t,i),s=_c(t,i),Te("invalid",t);break;default:s=i}wc(n,s),h=s;for(l in h)if(h.hasOwnProperty(l)){var f=h[l];l==="style"?Am(t,f):l==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&Lm(t,f)):l==="children"?typeof f=="string"?(n!=="textarea"||f!=="")&&ws(t,f):typeof f=="number"&&ws(t,""+f):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(xs.hasOwnProperty(l)?f!=null&&l==="onScroll"&&Te("scroll",t):f!=null&&Eu(t,l,f,u))}switch(n){case"input":vo(t),Lh(t,i,!1);break;case"textarea":vo(t),Ah(t);break;case"option":i.value!=null&&t.setAttribute("value",""+tr(i.value));break;case"select":t.multiple=!!i.multiple,l=i.value,l!=null?mi(t,!!i.multiple,l,!1):i.defaultValue!=null&&mi(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ra)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return at(e),null;case 6:if(t&&e.stateNode!=null)ng(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(q(166));if(n=br(Os.current),br(un.current),So(e)){if(i=e.stateNode,n=e.memoizedProps,i[ln]=e,(l=i.nodeValue!==n)&&(t=St,t!==null))switch(t.tag){case 3:No(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&No(i.nodeValue,n,(t.mode&1)!==0)}l&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[ln]=e,e.stateNode=i}return at(e),null;case 13:if(Le(Ie),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Oe&&Nt!==null&&e.mode&1&&!(e.flags&128))xp(),bi(),e.flags|=98560,l=!1;else if(l=So(e),i!==null&&i.dehydrated!==null){if(t===null){if(!l)throw Error(q(318));if(l=e.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(q(317));l[ln]=e}else bi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;at(e),l=!1}else Jt!==null&&(nu(Jt),Jt=null),l=!0;if(!l)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ie.current&1?Je===0&&(Je=3):ud())),e.updateQueue!==null&&(e.flags|=4),at(e),null);case 4:return ki(),Gc(t,e),t===null&&Es(e.stateNode.containerInfo),at(e),null;case 10:return Vu(e.type._context),at(e),null;case 17:return bt(e.type)&&ia(),at(e),null;case 19:if(Le(Ie),l=e.memoizedState,l===null)return at(e),null;if(i=(e.flags&128)!==0,u=l.rendering,u===null)if(i)Yi(l,!1);else{if(Je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(u=da(t),u!==null){for(e.flags|=128,Yi(l,!1),i=u.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)l=n,t=i,l.flags&=14680066,u=l.alternate,u===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=u.childLanes,l.lanes=u.lanes,l.child=u.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=u.memoizedProps,l.memoizedState=u.memoizedState,l.updateQueue=u.updateQueue,l.type=u.type,t=u.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ee(Ie,Ie.current&1|2),e.child}t=t.sibling}l.tail!==null&&Fe()>Si&&(e.flags|=128,i=!0,Yi(l,!1),e.lanes=4194304)}else{if(!i)if(t=da(u),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Yi(l,!0),l.tail===null&&l.tailMode==="hidden"&&!u.alternate&&!Oe)return at(e),null}else 2*Fe()-l.renderingStartTime>Si&&n!==1073741824&&(e.flags|=128,i=!0,Yi(l,!1),e.lanes=4194304);l.isBackwards?(u.sibling=e.child,e.child=u):(n=l.last,n!==null?n.sibling=u:e.child=u,l.last=u)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Fe(),e.sibling=null,n=Ie.current,Ee(Ie,i?n&1|2:n&1),e):(at(e),null);case 22:case 23:return cd(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?kt&1073741824&&(at(e),e.subtreeFlags&6&&(e.flags|=8192)):at(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function O_(t,e){switch(qu(e),e.tag){case 1:return bt(e.type)&&ia(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ki(),Le(wt),Le(ct),Xu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Qu(e),null;case 13:if(Le(Ie),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));bi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Le(Ie),null;case 4:return ki(),null;case 10:return Vu(e.type._context),null;case 22:case 23:return cd(),null;case 24:return null;default:return null}}var Co=!1,lt=!1,A_=typeof WeakSet=="function"?WeakSet:Set,X=null;function ui(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Be(t,e,i)}else n.current=null}function Kc(t,e,n){try{n()}catch(i){Be(t,e,i)}}var jf=!1;function I_(t,e){if(Oc=ea,t=ap(),Uu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,l=i.focusNode;i=i.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var u=0,h=-1,f=-1,p=0,v=0,x=t,b=null;t:for(;;){for(var N;x!==n||s!==0&&x.nodeType!==3||(h=u+s),x!==l||i!==0&&x.nodeType!==3||(f=u+i),x.nodeType===3&&(u+=x.nodeValue.length),(N=x.firstChild)!==null;)b=x,x=N;for(;;){if(x===t)break t;if(b===n&&++p===s&&(h=u),b===l&&++v===i&&(f=u),(N=x.nextSibling)!==null)break;x=b,b=x.parentNode}x=N}n=h===-1||f===-1?null:{start:h,end:f}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ac={focusedElem:t,selectionRange:n},ea=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var S=k.memoizedProps,O=k.memoizedState,g=e.stateNode,_=g.getSnapshotBeforeUpdate(e.elementType===e.type?S:Vt(e.type,S),O);g.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(C){Be(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return k=jf,jf=!1,k}function fs(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var l=s.destroy;s.destroy=void 0,l!==void 0&&Kc(e,n,l)}s=s.next}while(s!==i)}}function Aa(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Jc(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function rg(t){var e=t.alternate;e!==null&&(t.alternate=null,rg(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ln],delete e[Ts],delete e[zc],delete e[g_],delete e[v_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ig(t){return t.tag===5||t.tag===3||t.tag===4}function kf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ig(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qc(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ra));else if(i!==4&&(t=t.child,t!==null))for(Qc(t,e,n),t=t.sibling;t!==null;)Qc(t,e,n),t=t.sibling}function Xc(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Xc(t,e,n),t=t.sibling;t!==null;)Xc(t,e,n),t=t.sibling}var tt=null,Gt=!1;function zn(t,e,n){for(n=n.child;n!==null;)sg(t,e,n),n=n.sibling}function sg(t,e,n){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(Na,n)}catch{}switch(n.tag){case 5:lt||ui(n,e);case 6:var i=tt,s=Gt;tt=null,zn(t,e,n),tt=i,Gt=s,tt!==null&&(Gt?(t=tt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):tt.removeChild(n.stateNode));break;case 18:tt!==null&&(Gt?(t=tt,n=n.stateNode,t.nodeType===8?Fl(t.parentNode,n):t.nodeType===1&&Fl(t,n),Ns(t)):Fl(tt,n.stateNode));break;case 4:i=tt,s=Gt,tt=n.stateNode.containerInfo,Gt=!0,zn(t,e,n),tt=i,Gt=s;break;case 0:case 11:case 14:case 15:if(!lt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var l=s,u=l.destroy;l=l.tag,u!==void 0&&(l&2||l&4)&&Kc(n,e,u),s=s.next}while(s!==i)}zn(t,e,n);break;case 1:if(!lt&&(ui(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(h){Be(n,e,h)}zn(t,e,n);break;case 21:zn(t,e,n);break;case 22:n.mode&1?(lt=(i=lt)||n.memoizedState!==null,zn(t,e,n),lt=i):zn(t,e,n);break;default:zn(t,e,n)}}function Nf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new A_),e.forEach(function(i){var s=q_.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function Ht(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var l=t,u=e,h=u;e:for(;h!==null;){switch(h.tag){case 5:tt=h.stateNode,Gt=!1;break e;case 3:tt=h.stateNode.containerInfo,Gt=!0;break e;case 4:tt=h.stateNode.containerInfo,Gt=!0;break e}h=h.return}if(tt===null)throw Error(q(160));sg(l,u,s),tt=null,Gt=!1;var f=s.alternate;f!==null&&(f.return=null),s.return=null}catch(p){Be(s,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)og(e,t),e=e.sibling}function og(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ht(e,t),sn(t),i&4){try{fs(3,t,t.return),Aa(3,t)}catch(S){Be(t,t.return,S)}try{fs(5,t,t.return)}catch(S){Be(t,t.return,S)}}break;case 1:Ht(e,t),sn(t),i&512&&n!==null&&ui(n,n.return);break;case 5:if(Ht(e,t),sn(t),i&512&&n!==null&&ui(n,n.return),t.flags&32){var s=t.stateNode;try{ws(s,"")}catch(S){Be(t,t.return,S)}}if(i&4&&(s=t.stateNode,s!=null)){var l=t.memoizedProps,u=n!==null?n.memoizedProps:l,h=t.type,f=t.updateQueue;if(t.updateQueue=null,f!==null)try{h==="input"&&l.type==="radio"&&l.name!=null&&Em(s,l),bc(h,u);var p=bc(h,l);for(u=0;u<f.length;u+=2){var v=f[u],x=f[u+1];v==="style"?Am(s,x):v==="dangerouslySetInnerHTML"?Lm(s,x):v==="children"?ws(s,x):Eu(s,v,x,p)}switch(h){case"input":vc(s,l);break;case"textarea":Cm(s,l);break;case"select":var b=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var N=l.value;N!=null?mi(s,!!l.multiple,N,!1):b!==!!l.multiple&&(l.defaultValue!=null?mi(s,!!l.multiple,l.defaultValue,!0):mi(s,!!l.multiple,l.multiple?[]:"",!1))}s[Ts]=l}catch(S){Be(t,t.return,S)}}break;case 6:if(Ht(e,t),sn(t),i&4){if(t.stateNode===null)throw Error(q(162));s=t.stateNode,l=t.memoizedProps;try{s.nodeValue=l}catch(S){Be(t,t.return,S)}}break;case 3:if(Ht(e,t),sn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ns(e.containerInfo)}catch(S){Be(t,t.return,S)}break;case 4:Ht(e,t),sn(t);break;case 13:Ht(e,t),sn(t),s=t.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||(ad=Fe())),i&4&&Nf(t);break;case 22:if(v=n!==null&&n.memoizedState!==null,t.mode&1?(lt=(p=lt)||v,Ht(e,t),lt=p):Ht(e,t),sn(t),i&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!v&&t.mode&1)for(X=t,v=t.child;v!==null;){for(x=X=v;X!==null;){switch(b=X,N=b.child,b.tag){case 0:case 11:case 14:case 15:fs(4,b,b.return);break;case 1:ui(b,b.return);var k=b.stateNode;if(typeof k.componentWillUnmount=="function"){i=b,n=b.return;try{e=i,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(S){Be(i,n,S)}}break;case 5:ui(b,b.return);break;case 22:if(b.memoizedState!==null){Pf(x);continue}}N!==null?(N.return=b,X=N):Pf(x)}v=v.sibling}e:for(v=null,x=t;;){if(x.tag===5){if(v===null){v=x;try{s=x.stateNode,p?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(h=x.stateNode,f=x.memoizedProps.style,u=f!=null&&f.hasOwnProperty("display")?f.display:null,h.style.display=Om("display",u))}catch(S){Be(t,t.return,S)}}}else if(x.tag===6){if(v===null)try{x.stateNode.nodeValue=p?"":x.memoizedProps}catch(S){Be(t,t.return,S)}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===t)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===t)break e;for(;x.sibling===null;){if(x.return===null||x.return===t)break e;v===x&&(v=null),x=x.return}v===x&&(v=null),x.sibling.return=x.return,x=x.sibling}}break;case 19:Ht(e,t),sn(t),i&4&&Nf(t);break;case 21:break;default:Ht(e,t),sn(t)}}function sn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ig(n)){var i=n;break e}n=n.return}throw Error(q(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(ws(s,""),i.flags&=-33);var l=kf(t);Xc(t,l,s);break;case 3:case 4:var u=i.stateNode.containerInfo,h=kf(t);Qc(t,h,u);break;default:throw Error(q(161))}}catch(f){Be(t,t.return,f)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function M_(t,e,n){X=t,ag(t)}function ag(t,e,n){for(var i=(t.mode&1)!==0;X!==null;){var s=X,l=s.child;if(s.tag===22&&i){var u=s.memoizedState!==null||Co;if(!u){var h=s.alternate,f=h!==null&&h.memoizedState!==null||lt;h=Co;var p=lt;if(Co=u,(lt=f)&&!p)for(X=s;X!==null;)u=X,f=u.child,u.tag===22&&u.memoizedState!==null?Ef(s):f!==null?(f.return=u,X=f):Ef(s);for(;l!==null;)X=l,ag(l),l=l.sibling;X=s,Co=h,lt=p}Sf(t)}else s.subtreeFlags&8772&&l!==null?(l.return=s,X=l):Sf(t)}}function Sf(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:lt||Aa(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!lt)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Vt(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var l=e.updateQueue;l!==null&&uf(e,l,i);break;case 3:var u=e.updateQueue;if(u!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}uf(e,u,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var f=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&n.focus();break;case"img":f.src&&(n.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var v=p.memoizedState;if(v!==null){var x=v.dehydrated;x!==null&&Ns(x)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}lt||e.flags&512&&Jc(e)}catch(b){Be(e,e.return,b)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function Pf(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function Ef(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Aa(4,e)}catch(f){Be(e,n,f)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(f){Be(e,s,f)}}var l=e.return;try{Jc(e)}catch(f){Be(e,l,f)}break;case 5:var u=e.return;try{Jc(e)}catch(f){Be(e,u,f)}}}catch(f){Be(e,e.return,f)}if(e===t){X=null;break}var h=e.sibling;if(h!==null){h.return=e.return,X=h;break}X=e.return}}var z_=Math.ceil,ma=Tn.ReactCurrentDispatcher,sd=Tn.ReactCurrentOwner,Rt=Tn.ReactCurrentBatchConfig,xe=0,Ye=null,We=null,it=0,kt=0,di=ir(0),Je=0,zs=null,Cr=0,Ia=0,od=0,ms=null,yt=null,ad=0,Si=1/0,_n=null,pa=!1,Yc=null,Xn=null,To=!1,Wn=null,ga=0,ps=0,eu=null,Wo=-1,Vo=0;function ft(){return xe&6?Fe():Wo!==-1?Wo:Wo=Fe()}function Yn(t){return t.mode&1?xe&2&&it!==0?it&-it:__.transition!==null?(Vo===0&&(Vo=Hm()),Vo):(t=ke,t!==0||(t=window.event,t=t===void 0?16:Xm(t.type)),t):1}function Xt(t,e,n,i){if(50<ps)throw ps=0,eu=null,Error(q(185));Us(t,n,i),(!(xe&2)||t!==Ye)&&(t===Ye&&(!(xe&2)&&(Ia|=n),Je===4&&qn(t,it)),jt(t,i),n===1&&xe===0&&!(e.mode&1)&&(Si=Fe()+500,Ta&&sr()))}function jt(t,e){var n=t.callbackNode;_y(t,e);var i=Yo(t,t===Ye?it:0);if(i===0)n!==null&&zh(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&zh(n),e===1)t.tag===0?y_(Cf.bind(null,t)):vp(Cf.bind(null,t)),m_(function(){!(xe&6)&&sr()}),n=null;else{switch(Wm(i)){case 1:n=Au;break;case 4:n=qm;break;case 16:n=Xo;break;case 536870912:n=Zm;break;default:n=Xo}n=pg(n,lg.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function lg(t,e){if(Wo=-1,Vo=0,xe&6)throw Error(q(327));var n=t.callbackNode;if(_i()&&t.callbackNode!==n)return null;var i=Yo(t,t===Ye?it:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=va(t,i);else{e=i;var s=xe;xe|=2;var l=ug();(Ye!==t||it!==e)&&(_n=null,Si=Fe()+500,kr(t,e));do try{B_();break}catch(h){cg(t,h)}while(!0);Wu(),ma.current=l,xe=s,We!==null?e=0:(Ye=null,it=0,e=Je)}if(e!==0){if(e===2&&(s=Pc(t),s!==0&&(i=s,e=tu(t,s))),e===1)throw n=zs,kr(t,0),qn(t,i),jt(t,Fe()),n;if(e===6)qn(t,i);else{if(s=t.current.alternate,!(i&30)&&!R_(s)&&(e=va(t,i),e===2&&(l=Pc(t),l!==0&&(i=l,e=tu(t,l))),e===1))throw n=zs,kr(t,0),qn(t,i),jt(t,Fe()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(q(345));case 2:vr(t,yt,_n);break;case 3:if(qn(t,i),(i&130023424)===i&&(e=ad+500-Fe(),10<e)){if(Yo(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){ft(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Mc(vr.bind(null,t,yt,_n),e);break}vr(t,yt,_n);break;case 4:if(qn(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var u=31-Qt(i);l=1<<u,u=e[u],u>s&&(s=u),i&=~l}if(i=s,i=Fe()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*z_(i/1960))-i,10<i){t.timeoutHandle=Mc(vr.bind(null,t,yt,_n),i);break}vr(t,yt,_n);break;case 5:vr(t,yt,_n);break;default:throw Error(q(329))}}}return jt(t,Fe()),t.callbackNode===n?lg.bind(null,t):null}function tu(t,e){var n=ms;return t.current.memoizedState.isDehydrated&&(kr(t,e).flags|=256),t=va(t,e),t!==2&&(e=yt,yt=n,e!==null&&nu(e)),t}function nu(t){yt===null?yt=t:yt.push.apply(yt,t)}function R_(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],l=s.getSnapshot;s=s.value;try{if(!Yt(l(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function qn(t,e){for(e&=~od,e&=~Ia,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Qt(e),i=1<<n;t[n]=-1,e&=~i}}function Cf(t){if(xe&6)throw Error(q(327));_i();var e=Yo(t,0);if(!(e&1))return jt(t,Fe()),null;var n=va(t,e);if(t.tag!==0&&n===2){var i=Pc(t);i!==0&&(e=i,n=tu(t,i))}if(n===1)throw n=zs,kr(t,0),qn(t,e),jt(t,Fe()),n;if(n===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,vr(t,yt,_n),jt(t,Fe()),null}function ld(t,e){var n=xe;xe|=1;try{return t(e)}finally{xe=n,xe===0&&(Si=Fe()+500,Ta&&sr())}}function Tr(t){Wn!==null&&Wn.tag===0&&!(xe&6)&&_i();var e=xe;xe|=1;var n=Rt.transition,i=ke;try{if(Rt.transition=null,ke=1,t)return t()}finally{ke=i,Rt.transition=n,xe=e,!(xe&6)&&sr()}}function cd(){kt=di.current,Le(di)}function kr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,f_(n)),We!==null)for(n=We.return;n!==null;){var i=n;switch(qu(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&ia();break;case 3:ki(),Le(wt),Le(ct),Xu();break;case 5:Qu(i);break;case 4:ki();break;case 13:Le(Ie);break;case 19:Le(Ie);break;case 10:Vu(i.type._context);break;case 22:case 23:cd()}n=n.return}if(Ye=t,We=t=er(t.current,null),it=kt=e,Je=0,zs=null,od=Ia=Cr=0,yt=ms=null,wr!==null){for(e=0;e<wr.length;e++)if(n=wr[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,l=n.pending;if(l!==null){var u=l.next;l.next=s,i.next=u}n.pending=i}wr=null}return t}function cg(t,e){do{var n=We;try{if(Wu(),qo.current=fa,ha){for(var i=Me.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}ha=!1}if(Er=0,Xe=Ke=Me=null,hs=!1,As=0,sd.current=null,n===null||n.return===null){Je=1,zs=e,We=null;break}e:{var l=t,u=n.return,h=n,f=e;if(e=it,h.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var p=f,v=h,x=v.tag;if(!(v.mode&1)&&(x===0||x===11||x===15)){var b=v.alternate;b?(v.updateQueue=b.updateQueue,v.memoizedState=b.memoizedState,v.lanes=b.lanes):(v.updateQueue=null,v.memoizedState=null)}var N=gf(u);if(N!==null){N.flags&=-257,vf(N,u,h,l,e),N.mode&1&&pf(l,p,e),e=N,f=p;var k=e.updateQueue;if(k===null){var S=new Set;S.add(f),e.updateQueue=S}else k.add(f);break e}else{if(!(e&1)){pf(l,p,e),ud();break e}f=Error(q(426))}}else if(Oe&&h.mode&1){var O=gf(u);if(O!==null){!(O.flags&65536)&&(O.flags|=256),vf(O,u,h,l,e),Zu(Ni(f,h));break e}}l=f=Ni(f,h),Je!==4&&(Je=2),ms===null?ms=[l]:ms.push(l),l=u;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e;var g=Wp(l,f,e);cf(l,g);break e;case 1:h=f;var _=l.type,w=l.stateNode;if(!(l.flags&128)&&(typeof _.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Xn===null||!Xn.has(w)))){l.flags|=65536,e&=-e,l.lanes|=e;var C=Vp(l,h,e);cf(l,C);break e}}l=l.return}while(l!==null)}hg(n)}catch(T){e=T,We===n&&n!==null&&(We=n=n.return);continue}break}while(!0)}function ug(){var t=ma.current;return ma.current=fa,t===null?fa:t}function ud(){(Je===0||Je===3||Je===2)&&(Je=4),Ye===null||!(Cr&268435455)&&!(Ia&268435455)||qn(Ye,it)}function va(t,e){var n=xe;xe|=2;var i=ug();(Ye!==t||it!==e)&&(_n=null,kr(t,e));do try{D_();break}catch(s){cg(t,s)}while(!0);if(Wu(),xe=n,ma.current=i,We!==null)throw Error(q(261));return Ye=null,it=0,Je}function D_(){for(;We!==null;)dg(We)}function B_(){for(;We!==null&&!uy();)dg(We)}function dg(t){var e=mg(t.alternate,t,kt);t.memoizedProps=t.pendingProps,e===null?hg(t):We=e,sd.current=null}function hg(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=O_(n,e),n!==null){n.flags&=32767,We=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Je=6,We=null;return}}else if(n=L_(n,e,kt),n!==null){We=n;return}if(e=e.sibling,e!==null){We=e;return}We=e=t}while(e!==null);Je===0&&(Je=5)}function vr(t,e,n){var i=ke,s=Rt.transition;try{Rt.transition=null,ke=1,$_(t,e,n,i)}finally{Rt.transition=s,ke=i}return null}function $_(t,e,n,i){do _i();while(Wn!==null);if(xe&6)throw Error(q(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var l=n.lanes|n.childLanes;if(xy(t,l),t===Ye&&(We=Ye=null,it=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||To||(To=!0,pg(Xo,function(){return _i(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Rt.transition,Rt.transition=null;var u=ke;ke=1;var h=xe;xe|=4,sd.current=null,I_(t,n),og(n,t),o_(Ac),ea=!!Oc,Ac=Oc=null,t.current=n,M_(n),dy(),xe=h,ke=u,Rt.transition=l}else t.current=n;if(To&&(To=!1,Wn=t,ga=s),l=t.pendingLanes,l===0&&(Xn=null),my(n.stateNode),jt(t,Fe()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(pa)throw pa=!1,t=Yc,Yc=null,t;return ga&1&&t.tag!==0&&_i(),l=t.pendingLanes,l&1?t===eu?ps++:(ps=0,eu=t):ps=0,sr(),null}function _i(){if(Wn!==null){var t=Wm(ga),e=Rt.transition,n=ke;try{if(Rt.transition=null,ke=16>t?16:t,Wn===null)var i=!1;else{if(t=Wn,Wn=null,ga=0,xe&6)throw Error(q(331));var s=xe;for(xe|=4,X=t.current;X!==null;){var l=X,u=l.child;if(X.flags&16){var h=l.deletions;if(h!==null){for(var f=0;f<h.length;f++){var p=h[f];for(X=p;X!==null;){var v=X;switch(v.tag){case 0:case 11:case 15:fs(8,v,l)}var x=v.child;if(x!==null)x.return=v,X=x;else for(;X!==null;){v=X;var b=v.sibling,N=v.return;if(rg(v),v===p){X=null;break}if(b!==null){b.return=N,X=b;break}X=N}}}var k=l.alternate;if(k!==null){var S=k.child;if(S!==null){k.child=null;do{var O=S.sibling;S.sibling=null,S=O}while(S!==null)}}X=l}}if(l.subtreeFlags&2064&&u!==null)u.return=l,X=u;else e:for(;X!==null;){if(l=X,l.flags&2048)switch(l.tag){case 0:case 11:case 15:fs(9,l,l.return)}var g=l.sibling;if(g!==null){g.return=l.return,X=g;break e}X=l.return}}var _=t.current;for(X=_;X!==null;){u=X;var w=u.child;if(u.subtreeFlags&2064&&w!==null)w.return=u,X=w;else e:for(u=_;X!==null;){if(h=X,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Aa(9,h)}}catch(T){Be(h,h.return,T)}if(h===u){X=null;break e}var C=h.sibling;if(C!==null){C.return=h.return,X=C;break e}X=h.return}}if(xe=s,sr(),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(Na,t)}catch{}i=!0}return i}finally{ke=n,Rt.transition=e}}return!1}function Tf(t,e,n){e=Ni(n,e),e=Wp(t,e,1),t=Qn(t,e,1),e=ft(),t!==null&&(Us(t,1,e),jt(t,e))}function Be(t,e,n){if(t.tag===3)Tf(t,t,n);else for(;e!==null;){if(e.tag===3){Tf(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Xn===null||!Xn.has(i))){t=Ni(n,t),t=Vp(e,t,1),e=Qn(e,t,1),t=ft(),e!==null&&(Us(e,1,t),jt(e,t));break}}e=e.return}}function U_(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=ft(),t.pingedLanes|=t.suspendedLanes&n,Ye===t&&(it&n)===n&&(Je===4||Je===3&&(it&130023424)===it&&500>Fe()-ad?kr(t,0):od|=n),jt(t,e)}function fg(t,e){e===0&&(t.mode&1?(e=xo,xo<<=1,!(xo&130023424)&&(xo=4194304)):e=1);var n=ft();t=En(t,e),t!==null&&(Us(t,e,n),jt(t,n))}function F_(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),fg(t,n)}function q_(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(q(314))}i!==null&&i.delete(e),fg(t,n)}var mg;mg=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||wt.current)xt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return xt=!1,T_(t,e,n);xt=!!(t.flags&131072)}else xt=!1,Oe&&e.flags&1048576&&yp(e,aa,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Ho(t,e),t=e.pendingProps;var s=wi(e,ct.current);yi(e,n),s=ed(null,e,i,t,s,n);var l=td();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,bt(i)?(l=!0,sa(e)):l=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ku(e),s.updater=Oa,e.stateNode=s,s._reactInternals=e,Fc(e,i,t,n),e=Hc(null,e,i,!0,l,n)):(e.tag=0,Oe&&l&&Fu(e),ht(null,e,s,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Ho(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=H_(i),t=Vt(i,t),s){case 0:e=Zc(null,e,i,t,n);break e;case 1:e=xf(null,e,i,t,n);break e;case 11:e=yf(null,e,i,t,n);break e;case 14:e=_f(null,e,i,Vt(i.type,t),n);break e}throw Error(q(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Vt(i,s),Zc(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Vt(i,s),xf(t,e,i,s,n);case 3:e:{if(Qp(e),t===null)throw Error(q(387));i=e.pendingProps,l=e.memoizedState,s=l.element,kp(t,e),ua(e,i,null,n);var u=e.memoizedState;if(i=u.element,l.isDehydrated)if(l={element:i,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},e.updateQueue.baseState=l,e.memoizedState=l,e.flags&256){s=Ni(Error(q(423)),e),e=wf(t,e,i,n,s);break e}else if(i!==s){s=Ni(Error(q(424)),e),e=wf(t,e,i,n,s);break e}else for(Nt=Jn(e.stateNode.containerInfo.firstChild),St=e,Oe=!0,Jt=null,n=bp(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(bi(),i===s){e=Cn(t,e,n);break e}ht(t,e,i,n)}e=e.child}return e;case 5:return Np(e),t===null&&Bc(e),i=e.type,s=e.pendingProps,l=t!==null?t.memoizedProps:null,u=s.children,Ic(i,s)?u=null:l!==null&&Ic(i,l)&&(e.flags|=32),Jp(t,e),ht(t,e,u,n),e.child;case 6:return t===null&&Bc(e),null;case 13:return Xp(t,e,n);case 4:return Ju(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=ji(e,null,i,n):ht(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Vt(i,s),yf(t,e,i,s,n);case 7:return ht(t,e,e.pendingProps,n),e.child;case 8:return ht(t,e,e.pendingProps.children,n),e.child;case 12:return ht(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,l=e.memoizedProps,u=s.value,Ee(la,i._currentValue),i._currentValue=u,l!==null)if(Yt(l.value,u)){if(l.children===s.children&&!wt.current){e=Cn(t,e,n);break e}}else for(l=e.child,l!==null&&(l.return=e);l!==null;){var h=l.dependencies;if(h!==null){u=l.child;for(var f=h.firstContext;f!==null;){if(f.context===i){if(l.tag===1){f=kn(-1,n&-n),f.tag=2;var p=l.updateQueue;if(p!==null){p=p.shared;var v=p.pending;v===null?f.next=f:(f.next=v.next,v.next=f),p.pending=f}}l.lanes|=n,f=l.alternate,f!==null&&(f.lanes|=n),$c(l.return,n,e),h.lanes|=n;break}f=f.next}}else if(l.tag===10)u=l.type===e.type?null:l.child;else if(l.tag===18){if(u=l.return,u===null)throw Error(q(341));u.lanes|=n,h=u.alternate,h!==null&&(h.lanes|=n),$c(u,n,e),u=l.sibling}else u=l.child;if(u!==null)u.return=l;else for(u=l;u!==null;){if(u===e){u=null;break}if(l=u.sibling,l!==null){l.return=u.return,u=l;break}u=u.return}l=u}ht(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,yi(e,n),s=Dt(s),i=i(s),e.flags|=1,ht(t,e,i,n),e.child;case 14:return i=e.type,s=Vt(i,e.pendingProps),s=Vt(i.type,s),_f(t,e,i,s,n);case 15:return Gp(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Vt(i,s),Ho(t,e),e.tag=1,bt(i)?(t=!0,sa(e)):t=!1,yi(e,n),Hp(e,i,s),Fc(e,i,s,n),Hc(null,e,i,!0,t,n);case 19:return Yp(t,e,n);case 22:return Kp(t,e,n)}throw Error(q(156,e.tag))};function pg(t,e){return Fm(t,e)}function Z_(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zt(t,e,n,i){return new Z_(t,e,n,i)}function dd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function H_(t){if(typeof t=="function")return dd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Tu)return 11;if(t===Lu)return 14}return 2}function er(t,e){var n=t.alternate;return n===null?(n=zt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Go(t,e,n,i,s,l){var u=2;if(i=t,typeof t=="function")dd(t)&&(u=1);else if(typeof t=="string")u=5;else e:switch(t){case ti:return Nr(n.children,s,l,e);case Cu:u=8,s|=8;break;case hc:return t=zt(12,n,e,s|2),t.elementType=hc,t.lanes=l,t;case fc:return t=zt(13,n,e,s),t.elementType=fc,t.lanes=l,t;case mc:return t=zt(19,n,e,s),t.elementType=mc,t.lanes=l,t;case Nm:return Ma(n,s,l,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case jm:u=10;break e;case km:u=9;break e;case Tu:u=11;break e;case Lu:u=14;break e;case Bn:u=16,i=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=zt(u,n,e,s),e.elementType=t,e.type=i,e.lanes=l,e}function Nr(t,e,n,i){return t=zt(7,t,i,e),t.lanes=n,t}function Ma(t,e,n,i){return t=zt(22,t,i,e),t.elementType=Nm,t.lanes=n,t.stateNode={isHidden:!1},t}function Jl(t,e,n){return t=zt(6,t,null,e),t.lanes=n,t}function Ql(t,e,n){return e=zt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function W_(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ll(0),this.expirationTimes=Ll(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ll(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function hd(t,e,n,i,s,l,u,h,f){return t=new W_(t,e,n,h,f),e===1?(e=1,l===!0&&(e|=8)):e=0,l=zt(3,null,null,e),t.current=l,l.stateNode=t,l.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ku(l),t}function V_(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ei,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function gg(t){if(!t)return nr;t=t._reactInternals;e:{if(Ar(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(bt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var n=t.type;if(bt(n))return gp(t,n,e)}return e}function vg(t,e,n,i,s,l,u,h,f){return t=hd(n,i,!0,t,s,l,u,h,f),t.context=gg(null),n=t.current,i=ft(),s=Yn(n),l=kn(i,s),l.callback=e??null,Qn(n,l,s),t.current.lanes=s,Us(t,s,i),jt(t,i),t}function za(t,e,n,i){var s=e.current,l=ft(),u=Yn(s);return n=gg(n),e.context===null?e.context=n:e.pendingContext=n,e=kn(l,u),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Qn(s,e,u),t!==null&&(Xt(t,s,u,l),Fo(t,s,u)),u}function ya(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Lf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function fd(t,e){Lf(t,e),(t=t.alternate)&&Lf(t,e)}function G_(){return null}var yg=typeof reportError=="function"?reportError:function(t){console.error(t)};function md(t){this._internalRoot=t}Ra.prototype.render=md.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));za(t,e,null,null)};Ra.prototype.unmount=md.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Tr(function(){za(null,t,null,null)}),e[Pn]=null}};function Ra(t){this._internalRoot=t}Ra.prototype.unstable_scheduleHydration=function(t){if(t){var e=Km();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Fn.length&&e!==0&&e<Fn[n].priority;n++);Fn.splice(n,0,t),n===0&&Qm(t)}};function pd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Da(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Of(){}function K_(t,e,n,i,s){if(s){if(typeof i=="function"){var l=i;i=function(){var p=ya(u);l.call(p)}}var u=vg(e,i,t,0,null,!1,!1,"",Of);return t._reactRootContainer=u,t[Pn]=u.current,Es(t.nodeType===8?t.parentNode:t),Tr(),u}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var h=i;i=function(){var p=ya(f);h.call(p)}}var f=hd(t,0,!1,null,null,!1,!1,"",Of);return t._reactRootContainer=f,t[Pn]=f.current,Es(t.nodeType===8?t.parentNode:t),Tr(function(){za(e,f,n,i)}),f}function Ba(t,e,n,i,s){var l=n._reactRootContainer;if(l){var u=l;if(typeof s=="function"){var h=s;s=function(){var f=ya(u);h.call(f)}}za(e,u,t,s)}else u=K_(n,e,t,s,i);return ya(u)}Vm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=is(e.pendingLanes);n!==0&&(Iu(e,n|1),jt(e,Fe()),!(xe&6)&&(Si=Fe()+500,sr()))}break;case 13:Tr(function(){var i=En(t,1);if(i!==null){var s=ft();Xt(i,t,1,s)}}),fd(t,1)}};Mu=function(t){if(t.tag===13){var e=En(t,134217728);if(e!==null){var n=ft();Xt(e,t,134217728,n)}fd(t,134217728)}};Gm=function(t){if(t.tag===13){var e=Yn(t),n=En(t,e);if(n!==null){var i=ft();Xt(n,t,e,i)}fd(t,e)}};Km=function(){return ke};Jm=function(t,e){var n=ke;try{return ke=t,e()}finally{ke=n}};kc=function(t,e,n){switch(e){case"input":if(vc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=Ca(i);if(!s)throw Error(q(90));Pm(i),vc(i,s)}}}break;case"textarea":Cm(t,n);break;case"select":e=n.value,e!=null&&mi(t,!!n.multiple,e,!1)}};zm=ld;Rm=Tr;var J_={usingClientEntryPoint:!1,Events:[qs,si,Ca,Im,Mm,ld]},es={findFiberByHostInstance:xr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Q_={bundleType:es.bundleType,version:es.version,rendererPackageName:es.rendererPackageName,rendererConfig:es.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Tn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$m(t),t===null?null:t.stateNode},findFiberByHostInstance:es.findFiberByHostInstance||G_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lo.isDisabled&&Lo.supportsFiber)try{Na=Lo.inject(Q_),cn=Lo}catch{}}Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J_;Ct.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pd(e))throw Error(q(200));return V_(t,e,null,n)};Ct.createRoot=function(t,e){if(!pd(t))throw Error(q(299));var n=!1,i="",s=yg;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=hd(t,1,!1,null,null,n,!1,i,s),t[Pn]=e.current,Es(t.nodeType===8?t.parentNode:t),new md(e)};Ct.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=$m(e),t=t===null?null:t.stateNode,t};Ct.flushSync=function(t){return Tr(t)};Ct.hydrate=function(t,e,n){if(!Da(e))throw Error(q(200));return Ba(null,t,e,!0,n)};Ct.hydrateRoot=function(t,e,n){if(!pd(t))throw Error(q(405));var i=n!=null&&n.hydratedSources||null,s=!1,l="",u=yg;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(u=n.onRecoverableError)),e=vg(e,null,t,1,n??null,s,!1,l,u),t[Pn]=e.current,Es(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ra(e)};Ct.render=function(t,e,n){if(!Da(e))throw Error(q(200));return Ba(null,t,e,!1,n)};Ct.unmountComponentAtNode=function(t){if(!Da(t))throw Error(q(40));return t._reactRootContainer?(Tr(function(){Ba(null,null,t,!1,function(){t._reactRootContainer=null,t[Pn]=null})}),!0):!1};Ct.unstable_batchedUpdates=ld;Ct.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Da(n))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return Ba(t,e,n,!1,i)};Ct.version="18.3.1-next-f1338f8080-20240426";function _g(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_g)}catch(t){console.error(t)}}_g(),_m.exports=Ct;var xg=_m.exports,wg,Af=xg;wg=Af.createRoot,Af.hydrateRoot;const X_="modulepreload",Y_=function(t,e){return new URL(t,e).href},If={},Hs=function(e,n,i){let s=Promise.resolve();if(n&&n.length>0){const u=document.getElementsByTagName("link"),h=document.querySelector("meta[property=csp-nonce]"),f=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));s=Promise.allSettled(n.map(p=>{if(p=Y_(p,i),p in If)return;If[p]=!0;const v=p.endsWith(".css"),x=v?'[rel="stylesheet"]':"";if(!!i)for(let k=u.length-1;k>=0;k--){const S=u[k];if(S.href===p&&(!v||S.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${p}"]${x}`))return;const N=document.createElement("link");if(N.rel=v?"stylesheet":X_,v||(N.as="script"),N.crossOrigin="",N.href=p,f&&N.setAttribute("nonce",f),document.head.appendChild(N),v)return new Promise((k,S)=>{N.addEventListener("load",k),N.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return s.then(u=>{for(const h of u||[])h.status==="rejected"&&l(h.reason);return e().catch(l)})},ex=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Hs(async()=>{const{default:i}=await Promise.resolve().then(()=>Li);return{default:i}},void 0,import.meta.url).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)};class gd extends Error{constructor(e,n="FunctionsError",i){super(e),this.name=n,this.context=i}}class tx extends gd{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Mf extends gd{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class zf extends gd{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ru;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(ru||(ru={}));var nx=function(t,e,n,i){function s(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function h(v){try{p(i.next(v))}catch(x){u(x)}}function f(v){try{p(i.throw(v))}catch(x){u(x)}}function p(v){v.done?l(v.value):s(v.value).then(h,f)}p((i=i.apply(t,e||[])).next())})};class rx{constructor(e,{headers:n={},customFetch:i,region:s=ru.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=ex(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var i;return nx(this,void 0,void 0,function*(){try{const{headers:s,method:l,body:u}=n;let h={},{region:f}=n;f||(f=this.region);const p=new URL(`${this.url}/${e}`);f&&f!=="any"&&(h["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let v;u&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",v=u):typeof u=="string"?(h["Content-Type"]="text/plain",v=u):typeof FormData<"u"&&u instanceof FormData?v=u:(h["Content-Type"]="application/json",v=JSON.stringify(u)));const x=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),s),body:v}).catch(S=>{throw new tx(S)}),b=x.headers.get("x-relay-error");if(b&&b==="true")throw new Mf(x);if(!x.ok)throw new zf(x);let N=((i=x.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),k;return N==="application/json"?k=yield x.json():N==="application/octet-stream"?k=yield x.blob():N==="text/event-stream"?k=x:N==="multipart/form-data"?k=yield x.formData():k=yield x.text(),{data:k,error:null,response:x}}catch(s){return{data:null,error:s,response:s instanceof zf||s instanceof Mf?s.context:void 0}}})}}var _t={},vd={},$a={},Ws={},Ua={},Fa={},ix=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Pi=ix();const sx=Pi.fetch,bg=Pi.fetch.bind(Pi),jg=Pi.Headers,ox=Pi.Request,ax=Pi.Response,Li=Object.freeze(Object.defineProperty({__proto__:null,Headers:jg,Request:ox,Response:ax,default:bg,fetch:sx},Symbol.toStringTag,{value:"Module"})),lx=Sv(Li);var qa={};Object.defineProperty(qa,"__esModule",{value:!0});let cx=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};qa.default=cx;var kg=Pt&&Pt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Fa,"__esModule",{value:!0});const ux=kg(lx),dx=kg(qa);let hx=class{constructor(e){var n,i;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(i=e.isMaybeSingle)!==null&&i!==void 0?i:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=ux.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let s=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var u,h,f,p;let v=null,x=null,b=null,N=l.status,k=l.statusText;if(l.ok){if(this.method!=="HEAD"){const _=await l.text();_===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?x=_:x=JSON.parse(_))}const O=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),g=(f=l.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");O&&g&&g.length>1&&(b=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(x)&&(x.length>1?(v={code:"PGRST116",details:`Results contain ${x.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},x=null,b=null,N=406,k="Not Acceptable"):x.length===1?x=x[0]:x=null)}else{const O=await l.text();try{v=JSON.parse(O),Array.isArray(v)&&l.status===404&&(x=[],v=null,N=200,k="OK")}catch{l.status===404&&O===""?(N=204,k="No Content"):v={message:O}}if(v&&this.isMaybeSingle&&(!((p=v==null?void 0:v.details)===null||p===void 0)&&p.includes("0 rows"))&&(v=null,N=200,k="OK"),v&&this.shouldThrowOnError)throw new dx.default(v)}return{error:v,data:x,count:b,status:N,statusText:k}});return this.shouldThrowOnError||(s=s.catch(l=>{var u,h,f;return{error:{message:`${(u=l==null?void 0:l.name)!==null&&u!==void 0?u:"FetchError"}: ${l==null?void 0:l.message}`,details:`${(h=l==null?void 0:l.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(f=l==null?void 0:l.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};Fa.default=hx;var fx=Pt&&Pt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ua,"__esModule",{value:!0});const mx=fx(Fa);let px=class extends mx.default{select(e){let n=!1;const i=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:i,foreignTable:s,referencedTable:l=s}={}){const u=l?`${l}.order`:"order",h=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${h?`${h},`:""}${e}.${n?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:i=n}={}){const s=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:i,referencedTable:s=i}={}){const l=typeof s>"u"?"offset":`${s}.offset`,u=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(l,`${e}`),this.url.searchParams.set(u,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:i=!1,buffers:s=!1,wal:l=!1,format:u="text"}={}){var h;const f=[e?"analyze":null,n?"verbose":null,i?"settings":null,s?"buffers":null,l?"wal":null].filter(Boolean).join("|"),p=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${p}"; options=${f};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};Ua.default=px;var gx=Pt&&Pt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ws,"__esModule",{value:!0});const vx=gx(Ua);let yx=class extends vx.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const i=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${i})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:i,type:s}={}){let l="";s==="plain"?l="pl":s==="phrase"?l="ph":s==="websearch"&&(l="w");const u=i===void 0?"":`(${i})`;return this.url.searchParams.append(e,`${l}fts${u}.${n}`),this}match(e){return Object.entries(e).forEach(([n,i])=>{this.url.searchParams.append(n,`eq.${i}`)}),this}not(e,n,i){return this.url.searchParams.append(e,`not.${n}.${i}`),this}or(e,{foreignTable:n,referencedTable:i=n}={}){const s=i?`${i}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,i){return this.url.searchParams.append(e,`${n}.${i}`),this}};Ws.default=yx;var _x=Pt&&Pt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($a,"__esModule",{value:!0});const ts=_x(Ws);let xx=class{constructor(e,{headers:n={},schema:i,fetch:s}){this.url=e,this.headers=new Headers(n),this.schema=i,this.fetch=s}select(e,{head:n=!1,count:i}={}){const s=n?"HEAD":"GET";let l=!1;const u=(e??"*").split("").map(h=>/\s/.test(h)&&!l?"":(h==='"'&&(l=!l),h)).join("");return this.url.searchParams.set("select",u),i&&this.headers.append("Prefer",`count=${i}`),new ts.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:i=!0}={}){var s;const l="POST";if(n&&this.headers.append("Prefer",`count=${n}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(u.length>0){const h=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new ts.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:i=!1,count:s,defaultToNull:l=!0}={}){var u;const h="POST";if(this.headers.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const f=e.reduce((p,v)=>p.concat(Object.keys(v)),[]);if(f.length>0){const p=[...new Set(f)].map(v=>`"${v}"`);this.url.searchParams.set("columns",p.join(","))}}return new ts.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(e,{count:n}={}){var i;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new ts.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}delete({count:e}={}){var n;const i="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new ts.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};$a.default=xx;var Ng=Pt&&Pt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vd,"__esModule",{value:!0});const wx=Ng($a),bx=Ng(Ws);let jx=class Sg{constructor(e,{headers:n={},schema:i,fetch:s}={}){this.url=e,this.headers=new Headers(n),this.schemaName=i,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new wx.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Sg(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:i=!1,get:s=!1,count:l}={}){var u;let h;const f=new URL(`${this.url}/rpc/${e}`);let p;i||s?(h=i?"HEAD":"GET",Object.entries(n).filter(([x,b])=>b!==void 0).map(([x,b])=>[x,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([x,b])=>{f.searchParams.append(x,b)})):(h="POST",p=n);const v=new Headers(this.headers);return l&&v.set("Prefer",`count=${l}`),new bx.default({method:h,url:f,headers:v,schema:this.schemaName,body:p,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}};vd.default=jx;var Oi=Pt&&Pt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_t,"__esModule",{value:!0});_t.PostgrestError=_t.PostgrestBuilder=_t.PostgrestTransformBuilder=_t.PostgrestFilterBuilder=_t.PostgrestQueryBuilder=_t.PostgrestClient=void 0;const Pg=Oi(vd);_t.PostgrestClient=Pg.default;const Eg=Oi($a);_t.PostgrestQueryBuilder=Eg.default;const Cg=Oi(Ws);_t.PostgrestFilterBuilder=Cg.default;const Tg=Oi(Ua);_t.PostgrestTransformBuilder=Tg.default;const Lg=Oi(Fa);_t.PostgrestBuilder=Lg.default;const Og=Oi(qa);_t.PostgrestError=Og.default;var kx=_t.default={PostgrestClient:Pg.default,PostgrestQueryBuilder:Eg.default,PostgrestFilterBuilder:Cg.default,PostgrestTransformBuilder:Tg.default,PostgrestBuilder:Lg.default,PostgrestError:Og.default};const{PostgrestClient:Nx,PostgrestQueryBuilder:b1,PostgrestFilterBuilder:j1,PostgrestTransformBuilder:k1,PostgrestBuilder:N1,PostgrestError:S1}=kx;class Sx{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const i=n.node,s=parseInt(i.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const i=this.getWebSocketConstructor();return new i(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Px="2.15.5",Ex=`realtime-js/${Px}`,Cx="1.0.0",iu=1e4,Tx=1e3,Lx=100;var gs;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(gs||(gs={}));var Ve;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ve||(Ve={}));var Kt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Kt||(Kt={}));var su;(function(t){t.websocket="websocket"})(su||(su={}));var _r;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(_r||(_r={}));class Ox{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),i=new TextDecoder;return this._decodeBroadcast(e,n,i)}_decodeBroadcast(e,n,i){const s=n.getUint8(1),l=n.getUint8(2);let u=this.HEADER_LENGTH+2;const h=i.decode(e.slice(u,u+s));u=u+s;const f=i.decode(e.slice(u,u+l));u=u+l;const p=JSON.parse(i.decode(e.slice(u,e.byteLength)));return{ref:null,topic:h,event:f,payload:p}}}class Ag{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Pe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Pe||(Pe={}));const Rf=(t,e,n={})=>{var i;const s=(i=n.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(e).reduce((l,u)=>(l[u]=Ax(u,t,e,s),l),{})},Ax=(t,e,n,i)=>{const s=e.find(h=>h.name===t),l=s==null?void 0:s.type,u=n[t];return l&&!i.includes(l)?Ig(l,u):ou(u)},Ig=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Rx(e,n)}switch(t){case Pe.bool:return Ix(e);case Pe.float4:case Pe.float8:case Pe.int2:case Pe.int4:case Pe.int8:case Pe.numeric:case Pe.oid:return Mx(e);case Pe.json:case Pe.jsonb:return zx(e);case Pe.timestamp:return Dx(e);case Pe.abstime:case Pe.date:case Pe.daterange:case Pe.int4range:case Pe.int8range:case Pe.money:case Pe.reltime:case Pe.text:case Pe.time:case Pe.timestamptz:case Pe.timetz:case Pe.tsrange:case Pe.tstzrange:return ou(e);default:return ou(e)}},ou=t=>t,Ix=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Mx=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},zx=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Rx=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,i=t[n];if(t[0]==="{"&&i==="}"){let l;const u=t.slice(1,n);try{l=JSON.parse("["+u+"]")}catch{l=u?u.split(","):[]}return l.map(h=>Ig(e,h))}return t},Dx=t=>typeof t=="string"?t.replace(" ","T"):t,Mg=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Xl{constructor(e,n,i={},s=iu){this.channel=e,this.event=n,this.payload=i,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var i;return this._hasReceived(e)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Df;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Df||(Df={}));class vs{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},s=>{const{onJoin:l,onLeave:u,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=vs.syncState(this.state,s,l,u),this.pendingDiffs.forEach(f=>{this.state=vs.syncDiff(this.state,f,l,u)}),this.pendingDiffs=[],h()}),this.channel._on(i.diff,{},s=>{const{onJoin:l,onLeave:u,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=vs.syncDiff(this.state,s,l,u),h())}),this.onJoin((s,l,u)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:l,newPresences:u})}),this.onLeave((s,l,u)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:l,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,i,s){const l=this.cloneDeep(e),u=this.transformState(n),h={},f={};return this.map(l,(p,v)=>{u[p]||(f[p]=v)}),this.map(u,(p,v)=>{const x=l[p];if(x){const b=v.map(O=>O.presence_ref),N=x.map(O=>O.presence_ref),k=v.filter(O=>N.indexOf(O.presence_ref)<0),S=x.filter(O=>b.indexOf(O.presence_ref)<0);k.length>0&&(h[p]=k),S.length>0&&(f[p]=S)}else h[p]=v}),this.syncDiff(l,{joins:h,leaves:f},i,s)}static syncDiff(e,n,i,s){const{joins:l,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),s||(s=()=>{}),this.map(l,(h,f)=>{var p;const v=(p=e[h])!==null&&p!==void 0?p:[];if(e[h]=this.cloneDeep(f),v.length>0){const x=e[h].map(N=>N.presence_ref),b=v.filter(N=>x.indexOf(N.presence_ref)<0);e[h].unshift(...b)}i(h,v,f)}),this.map(u,(h,f)=>{let p=e[h];if(!p)return;const v=f.map(x=>x.presence_ref);p=p.filter(x=>v.indexOf(x.presence_ref)<0),e[h]=p,s(h,p,f),p.length===0&&delete e[h]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(i=>n(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,i)=>{const s=e[i];return"metas"in s?n[i]=s.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[i]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Bf;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Bf||(Bf={}));var ys;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(ys||(ys={}));var xn;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(xn||(xn={}));class yd{constructor(e,n={config:{}},i){this.topic=e,this.params=n,this.socket=i,this.bindings={},this.state=Ve.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Xl(this,Kt.join,this.params,this.timeout),this.rejoinTimer=new Ag(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ve.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ve.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ve.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Ve.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Kt.reply,{},(s,l)=>{this._trigger(this._replyEventName(l),s)}),this.presence=new vs(this),this.broadcastEndpointURL=Mg(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var i,s,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Ve.closed){const{config:{broadcast:u,presence:h,private:f}}=this.params,p=(s=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(N=>N.filter))!==null&&s!==void 0?s:[],v=!!this.bindings[ys.PRESENCE]&&this.bindings[ys.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,x={},b={broadcast:u,presence:Object.assign(Object.assign({},h),{enabled:v}),postgres_changes:p,private:f};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(N=>e==null?void 0:e(xn.CHANNEL_ERROR,N)),this._onClose(()=>e==null?void 0:e(xn.CLOSED)),this.updateJoinPayload(Object.assign({config:b},x)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:N})=>{var k;if(this.socket.setAuth(),N===void 0){e==null||e(xn.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,O=(k=S==null?void 0:S.length)!==null&&k!==void 0?k:0,g=[];for(let _=0;_<O;_++){const w=S[_],{filter:{event:C,schema:T,table:P,filter:I}}=w,U=N&&N[_];if(U&&U.event===C&&U.schema===T&&U.table===P&&U.filter===I)g.push(Object.assign(Object.assign({},w),{id:U.id}));else{this.unsubscribe(),this.state=Ve.errored,e==null||e(xn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(xn.SUBSCRIBED);return}}).receive("error",N=>{this.state=Ve.errored,e==null||e(xn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(N).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(xn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,i){return this.state===Ve.joined&&e===ys.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,i)}async send(e,n={}){var i,s;if(!this._canPush()&&e.type==="broadcast"){const{event:l,payload:u}=e,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:u,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((s=p.body)===null||s===void 0?void 0:s.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var u,h,f;const p=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(h=(u=this.params)===null||u===void 0?void 0:u.config)===null||h===void 0?void 0:h.broadcast)===null||f===void 0)&&f.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ve.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Kt.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(s=>{i=new Xl(this,Kt.leave,{},e),i.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ve.closed,this.bindings={}}async _fetchWithTimeout(e,n,i){const s=new AbortController,l=setTimeout(()=>s.abort(),i),u=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(l),u}_push(e,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Xl(this,e,n,i);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Lx){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,i){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,i){var s,l;const u=e.toLocaleLowerCase(),{close:h,error:f,leave:p,join:v}=Kt;if(i&&[h,f,p,v].indexOf(u)>=0&&i!==this._joinRef())return;let b=this._onMessage(u,n,i);if(n&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(N=>{var k,S,O;return((k=N.filter)===null||k===void 0?void 0:k.event)==="*"||((O=(S=N.filter)===null||S===void 0?void 0:S.event)===null||O===void 0?void 0:O.toLocaleLowerCase())===u}).map(N=>N.callback(b,i)):(l=this.bindings[u])===null||l===void 0||l.filter(N=>{var k,S,O,g,_,w;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in N){const C=N.id,T=(k=N.filter)===null||k===void 0?void 0:k.event;return C&&((S=n.ids)===null||S===void 0?void 0:S.includes(C))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((O=n.data)===null||O===void 0?void 0:O.type.toLocaleLowerCase()))}else{const C=(_=(g=N==null?void 0:N.filter)===null||g===void 0?void 0:g.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return C==="*"||C===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return N.type.toLocaleLowerCase()===u}).map(N=>{if(typeof b=="object"&&"ids"in b){const k=b.data,{schema:S,table:O,commit_timestamp:g,type:_,errors:w}=k;b=Object.assign(Object.assign({},{schema:S,table:O,commit_timestamp:g,eventType:_,new:{},old:{},errors:w}),this._getPayloadRecords(k))}N.callback(b,i)})}_isClosed(){return this.state===Ve.closed}_isJoined(){return this.state===Ve.joined}_isJoining(){return this.state===Ve.joining}_isLeaving(){return this.state===Ve.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,i){const s=e.toLocaleLowerCase(),l={type:s,filter:n,callback:i};return this.bindings[s]?this.bindings[s].push(l):this.bindings[s]=[l],this}_off(e,n){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(s=>{var l;return!(((l=s.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===i&&yd.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const i in e)if(e[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Kt.close,{},e)}_onError(e){this._on(Kt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ve.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Rf(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Rf(e.columns,e.old_record)),n}}const Yl=()=>{},Oo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Bx=[1e3,2e3,5e3,1e4],$x=1e4,Ux=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Fx{constructor(e,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=iu,this.transport=null,this.heartbeatIntervalMs=Oo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Yl,this.ref=0,this.reconnectTimer=null,this.logger=Yl,this.conn=null,this.sendBuffer=[],this.serializer=new Ox,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let l;return s?l=s:typeof fetch>"u"?l=(...u)=>Hs(async()=>{const{default:h}=await Promise.resolve().then(()=>Li);return{default:h}},void 0,import.meta.url).then(({default:h})=>h(...u)).catch(h=>{throw new Error(`Failed to load @supabase/node-fetch: ${h.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):l=fetch,(...u)=>l(...u)},!(!((i=n==null?void 0:n.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${su.websocket}`,this.httpEndpoint=Mg(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Sx.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Cx}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,i){this.logger(e,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case gs.connecting:return _r.Connecting;case gs.open:return _r.Open;case gs.closing:return _r.Closing;default:return _r.Closed}}isConnected(){return this.connectionState()===_r.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const i=`realtime:${e}`,s=this.getChannels().find(l=>l.topic===i);if(s)return s;{const l=new yd(`realtime:${e}`,n,this);return this.channels.push(l),l}}push(e){const{topic:n,event:i,payload:s,ref:l}=e,u=()=>{this.encode(e,h=>{var f;(f=this.conn)===null||f===void 0||f.send(h)})};this.log("push",`${n} ${i} (${l})`,s),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Tx,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Oo.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:s,payload:l,ref:u}=n,h=u?`(${u})`:"",f=l.status||"";this.log("receive",`${f} ${i} ${s} ${h}`.trim(),l),this.channels.filter(p=>p._isMember(i)).forEach(p=>p._trigger(s,l,u)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Kt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const i=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${i}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const i=new Blob([Ux],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const s={access_token:n,version:Ex};n&&i.updateJoinPayload(s),i.joinedOnce&&i._isJoined()&&i._push(Kt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new Ag(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Oo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,i,s,l,u,h,f,p,v;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(i=e==null?void 0:e.timeout)!==null&&i!==void 0?i:iu,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Oo.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(u=e==null?void 0:e.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(h=e==null?void 0:e.heartbeatCallback)!==null&&h!==void 0?h:Yl,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=e==null?void 0:e.reconnectAfterMs)!==null&&f!==void 0?f:x=>Bx[x-1]||$x,this.encode=(p=e==null?void 0:e.encode)!==null&&p!==void 0?p:(x,b)=>b(JSON.stringify(x)),this.decode=(v=e==null?void 0:e.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class _d extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ge(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class qx extends _d{constructor(e,n,i){super(e),this.name="StorageApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class au extends _d{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Zx=function(t,e,n,i){function s(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function h(v){try{p(i.next(v))}catch(x){u(x)}}function f(v){try{p(i.throw(v))}catch(x){u(x)}}function p(v){v.done?l(v.value):s(v.value).then(h,f)}p((i=i.apply(t,e||[])).next())})};const zg=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Hs(async()=>{const{default:i}=await Promise.resolve().then(()=>Li);return{default:i}},void 0,import.meta.url).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)},Hx=()=>Zx(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Hs(()=>Promise.resolve().then(()=>Li),void 0,import.meta.url)).Response:Response}),lu=t=>{if(Array.isArray(t))return t.map(n=>lu(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,i])=>{const s=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[s]=lu(i)}),e},Wx=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Ir=function(t,e,n,i){function s(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function h(v){try{p(i.next(v))}catch(x){u(x)}}function f(v){try{p(i.throw(v))}catch(x){u(x)}}function p(v){v.done?l(v.value):s(v.value).then(h,f)}p((i=i.apply(t,e||[])).next())})};const ec=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Vx=(t,e,n)=>Ir(void 0,void 0,void 0,function*(){const i=yield Hx();t instanceof i&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const l=t.status||500,u=(s==null?void 0:s.statusCode)||l+"";e(new qx(ec(s),l,u))}).catch(s=>{e(new au(ec(s),s))}):e(new au(ec(t),t))}),Gx=(t,e,n,i)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!i?s:(Wx(i)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(i)):s.body=i,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),n))};function Vs(t,e,n,i,s,l){return Ir(this,void 0,void 0,function*(){return new Promise((u,h)=>{t(n,Gx(e,i,s,l)).then(f=>{if(!f.ok)throw f;return i!=null&&i.noResolveJson?f:f.json()}).then(f=>u(f)).catch(f=>Vx(f,h,i))})})}function _a(t,e,n,i){return Ir(this,void 0,void 0,function*(){return Vs(t,"GET",e,n,i)})}function an(t,e,n,i,s){return Ir(this,void 0,void 0,function*(){return Vs(t,"POST",e,i,s,n)})}function cu(t,e,n,i,s){return Ir(this,void 0,void 0,function*(){return Vs(t,"PUT",e,i,s,n)})}function Kx(t,e,n,i){return Ir(this,void 0,void 0,function*(){return Vs(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}function Rg(t,e,n,i,s){return Ir(this,void 0,void 0,function*(){return Vs(t,"DELETE",e,i,s,n)})}var dt=function(t,e,n,i){function s(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function h(v){try{p(i.next(v))}catch(x){u(x)}}function f(v){try{p(i.throw(v))}catch(x){u(x)}}function p(v){v.done?l(v.value):s(v.value).then(h,f)}p((i=i.apply(t,e||[])).next())})};const Jx={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},$f={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Qx{constructor(e,n={},i,s){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=i,this.fetch=zg(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,i,s){return dt(this,void 0,void 0,function*(){try{let l;const u=Object.assign(Object.assign({},$f),s);let h=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const f=u.metadata;typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),f&&l.append("metadata",this.encodeMetadata(f)),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.append("cacheControl",u.cacheControl),f&&l.append("metadata",this.encodeMetadata(f))):(l=i,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType,f&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(f)))),s!=null&&s.headers&&(h=Object.assign(Object.assign({},h),s.headers));const p=this._removeEmptyFolders(n),v=this._getFinalPath(p),x=yield(e=="PUT"?cu:an)(this.fetch,`${this.url}/object/${v}`,l,Object.assign({headers:h},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{data:{path:p,id:x.Id,fullPath:x.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ge(l))return{data:null,error:l};throw l}})}upload(e,n,i){return dt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,i)})}uploadToSignedUrl(e,n,i,s){return dt(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),u=this._getFinalPath(l),h=new URL(this.url+`/object/upload/sign/${u}`);h.searchParams.set("token",n);try{let f;const p=Object.assign({upsert:$f.upsert},s),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&i instanceof Blob?(f=new FormData,f.append("cacheControl",p.cacheControl),f.append("",i)):typeof FormData<"u"&&i instanceof FormData?(f=i,f.append("cacheControl",p.cacheControl)):(f=i,v["cache-control"]=`max-age=${p.cacheControl}`,v["content-type"]=p.contentType);const x=yield cu(this.fetch,h.toString(),f,{headers:v});return{data:{path:l,fullPath:x.Key},error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(Ge(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(e,n){return dt(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const l=yield an(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:s}),u=new URL(this.url+l.url),h=u.searchParams.get("token");if(!h)throw new _d("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:h},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ge(i))return{data:null,error:i};throw i}})}update(e,n,i){return dt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,i)})}move(e,n,i){return dt(this,void 0,void 0,function*(){try{return{data:yield an(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ge(s))return{data:null,error:s};throw s}})}copy(e,n,i){return dt(this,void 0,void 0,function*(){try{return{data:{path:(yield an(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ge(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,i){return dt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),l=yield an(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const u=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${u}`)},{data:l,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ge(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,i){return dt(this,void 0,void 0,function*(){try{const s=yield an(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),l=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:s.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${l}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ge(s))return{data:null,error:s};throw s}})}download(e,n){return dt(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),u=l?`?${l}`:"";try{const h=this._getFinalPath(e);return{data:yield(yield _a(this.fetch,`${this.url}/${s}/${h}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(Ge(h))return{data:null,error:h};throw h}})}info(e){return dt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const i=yield _a(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:lu(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ge(i))return{data:null,error:i};throw i}})}exists(e){return dt(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Kx(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ge(i)&&i instanceof au){const s=i.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,n){const i=this._getFinalPath(e),s=[],l=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";l!==""&&s.push(l);const h=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",f=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});f!==""&&s.push(f);let p=s.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${i}${p}`)}}}remove(e){return dt(this,void 0,void 0,function*(){try{return{data:yield Rg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ge(n))return{data:null,error:n};throw n}})}list(e,n,i){return dt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Jx),n),{prefix:e||""});return{data:yield an(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},i),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ge(s))return{data:null,error:s};throw s}})}listV2(e,n){return dt(this,void 0,void 0,function*(){try{const i=Object.assign({},e);return{data:yield an(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ge(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Xx="2.12.1",Yx={"X-Client-Info":`storage-js/${Xx}`};var Vr=function(t,e,n,i){function s(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function h(v){try{p(i.next(v))}catch(x){u(x)}}function f(v){try{p(i.throw(v))}catch(x){u(x)}}function p(v){v.done?l(v.value):s(v.value).then(h,f)}p((i=i.apply(t,e||[])).next())})};class ew{constructor(e,n={},i,s){this.shouldThrowOnError=!1;const l=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href,this.headers=Object.assign(Object.assign({},Yx),n),this.fetch=zg(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Vr(this,void 0,void 0,function*(){try{return{data:yield _a(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ge(e))return{data:null,error:e};throw e}})}getBucket(e){return Vr(this,void 0,void 0,function*(){try{return{data:yield _a(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ge(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Vr(this,void 0,void 0,function*(){try{return{data:yield an(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ge(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return Vr(this,void 0,void 0,function*(){try{return{data:yield cu(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ge(i))return{data:null,error:i};throw i}})}emptyBucket(e){return Vr(this,void 0,void 0,function*(){try{return{data:yield an(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ge(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Vr(this,void 0,void 0,function*(){try{return{data:yield Rg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ge(n))return{data:null,error:n};throw n}})}}class tw extends ew{constructor(e,n={},i,s){super(e,n,i,s)}from(e){return new Qx(this.url,this.headers,e,this.fetch)}}const nw="2.57.4";let os="";typeof Deno<"u"?os="deno":typeof document<"u"?os="web":typeof navigator<"u"&&navigator.product==="ReactNative"?os="react-native":os="node";const rw={"X-Client-Info":`supabase-js-${os}/${nw}`},iw={headers:rw},sw={schema:"public"},ow={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},aw={};var lw=function(t,e,n,i){function s(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function h(v){try{p(i.next(v))}catch(x){u(x)}}function f(v){try{p(i.throw(v))}catch(x){u(x)}}function p(v){v.done?l(v.value):s(v.value).then(h,f)}p((i=i.apply(t,e||[])).next())})};const cw=t=>{let e;return t?e=t:typeof fetch>"u"?e=bg:e=fetch,(...n)=>e(...n)},uw=()=>typeof Headers>"u"?jg:Headers,dw=(t,e,n)=>{const i=cw(n),s=uw();return(l,u)=>lw(void 0,void 0,void 0,function*(){var h;const f=(h=yield e())!==null&&h!==void 0?h:t;let p=new s(u==null?void 0:u.headers);return p.has("apikey")||p.set("apikey",t),p.has("Authorization")||p.set("Authorization",`Bearer ${f}`),i(l,Object.assign(Object.assign({},u),{headers:p}))})};var hw=function(t,e,n,i){function s(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function h(v){try{p(i.next(v))}catch(x){u(x)}}function f(v){try{p(i.throw(v))}catch(x){u(x)}}function p(v){v.done?l(v.value):s(v.value).then(h,f)}p((i=i.apply(t,e||[])).next())})};function fw(t){return t.endsWith("/")?t:t+"/"}function mw(t,e){var n,i;const{db:s,auth:l,realtime:u,global:h}=t,{db:f,auth:p,realtime:v,global:x}=e,b={db:Object.assign(Object.assign({},f),s),auth:Object.assign(Object.assign({},p),l),realtime:Object.assign(Object.assign({},v),u),storage:{},global:Object.assign(Object.assign(Object.assign({},x),h),{headers:Object.assign(Object.assign({},(n=x==null?void 0:x.headers)!==null&&n!==void 0?n:{}),(i=h==null?void 0:h.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>hw(this,void 0,void 0,function*(){return""})};return t.accessToken?b.accessToken=t.accessToken:delete b.accessToken,b}function pw(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(fw(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Dg="2.71.1",Xr=30*1e3,uu=3,tc=uu*Xr,gw="http://localhost:9999",vw="supabase.auth.token",yw={"X-Client-Info":`gotrue-js/${Dg}`},du="X-Supabase-Api-Version",Bg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},_w=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,xw=10*60*1e3;class xd extends Error{constructor(e,n,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function ce(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class ww extends xd{constructor(e,n,i){super(e,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function bw(t){return ce(t)&&t.name==="AuthApiError"}class $g extends xd{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class or extends xd{constructor(e,n,i,s){super(e,i,s),this.name=n,this.status=i}}class Dn extends or{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function jw(t){return ce(t)&&t.name==="AuthSessionMissingError"}class Ao extends or{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Io extends or{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Mo extends or{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function kw(t){return ce(t)&&t.name==="AuthImplicitGrantRedirectError"}class Uf extends or{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class hu extends or{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function nc(t){return ce(t)&&t.name==="AuthRetryableFetchError"}class Ff extends or{constructor(e,n,i){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class fu extends or{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const xa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),qf=` 	
\r=`.split(""),Nw=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<qf.length;e+=1)t[qf[e].charCodeAt(0)]=-2;for(let e=0;e<xa.length;e+=1)t[xa[e].charCodeAt(0)]=e;return t})();function Zf(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(xa[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(xa[i]),e.queuedBits-=6}}function Ug(t,e,n){const i=Nw[t];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Hf(t){const e=[],n=u=>{e.push(String.fromCodePoint(u))},i={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},l=u=>{Ew(u,i,n)};for(let u=0;u<t.length;u+=1)Ug(t.charCodeAt(u),s,l);return e.join("")}function Sw(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Pw(t,e){for(let n=0;n<t.length;n+=1){let i=t.charCodeAt(n);if(i>55295&&i<=56319){const s=(i-55296)*1024&65535;i=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}Sw(i,e)}}function Ew(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let i=1;i<6;i+=1)if(!(t>>7-i&1)){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Cw(t){const e=[],n={queue:0,queuedBits:0},i=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)Ug(t.charCodeAt(s),n,i);return new Uint8Array(e)}function Tw(t){const e=[];return Pw(t,n=>e.push(n)),new Uint8Array(e)}function Lw(t){const e=[],n={queue:0,queuedBits:0},i=s=>{e.push(s)};return t.forEach(s=>Zf(s,n,i)),Zf(null,n,i),e.join("")}function Ow(t){return Math.round(Date.now()/1e3)+t}function Aw(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Wt=()=>typeof window<"u"&&typeof document<"u",mr={tested:!1,writable:!1},Fg=()=>{if(!Wt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(mr.tested)return mr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),mr.tested=!0,mr.writable=!0}catch{mr.tested=!0,mr.writable=!1}return mr.writable};function Iw(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,l)=>{e[l]=s})}catch{}return n.searchParams.forEach((i,s)=>{e[s]=i}),e}const qg=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Hs(async()=>{const{default:i}=await Promise.resolve().then(()=>Li);return{default:i}},void 0,import.meta.url).then(({default:i})=>i(...n)):e=fetch,(...n)=>e(...n)},Mw=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Yr=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},pr=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Rn=async(t,e)=>{await t.removeItem(e)};class Za{constructor(){this.promise=new Za.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Za.promiseConstructor=Promise;function rc(t){const e=t.split(".");if(e.length!==3)throw new fu("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!_w.test(e[i]))throw new fu("JWT not in base64url format");return{header:JSON.parse(Hf(e[0])),payload:JSON.parse(Hf(e[1])),signature:Cw(e[2]),raw:{header:e[0],payload:e[1]}}}async function zw(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Rw(t,e){return new Promise((i,s)=>{(async()=>{for(let l=0;l<1/0;l++)try{const u=await t(l);if(!e(l,null,u)){i(u);return}}catch(u){if(!e(l,u)){s(u);return}}})()})}function Dw(t){return("0"+t.toString(16)).substr(-2)}function Bw(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let s="";for(let l=0;l<56;l++)s+=n.charAt(Math.floor(Math.random()*i));return s}return crypto.getRandomValues(e),Array.from(e,Dw).join("")}async function $w(t){const n=new TextEncoder().encode(t),i=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(i);return Array.from(s).map(l=>String.fromCharCode(l)).join("")}async function Uw(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await $w(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Gr(t,e,n=!1){const i=Bw();let s=i;n&&(s+="/PASSWORD_RECOVERY"),await Yr(t,`${e}-code-verifier`,s);const l=await Uw(i);return[l,i===l?"plain":"s256"]}const Fw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function qw(t){const e=t.headers.get(du);if(!e||!e.match(Fw))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Zw(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Hw(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Ww=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Kr(t){if(!Ww.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ic(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Wf(t){return JSON.parse(JSON.stringify(t))}var Vw=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};const yr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Gw=[502,503,504];async function Vf(t){var e;if(!Mw(t))throw new hu(yr(t),0);if(Gw.includes(t.status))throw new hu(yr(t),t.status);let n;try{n=await t.json()}catch(l){throw new $g(yr(l),l)}let i;const s=qw(t);if(s&&s.getTime()>=Bg["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new Ff(yr(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new Dn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,u)=>l&&typeof u=="string",!0))throw new Ff(yr(n),t.status,n.weak_password.reasons);throw new ww(yr(n),t.status||500,i)}const Kw=(t,e,n,i)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(i),Object.assign(Object.assign({},s),n))};async function pe(t,e,n,i){var s;const l=Object.assign({},i==null?void 0:i.headers);l[du]||(l[du]=Bg["2024-01-01"].name),i!=null&&i.jwt&&(l.Authorization=`Bearer ${i.jwt}`);const u=(s=i==null?void 0:i.query)!==null&&s!==void 0?s:{};i!=null&&i.redirectTo&&(u.redirect_to=i.redirectTo);const h=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",f=await Jw(t,e,n+h,{headers:l,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(f):{data:Object.assign({},f),error:null}}async function Jw(t,e,n,i,s,l){const u=Kw(e,i,s,l);let h;try{h=await t(n,Object.assign({},u))}catch(f){throw console.error(f),new hu(yr(f),0)}if(h.ok||await Vf(h),i!=null&&i.noResolveJson)return h;try{return await h.json()}catch(f){await Vf(f)}}function yn(t){var e;let n=null;eb(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Ow(t.expires_in)));const i=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:i},error:null}}function Gf(t){const e=yn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Zn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Qw(t){return{data:t,error:null}}function Xw(t){const{action_link:e,email_otp:n,hashed_token:i,redirect_to:s,verification_type:l}=t,u=Vw(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:n,hashed_token:i,redirect_to:s,verification_type:l},f=Object.assign({},u);return{data:{properties:h,user:f},error:null}}function Yw(t){return t}function eb(t){return t.access_token&&t.refresh_token&&t.expires_in}const sc=["global","local","others"];var tb=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};class nb{constructor({url:e="",headers:n={},fetch:i}){this.url=e,this.headers=n,this.fetch=qg(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=sc[0]){if(sc.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${sc.join(", ")}`);try{return await pe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ce(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,n={}){try{return await pe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Zn})}catch(i){if(ce(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:n}=e,i=tb(e,["options"]),s=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(s.new_email=i==null?void 0:i.newEmail,delete s.newEmail),await pe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Xw,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ce(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await pe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Zn})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,i,s,l,u,h,f;try{const p={nextPage:null,lastPage:0,total:0},v=await pe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(l=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&l!==void 0?l:""},xform:Yw});if(v.error)throw v.error;const x=await v.json(),b=(u=v.headers.get("x-total-count"))!==null&&u!==void 0?u:0,N=(f=(h=v.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&f!==void 0?f:[];return N.length>0&&(N.forEach(k=>{const S=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),O=JSON.parse(k.split(";")[1].split("=")[1]);p[`${O}Page`]=S}),p.total=parseInt(b)),{data:Object.assign(Object.assign({},x),p),error:null}}catch(p){if(ce(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){Kr(e);try{return await pe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Zn})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Kr(e);try{return await pe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Zn})}catch(i){if(ce(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,n=!1){Kr(e);try{return await pe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Zn})}catch(i){if(ce(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){Kr(e.userId);try{const{data:n,error:i}=await pe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:i}}catch(n){if(ce(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Kr(e.userId),Kr(e.id);try{return{data:await pe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}}}function Kf(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function rb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Jr={debug:!!(globalThis&&Fg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Zg extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class ib extends Zg{}async function sb(t,e,n){Jr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),Jr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async s=>{if(s){Jr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Jr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Jr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new ib(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Jr.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}rb();const ob={url:gw,storageKey:vw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:yw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Jf(t,e,n){return await n()}const Qr={};class Rs{constructor(e){var n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Rs.nextInstanceID,Rs.nextInstanceID+=1,this.instanceID>0&&Wt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},ob),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new nb({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=qg(s.fetch),this.lock=s.lock||Jf,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Wt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=sb:this.lock=Jf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:Fg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Kf(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Kf(this.memoryStorage)),Wt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=Qr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Qr[this.storageKey]=Object.assign(Object.assign({},Qr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Qr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Qr[this.storageKey]=Object.assign(Object.assign({},Qr[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Dg}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=Iw(window.location.href);let i="none";if(this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce"),Wt()&&this.detectSessionInUrl&&i!=="none"){const{data:s,error:l}=await this._getSessionFromURL(n,i);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),kw(l)){const f=(e=l.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:u,redirectType:h}=s;return this._debug("#_initialize()","detected session in URL",u,"redirect type",h),await this._saveSession(u),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ce(n)?{error:n}:{error:new $g("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,i,s;try{const l=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:yn}),{data:u,error:h}=l;if(h||!u)return{data:{user:null,session:null},error:h};const f=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(l){if(ce(l))return{data:{user:null,session:null},error:l};throw l}}async signUp(e){var n,i,s;try{let l;if("email"in e){const{email:v,password:x,options:b}=e;let N=null,k=null;this.flowType==="pkce"&&([N,k]=await Gr(this.storage,this.storageKey)),l=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b==null?void 0:b.emailRedirectTo,body:{email:v,password:x,data:(n=b==null?void 0:b.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:N,code_challenge_method:k},xform:yn})}else if("phone"in e){const{phone:v,password:x,options:b}=e;l=await pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:x,data:(i=b==null?void 0:b.data)!==null&&i!==void 0?i:{},channel:(s=b==null?void 0:b.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken}},xform:yn})}else throw new Io("You must provide either an email or phone number and a password");const{data:u,error:h}=l;if(h||!u)return{data:{user:null,session:null},error:h};const f=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(l){if(ce(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithPassword(e){try{let n;if("email"in e){const{email:l,password:u,options:h}=e;n=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Gf})}else if("phone"in e){const{phone:l,password:u,options:h}=e;n=await pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Gf})}else throw new Io("You must provide either an email or phone number and a password");const{data:i,error:s}=n;return s?{data:{user:null,session:null},error:s}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Ao}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:s})}catch(n){if(ce(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,i,s,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,i,s,l,u,h,f,p,v,x,b,N;let k,S;if("message"in e)k=e.message,S=e.signature;else{const{chain:O,wallet:g,statement:_,options:w}=e;let C;if(Wt())if(typeof g=="object")C=g;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))C=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=g}const T=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in C&&C.signIn){const P=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),_?{statement:_}:null));let I;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")I=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)I=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)k=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),S=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${T.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(s=(i=w==null?void 0:w.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((h=w==null?void 0:w.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((f=w==null?void 0:w.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((p=w==null?void 0:w.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((x=(v=w==null?void 0:w.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||x===void 0)&&x.length?["Resources",...w.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const P=await C.signMessage(new TextEncoder().encode(k),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=P}}try{const{data:O,error:g}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:Lw(S)},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(N=e.options)===null||N===void 0?void 0:N.captchaToken}}:null),xform:yn});if(g)throw g;return!O||!O.session||!O.user?{data:{user:null,session:null},error:new Ao}:(O.session&&(await this._saveSession(O.session),await this._notifyAllSubscribers("SIGNED_IN",O.session)),{data:Object.assign({},O),error:g})}catch(O){if(ce(O))return{data:{user:null,session:null},error:O};throw O}}async _exchangeCodeForSession(e){const n=await pr(this.storage,`${this.storageKey}-code-verifier`),[i,s]=(n??"").split("/");try{const{data:l,error:u}=await pe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:yn});if(await Rn(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!l||!l.session||!l.user?{data:{user:null,session:null,redirectType:null},error:new Ao}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign(Object.assign({},l),{redirectType:s??null}),error:u})}catch(l){if(ce(l))return{data:{user:null,session:null,redirectType:null},error:l};throw l}}async signInWithIdToken(e){try{const{options:n,provider:i,token:s,access_token:l,nonce:u}=e,h=await pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:s,access_token:l,nonce:u,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:yn}),{data:f,error:p}=h;return p?{data:{user:null,session:null},error:p}:!f||!f.session||!f.user?{data:{user:null,session:null},error:new Ao}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:f,error:p})}catch(n){if(ce(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,i,s,l,u;try{if("email"in e){const{email:h,options:f}=e;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await Gr(this.storage,this.storageKey));const{error:x}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},create_user:(i=f==null?void 0:f.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:v},redirectTo:f==null?void 0:f.emailRedirectTo});return{data:{user:null,session:null},error:x}}if("phone"in e){const{phone:h,options:f}=e,{data:p,error:v}=await pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},create_user:(l=f==null?void 0:f.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},channel:(u=f==null?void 0:f.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:v}}throw new Io("You must provide either an email or phone number.")}catch(h){if(ce(h))return{data:{user:null,session:null},error:h};throw h}}async verifyOtp(e){var n,i;try{let s,l;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,l=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:u,error:h}=await pe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:s,xform:yn});if(h)throw h;if(!u)throw new Error("An error occurred on token verification.");const f=u.session,p=u.user;return f!=null&&f.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),{data:{user:p,session:f},error:null}}catch(s){if(ce(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,i,s;try{let l=null,u=null;return this.flowType==="pkce"&&([l,u]=await Gr(this.storage,this.storageKey)),await pe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:u}),headers:this.headers,xform:Qw})}catch(l){if(ce(l))return{data:null,error:l};throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;if(i)throw i;if(!n)throw new Dn;const{error:s}=await pe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(ce(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:i,type:s,options:l}=e,{error:u}=await pe(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:s,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in e){const{phone:i,type:s,options:l}=e,{data:u,error:h}=await pe(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:s,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h}}throw new Io("You must provide either an email or phone number and a type")}catch(n){if(ce(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await pr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<tc:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const u=await pr(this.userStorage,this.storageKey+"-user");u!=null&&u.user?e.user=u.user:e.user=ic()}if(this.storage.isServer&&e.user){let u=this.suppressGetSessionWarning;e=new Proxy(e,{get:(f,p,v)=>(!u&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(f,p,v))})}return{data:{session:e},error:null}}const{session:s,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{session:null},error:l}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Zn}):await this._useSession(async n=>{var i,s,l;const{data:u,error:h}=n;if(h)throw h;return!(!((i=u.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Dn}:await pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(s=u.session)===null||s===void 0?void 0:s.access_token)!==null&&l!==void 0?l:void 0,xform:Zn})})}catch(n){if(ce(n))return jw(n)&&(await this._removeSession(),await Rn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async i=>{const{data:s,error:l}=i;if(l)throw l;if(!s.session)throw new Dn;const u=s.session;let h=null,f=null;this.flowType==="pkce"&&e.email!=null&&([h,f]=await Gr(this.storage,this.storageKey));const{data:p,error:v}=await pe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:f}),jwt:u.access_token,xform:Zn});if(v)throw v;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(i){if(ce(i))return{data:{user:null},error:i};throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Dn;const n=Date.now()/1e3;let i=n,s=!0,l=null;const{payload:u}=rc(e.access_token);if(u.exp&&(i=u.exp,s=i<=n),s){const{session:h,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return{data:{user:null,session:null},error:f};if(!h)return{data:{user:null,session:null},error:null};l=h}else{const{data:h,error:f}=await this._getUser(e.access_token);if(f)throw f;l={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return{data:{user:l.user,session:l},error:null}}catch(n){if(ce(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var i;if(!e){const{data:u,error:h}=n;if(h)throw h;e=(i=u.session)!==null&&i!==void 0?i:void 0}if(!(e!=null&&e.refresh_token))throw new Dn;const{session:s,error:l}=await this._callRefreshToken(e.refresh_token);return l?{data:{user:null,session:null},error:l}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ce(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Wt())throw new Mo("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Mo(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Uf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Mo("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Uf("No code detected.");const{data:_,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:s,access_token:l,refresh_token:u,expires_in:h,expires_at:f,token_type:p}=e;if(!l||!h||!u||!p)throw new Mo("No session defined in URL");const v=Math.round(Date.now()/1e3),x=parseInt(h);let b=v+x;f&&(b=parseInt(f));const N=b-v;N*1e3<=Xr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${N}s, should have been closer to ${x}s`);const k=b-x;v-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,b,v):v-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,b,v);const{data:S,error:O}=await this._getUser(l);if(O)throw O;const g={provider_token:i,provider_refresh_token:s,access_token:l,expires_in:x,expires_at:b,refresh_token:u,token_type:p,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(i){if(ce(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await pr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:s,error:l}=n;if(l)return{error:l};const u=(i=s.session)===null||i===void 0?void 0:i.access_token;if(u){const{error:h}=await this.admin.signOut(u,e);if(h&&!(bw(h)&&(h.status===404||h.status===401||h.status===403)))return{error:h}}return e!=="others"&&(await this._removeSession(),await Rn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=Aw(),i={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async n=>{var i,s;try{const{data:{session:l},error:u}=n;if(u)throw u;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,n={}){let i=null,s=null;this.flowType==="pkce"&&([i,s]=await Gr(this.storage,this.storageKey,!0));try{return await pe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if(ce(l))return{data:null,error:l};throw l}}async getUserIdentities(){var e;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:i,error:s}=await this._useSession(async l=>{var u,h,f,p,v;const{data:x,error:b}=l;if(b)throw b;const N=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await pe(this.fetch,"GET",N,{headers:this.headers,jwt:(v=(p=x.session)===null||p===void 0?void 0:p.access_token)!==null&&v!==void 0?v:void 0})});if(s)throw s;return Wt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:e.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(ce(i))return{data:{provider:e.provider,url:null},error:i};throw i}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var i,s;const{data:l,error:u}=n;if(u)throw u;return await pe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(ce(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await Rw(async s=>(s>0&&await zw(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await pe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:yn})),(s,l)=>{const u=200*Math.pow(2,s);return l&&nc(l)&&Date.now()+u-i<Xr})}catch(i){if(this._debug(n,"error",i),ce(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",i),Wt()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const s=await pr(this.storage,this.storageKey);if(s&&this.userStorage){let u=await pr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:s.user},await Yr(this.userStorage,this.storageKey+"-user",u)),s.user=(e=u==null?void 0:u.user)!==null&&e!==void 0?e:ic()}else if(s&&!s.user&&!s.user){const u=await pr(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(s.user=u.user,await Rn(this.storage,this.storageKey+"-user"),await Yr(this.storage,this.storageKey,s)):s.user=ic()}if(this._debug(i,"session from storage",s),!this._isValidSession(s)){this._debug(i,"session is not valid"),s!==null&&await this._removeSession();return}const l=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<tc;if(this._debug(i,`session has${l?"":" not"} expired with margin of ${tc}s`),l){if(this.autoRefreshToken&&s.refresh_token){const{error:u}=await this._callRefreshToken(s.refresh_token);u&&(console.error(u),nc(u)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:h}=await this._getUser(s.access_token);!h&&(u!=null&&u.user)?(s.user=u.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(i,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(i,"error",s),console.error(s);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var n,i;if(!e)throw new Dn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Za;const{data:l,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!l.session)throw new Dn;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const h={session:l.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(l){if(this._debug(s,"error",l),ce(l)){const u={session:null,error:l};return nc(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(l),l}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,i=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:n});const l=[],u=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,n)}catch(f){l.push(f)}});if(await Promise.all(u),l.length>0){for(let h=0;h<l.length;h+=1)console.error(l[h]);throw l[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await Yr(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const l=Wf(s);await Yr(this.storage,this.storageKey,l)}else{const s=Wf(n);await Yr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Rn(this.storage,this.storageKey),await Rn(this.storage,this.storageKey+"-code-verifier"),await Rn(this.storage,this.storageKey+"-user"),this.userStorage&&await Rn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Wt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Xr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((i.expires_at*1e3-e)/Xr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Xr}ms, refresh threshold is ${uu} ticks`),s<=uu&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Zg)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Wt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,i){const s=[`provider=${encodeURIComponent(n)}`];if(i!=null&&i.redirectTo&&s.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&s.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[l,u]=await Gr(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(u)}`});s.push(h.toString())}if(i!=null&&i.queryParams){const l=new URLSearchParams(i.queryParams);s.push(l.toString())}return i!=null&&i.skipBrowserRedirect&&s.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var i;const{data:s,error:l}=n;return l?{data:null,error:l}:await pe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(ce(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var i,s;const{data:l,error:u}=n;if(u)return{data:null,error:u};const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:f,error:p}=await pe(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(i=l==null?void 0:l.session)===null||i===void 0?void 0:i.access_token});return p?{data:null,error:p}:(e.factorType==="totp"&&(!((s=f==null?void 0:f.totp)===null||s===void 0)&&s.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),{data:f,error:null})})}catch(n){if(ce(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:s,error:l}=n;if(l)return{data:null,error:l};const{data:u,error:h}=await pe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:h})})}catch(n){if(ce(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:s,error:l}=n;return l?{data:null,error:l}:await pe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(ce(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:i}=await this._challenge({factorId:e.factorId});return i?{data:null,error:i}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const i=(e==null?void 0:e.factors)||[],s=i.filter(u=>u.factor_type==="totp"&&u.status==="verified"),l=i.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:i,totp:s,phone:l},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,i;const{data:{session:s},error:l}=e;if(l)return{data:null,error:l};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=rc(s.access_token);let h=null;u.aal&&(h=u.aal);let f=h;((i=(n=s.user.factors)===null||n===void 0?void 0:n.filter(x=>x.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(f="aal2");const v=u.amr||[];return{data:{currentLevel:h,nextLevel:f,currentAuthenticationMethods:v},error:null}}))}async fetchJwk(e,n={keys:[]}){let i=n.keys.find(h=>h.kid===e);if(i)return i;const s=Date.now();if(i=this.jwks.keys.find(h=>h.kid===e),i&&this.jwks_cached_at+xw>s)return i;const{data:l,error:u}=await pe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=s,i=l.keys.find(h=>h.kid===e),!i)?null:i}async getClaims(e,n={}){try{let i=e;if(!i){const{data:N,error:k}=await this.getSession();if(k||!N.session)return{data:null,error:k};i=N.session.access_token}const{header:s,payload:l,signature:u,raw:{header:h,payload:f}}=rc(i);n!=null&&n.allowExpired||Zw(l.exp);const p=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!p){const{error:N}=await this.getUser(i);if(N)throw N;return{data:{claims:l,header:s,signature:u},error:null}}const v=Hw(s.alg),x=await crypto.subtle.importKey("jwk",p,v,!0,["verify"]);if(!await crypto.subtle.verify(v,x,u,Tw(`${h}.${f}`)))throw new fu("Invalid JWT signature");return{data:{claims:l,header:s,signature:u},error:null}}catch(i){if(ce(i))return{data:null,error:i};throw i}}}Rs.nextInstanceID=0;const ab=Rs;class lb extends ab{constructor(e){super(e)}}var cb=function(t,e,n,i){function s(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function h(v){try{p(i.next(v))}catch(x){u(x)}}function f(v){try{p(i.throw(v))}catch(x){u(x)}}function p(v){v.done?l(v.value):s(v.value).then(h,f)}p((i=i.apply(t,e||[])).next())})};class ub{constructor(e,n,i){var s,l,u;this.supabaseUrl=e,this.supabaseKey=n;const h=pw(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",h),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",h),this.storageUrl=new URL("storage/v1",h),this.functionsUrl=new URL("functions/v1",h);const f=`sb-${h.hostname.split(".")[0]}-auth-token`,p={db:sw,realtime:aw,auth:Object.assign(Object.assign({},ow),{storageKey:f}),global:iw},v=mw(i??{},p);this.storageKey=(s=v.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(l=v.global.headers)!==null&&l!==void 0?l:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(x,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=v.auth)!==null&&u!==void 0?u:{},this.headers,v.global.fetch),this.fetch=dw(n,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.rest=new Nx(new URL("rest/v1",h).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new tw(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new rx(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},i={}){return this.rest.rpc(e,n,i)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return cb(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(n=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:s,userStorage:l,storageKey:u,flowType:h,lock:f,debug:p},v,x){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new lb({url:this.authUrl.href,headers:Object.assign(Object.assign({},b),v),storageKey:u,autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:s,userStorage:l,flowType:h,lock:f,debug:p,fetch:x,hasCustomAuthorizationHeader:Object.keys(this.headers).some(N=>N.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Fx(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,i)=>{this._handleTokenChanged(n,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(e,n,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const db=(t,e,n)=>new ub(t,e,n);function hb(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}hb()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const wd="https://wlaretbgjoadphjebpja.supabase.co",Ha="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndsYXJldGJnam9hZHBoamVicGphIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg2NTg3MTMsImV4cCI6MjA3NDIzNDcxM30.2ru18qBqC_wrwxgM-cQFmtIO2F_O8Z5UFStj_MDQLkE",fb={url:"Configured",key:"Configured",env:"production",urlPreview:wd.substring(0,30)+"...",keyPreview:Ha.substring(0,20)+"..."};console.log("🔧 Supabase Config Check:",fb);console.log("✅ Supabase configuration found");const Qf=t=>t&&(t.includes("placeholder")||t.includes("your_")||t.includes("sua_")||t==="https://placeholder.supabase.co"||t==="placeholder-key"),Hg=Qf(wd)||Qf(Ha);Hg&&console.error("❌ Detectadas variáveis placeholder! Configure com valores reais do Supabase.");const G=db(wd,Ha,{auth:{persistSession:!0,autoRefreshToken:!0},global:{headers:{"X-Client-Info":"supabase-js-web"}}}),mu=()=>!!Ha&&!Hg,mb=async()=>{try{const{data:t,error:e}=await G.from("license_processes").select("count").limit(1);return!e}catch(t){return console.warn("Supabase connection test failed:",t),!1}},Wg=z.createContext(void 0);function pb({children:t}){const[e,n]=z.useState(null),[i,s]=z.useState(null),[l,u]=z.useState(!0),[h]=z.useState(mu()),[f,p]=z.useState(!1);z.useEffect(()=>{let k=!0;(async()=>{if(!h){k&&(p(!1),u(!1));return}const g=await mb();if(k&&p(g),!g){k&&(s(null),n(null),u(!1));return}try{const{data:{session:_},error:w}=await G.auth.getSession();k&&(w&&console.warn("Auth session error:",w.message),s(_),n((_==null?void 0:_.user)??null),u(!1))}catch(_){console.warn("Auth initialization error:",_),k&&(s(null),n(null),u(!1))}})();let O=null;if(h&&f){const{data:{subscription:g}}=G.auth.onAuthStateChange(async(_,w)=>{k&&(s(w),n((w==null?void 0:w.user)??null),u(!1))});O=g}return()=>{k=!1,O&&O.unsubscribe()}},[h,f]);const N={user:e,session:i,loading:l,isConfigured:h,isSupabaseReady:f,signIn:async(k,S)=>{if(!h||!f)throw new Error("Sistema não configurado. Entre em contato com o administrador.");const{data:O,error:g}=await G.auth.signInWithPassword({email:k,password:S});if(g)throw g.message.includes("Invalid login credentials")?new Error("Email ou senha incorretos. Verifique suas credenciais e tente novamente."):g.message.includes("Email not confirmed")?new Error("Email não confirmado. Verifique sua caixa de entrada e confirme seu email antes de fazer login."):g.message.includes("Too many requests")?new Error("Muitas tentativas de login. Aguarde alguns minutos e tente novamente."):new Error(`Erro no login: ${g.message}`)},signUp:async(k,S,O,g)=>{if(!h||!f)throw new Error("Sistema não configurado. Entre em contato com o administrador.");const{data:_,error:w}=await G.auth.signUp({email:k,password:S,options:{data:{name:O,role:g},emailRedirectTo:`${window.location.origin}/auth/callback`}});if(w)throw w.message.includes("User already registered")?new Error("Este email já está cadastrado. Tente fazer login ou use outro email."):w.message.includes("Invalid email")?new Error("Email inválido. Verifique o formato do email."):w.message.includes("Password should be at least")?new Error("A senha deve ter pelo menos 6 caracteres."):new Error(`Erro no cadastro: ${w.message}`);if(_.user&&!_.user.email_confirmed_at&&!_.session)throw new Error("Cadastro realizado! Verifique seu email para confirmar a conta antes de fazer login.")},signOut:async()=>{const{error:k}=await G.auth.signOut();if(k)throw k},userMetadata:e==null?void 0:e.user_metadata};return a.jsx(Wg.Provider,{value:N,children:t})}function bd(){const t=z.useContext(Wg);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}class Un{static async getProcessCollaborators(e){const{data:n,error:i}=await G.from("process_collaborators").select(`
        *,
        user_profiles(name, email, organization)
      `).eq("process_id",e).eq("status","accepted").order("invited_at",{ascending:!1});if(i)throw console.error("Error fetching collaborators:",i),i;return n||[]}static async inviteCollaborator(e,n,i){var h;const{data:s}=await G.from("process_collaborators").select("id").eq("process_id",e).eq("user_id",(h=(await G.from("user_profiles").select("user_id").eq("email",n).single()).data)==null?void 0:h.user_id).single();if(s)throw new Error("Usuário já é colaborador deste processo");const{data:l,error:u}=await G.from("collaboration_invites").insert({process_id:e,invited_email:n,permission_level:i}).select().single();if(u)throw console.error("Error creating invite:",u),u;return await this.logActivity(e,"collaborator_invited",`Colaborador convidado: ${n}`),l}static async acceptInvite(e){const{data:{user:n}}=await G.auth.getUser();if(!n)throw new Error("User not authenticated");const{data:i,error:s}=await G.from("collaboration_invites").select("*").eq("id",e).eq("invited_email",n.email).eq("status","pending").single();if(s||!i)throw new Error("Convite não encontrado ou expirado");if(new Date(i.expires_at)<new Date)throw new Error("Convite expirado");const{error:l}=await G.from("process_collaborators").insert({process_id:i.process_id,user_id:n.id,invited_by:i.invited_by,permission_level:i.permission_level,status:"accepted",accepted_at:new Date().toISOString()});if(l)throw console.error("Error creating collaboration:",l),l;await G.from("collaboration_invites").update({status:"accepted"}).eq("id",e),await this.logActivity(i.process_id,"collaborator_joined",`${n.email} aceitou o convite`)}static async removeCollaborator(e,n){const{error:i}=await G.from("process_collaborators").update({status:"revoked"}).eq("process_id",e).eq("user_id",n);if(i)throw console.error("Error removing collaborator:",i),i;await this.logActivity(e,"collaborator_removed","Colaborador removido")}static async updateCollaboratorPermission(e,n,i){const{error:s}=await G.from("process_collaborators").update({permission_level:i}).eq("process_id",e).eq("user_id",n);if(s)throw console.error("Error updating collaborator permission:",s),s;await this.logActivity(e,"permission_changed",`Permissão alterada para: ${i}`)}static async getUserInvites(){const{data:{user:e}}=await G.auth.getUser();if(!e)throw new Error("User not authenticated");const{data:n,error:i}=await G.from("collaboration_invites").select("*").eq("invited_email",e.email).eq("status","pending").gt("expires_at",new Date().toISOString()).order("created_at",{ascending:!1});if(i)throw console.error("Error fetching invites:",i),i;return n||[]}static async getActivityLog(e){const{data:n,error:i}=await G.from("activity_logs").select(`
        *,
        user_profiles(name, email)
      `).eq("process_id",e).order("created_at",{ascending:!1}).limit(50);if(i)throw console.error("Error fetching activity log:",i),i;return n||[]}static async getUserPermission(e){const{data:{user:n}}=await G.auth.getUser();if(!n)return null;const{data:i}=await G.from("license_processes").select("user_id").eq("id",e).single();if((i==null?void 0:i.user_id)===n.id)return"owner";const{data:s}=await G.from("process_collaborators").select("permission_level").eq("process_id",e).eq("user_id",n.id).eq("status","accepted").single();return(s==null?void 0:s.permission_level)||null}static async logActivity(e,n,i,s){const{error:l}=await G.rpc("log_activity",{p_process_id:e,p_action:n,p_description:i,p_metadata:s});l&&console.error("Error logging activity:",l)}static async getCollaboratedProcesses(){const{data:{user:e}}=await G.auth.getUser();if(!e)throw new Error("User not authenticated");const{data:n,error:i}=await G.from("license_processes").select(`
        *,
        companies(*),
        process_collaborators!inner(permission_level)
      `).eq("process_collaborators.user_id",e.id).eq("process_collaborators.status","accepted").order("created_at",{ascending:!1});if(i)throw console.error("Error fetching collaborated processes:",i),i;return n||[]}}class zo{static async getProcesses(e){var n,i;try{if(!mu())return console.warn("Supabase not configured, returning empty processes"),[];const{data:{user:s},error:l}=await G.auth.getUser();if(l)return console.warn("Auth error (likely not configured):",l.message),l.message.includes("Failed to fetch")||l.message.includes("fetch")?(console.warn("Connection failed, returning empty processes"),[]):[];if(!s)return console.warn("User not authenticated, returning empty processes"),[];console.log("🔒 Loading processes for user:",s.id.substring(0,8)+"...");let u=G.from("license_processes").select(`
          *,
          companies(*)
        `).eq("user_id",s.id).order("created_at",{ascending:!1}),h=G.from("license_processes").select(`
          *,
          companies(*),
          process_collaborators!inner(permission_level)
        `).eq("process_collaborators.user_id",s.id).eq("process_collaborators.status","accepted").order("created_at",{ascending:!1});e!=null&&e.status&&e.status!=="all"&&(u=u.eq("status",e.status),h=h.eq("status",e.status)),e!=null&&e.licenseType&&(u=u.eq("license_type",e.licenseType),h=h.eq("license_type",e.licenseType));const[f,p]=await Promise.all([u,h]);if(f.error){if(console.error("Error fetching owned processes:",f.error),f.error.message.includes("Failed to fetch")||f.error.message.includes("fetch"))return console.warn("Database connection failed, returning empty processes"),[];throw new Error("Erro ao carregar processos próprios: "+f.error.message)}p.error&&(console.error("Error fetching collaborated processes:",p.error),console.warn("Could not load collaborated processes, continuing with owned only"));const v=f.data||[],x=p.data||[],b=v.map(S=>({...S,isOwner:!0})),N=x.map(S=>({...S,isOwner:!1})),k=[...b];if(x.forEach(S=>{v.find(O=>O.id===S.id)||k.push({...S,isOwner:!1})}),console.log("✅ Loaded",v.length,"owned +",x.length,"collaborated processes"),e!=null&&e.search){const S=e.search.toLowerCase();return k.filter(O=>{var g;return((g=O.companies)==null?void 0:g.name.toLowerCase().includes(S))||O.activity.toLowerCase().includes(S)})}return k}catch(s){if(console.error("ProcessService.getProcesses error:",s),(n=s.message)!=null&&n.includes("Failed to fetch")||(i=s.message)!=null&&i.includes("fetch"))return console.warn("Connection error in getProcesses, returning empty array"),[];throw s}}static async getProcessById(e){const{data:{user:n}}=await G.auth.getUser();if(!n)throw new Error("User not authenticated");const{data:i,error:s}=await G.from("license_processes").select(`
        *,
        companies(*)
      `).eq("id",e).eq("user_id",n.id).single();if(s)throw console.error("Error fetching process:",s),s;return i}static async createProcess(e){const{data:{user:n}}=await G.auth.getUser();if(!n)throw new Error("User not authenticated");let i=e.companyId;if(!i){const{data:p,error:v}=await G.from("companies").insert({user_id:n.id,name:e.company,cnpj:e.cnpj,email:e.email||n.email||"",city:e.city,state:e.state,address:e.location}).select().single();if(v)throw console.error("Error creating company:",v),v;i=p.id}const s=e.licenseType==="LO"?36:6,l=new Date;l.setMonth(l.getMonth()+s);const u={user_id:n.id,company_id:i,license_type:e.licenseType,activity:e.activity,municipality:e.city,project_description:e.description,status:"submitted",progress:0,submit_date:new Date().toISOString().split("T")[0],expected_date:l.toISOString().split("T")[0]},{data:h,error:f}=await G.from("license_processes").insert(u).select().single();if(f)throw console.error("Error creating process:",f),f;return h}static async updateProcess(e,n){const{data:{user:i}}=await G.auth.getUser();if(!i)throw new Error("User not authenticated");console.log("ProcessService.updateProcess called with:",{id:e,updates:n,userId:i.id});const s={...n,updated_at:new Date().toISOString()};console.log("Update data prepared:",s);const{data:l,error:u}=await G.from("license_processes").update(s).eq("id",e).eq("user_id",i.id).select().single();if(u)throw console.error("Error updating process:",u),console.error("Error details:",{id:e,userId:i.id,updateData:s}),n.status&&await Un.logActivity(e,"status_changed",`Status alterado para: ${n.status}`),u;if(!l)throw new Error("No process found with the given ID for this user");return console.log("Process updated successfully:",l),l}static async deleteProcess(e){const{data:{user:n}}=await G.auth.getUser();if(!n)throw new Error("User not authenticated");const{error:i}=await G.from("license_processes").delete().eq("id",e).eq("user_id",n.id);if(i)throw console.error("Error deleting process:",i),i}static async getProcessStats(){var e,n;try{if(!mu())return console.warn("Supabase not configured, returning default stats"),{total:0,pending:0,analysis:0,approved:0,rejected:0,expired:0};const{data:{user:i},error:s}=await G.auth.getUser();if(s)return console.warn("Auth error in getProcessStats (likely not configured):",s.message),s.message.includes("Failed to fetch")||s.message.includes("fetch")?(console.warn("Connection failed, returning default stats"),{total:0,pending:0,analysis:0,approved:0,rejected:0,expired:0}):{total:0,pending:0,analysis:0,approved:0,rejected:0,expired:0};if(!i)return console.warn("User not authenticated, returning default stats"),{total:0,pending:0,analysis:0,approved:0,rejected:0,expired:0};const{data:l,error:u}=await G.from("license_processes").select("status").eq("user_id",i.id);if(u){if(console.error("Error fetching process stats:",u),u.message.includes("Failed to fetch")||u.message.includes("fetch"))return console.warn("Database connection failed, returning default stats"),{total:0,pending:0,analysis:0,approved:0,rejected:0,expired:0};throw new Error("Erro ao carregar estatísticas: "+u.message)}const h=l||[];return{total:h.length,pending:h.filter(p=>p.status==="submitted").length,analysis:h.filter(p=>p.status==="em_analise").length,approved:h.filter(p=>p.status==="aprovado").length,rejected:h.filter(p=>p.status==="rejeitado").length,expired:0}}catch(i){if(console.error("ProcessService.getProcessStats error:",i),(e=i.message)!=null&&e.includes("Failed to fetch")||(n=i.message)!=null&&n.includes("fetch"))return console.warn("Connection error in getProcessStats, returning default stats"),{total:0,pending:0,analysis:0,approved:0,rejected:0,expired:0};throw i}}}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ie=(t,e)=>{const n=z.forwardRef(({color:i="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:u,className:h="",children:f,...p},v)=>z.createElement("svg",{ref:v,...gb,width:s,height:s,stroke:i,strokeWidth:u?Number(l)*24/Number(s):l,className:["lucide",`lucide-${vb(t)}`,h].join(" "),...p},[...e.map(([x,b])=>z.createElement(x,b)),...Array.isArray(f)?f:[f]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=ie("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vg=ie("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=ie("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xf=ie("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=ie("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _b=ie("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yf=ie("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xb=ie("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=ie("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=ie("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=ie("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=ie("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wb=ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=ie("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=ie("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vu=ie("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=ie("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=ie("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const em=ie("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=ie("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jb=ie("GripHorizontal",[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tm=ie("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kb=ie("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nm=ie("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=ie("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nb=ie("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=ie("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=ie("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=ie("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rm=ie("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eb=ie("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const im=ie("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=ie("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sm=ie("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=ie("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=ie("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hi=ie("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=ie("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qg=ie("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=ie("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lb=ie("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=ie("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=ie("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ob=ie("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=ie("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Ab({isOpen:t,onClose:e,onSubmit:n}){const[i,s]=z.useState({licenseType:"LP",company:"",cnpj:"",activity:"",location:"",state:"",city:"",description:"",estimatedValue:"",area:"",coordinates:"",environmentalImpact:"baixo",documents:[]}),[l,u]=z.useState(1),h=4;if(!t)return null;const f=(g,_)=>{s(w=>({...w,[g]:_}))},p=g=>{g&&s(_=>({..._,documents:[..._.documents,...Array.from(g)]}))},v=async g=>{g.preventDefault(),await n(i),e(),s({licenseType:"LP",company:"",cnpj:"",activity:"",location:"",state:"",city:"",description:"",estimatedValue:"",area:"",coordinates:"",environmentalImpact:"baixo",documents:[]}),u(1)},x=()=>{l<h&&u(l+1)},b=()=>{l>1&&u(l-1)},N=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Informações Básicas"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Licença *"}),a.jsxs("select",{value:i.licenseType,onChange:g=>f("licenseType",g.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",required:!0,children:[a.jsx("option",{value:"LP",children:"Licença Prévia (LP)"}),a.jsx("option",{value:"LI",children:"Licença de Instalação (LI)"}),a.jsx("option",{value:"LO",children:"Licença de Operação (LO)"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Impacto Ambiental *"}),a.jsxs("select",{value:i.environmentalImpact,onChange:g=>f("environmentalImpact",g.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",required:!0,children:[a.jsx("option",{value:"baixo",children:"Baixo Impacto"}),a.jsx("option",{value:"medio",children:"Médio Impacto"}),a.jsx("option",{value:"alto",children:"Alto Impacto"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Razão Social da Empresa *"}),a.jsx("input",{type:"text",value:i.company,onChange:g=>f("company",g.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Digite a razão social da empresa",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CNPJ *"}),a.jsx("input",{type:"text",value:i.cnpj,onChange:g=>f("cnpj",g.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"00.000.000/0000-00",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Atividade/Empreendimento *"}),a.jsx("input",{type:"text",value:i.activity,onChange:g=>f("activity",g.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Descreva a atividade principal",required:!0})]})]}),k=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Localização do Empreendimento"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado *"}),a.jsxs("select",{value:i.state,onChange:g=>f("state",g.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",required:!0,children:[a.jsx("option",{value:"",children:"Selecione o estado"}),a.jsx("option",{value:"AC",children:"Acre"}),a.jsx("option",{value:"AL",children:"Alagoas"}),a.jsx("option",{value:"AP",children:"Amapá"}),a.jsx("option",{value:"AM",children:"Amazonas"}),a.jsx("option",{value:"BA",children:"Bahia"}),a.jsx("option",{value:"CE",children:"Ceará"}),a.jsx("option",{value:"DF",children:"Distrito Federal"}),a.jsx("option",{value:"ES",children:"Espírito Santo"}),a.jsx("option",{value:"GO",children:"Goiás"}),a.jsx("option",{value:"MA",children:"Maranhão"}),a.jsx("option",{value:"MT",children:"Mato Grosso"}),a.jsx("option",{value:"MS",children:"Mato Grosso do Sul"}),a.jsx("option",{value:"MG",children:"Minas Gerais"}),a.jsx("option",{value:"PA",children:"Pará"}),a.jsx("option",{value:"PB",children:"Paraíba"}),a.jsx("option",{value:"PR",children:"Paraná"}),a.jsx("option",{value:"PE",children:"Pernambuco"}),a.jsx("option",{value:"PI",children:"Piauí"}),a.jsx("option",{value:"RJ",children:"Rio de Janeiro"}),a.jsx("option",{value:"RN",children:"Rio Grande do Norte"}),a.jsx("option",{value:"RS",children:"Rio Grande do Sul"}),a.jsx("option",{value:"RO",children:"Rondônia"}),a.jsx("option",{value:"RR",children:"Roraima"}),a.jsx("option",{value:"SC",children:"Santa Catarina"}),a.jsx("option",{value:"SP",children:"São Paulo"}),a.jsx("option",{value:"SE",children:"Sergipe"}),a.jsx("option",{value:"TO",children:"Tocantins"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Município *"}),a.jsx("input",{type:"text",value:i.city,onChange:g=>f("city",g.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Digite o município",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Endereço Completo *"}),a.jsx("textarea",{value:i.location,onChange:g=>f("location",g.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",rows:3,placeholder:"Endereço completo do empreendimento",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Área Total (hectares)"}),a.jsx("input",{type:"number",value:i.area,onChange:g=>f("area",g.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"0.00",step:"0.01"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Coordenadas GPS"}),a.jsx("input",{type:"text",value:i.coordinates,onChange:g=>f("coordinates",g.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Latitude, Longitude"})]})]})]}),S=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Detalhes do Projeto"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrição Detalhada do Empreendimento *"}),a.jsx("textarea",{value:i.description,onChange:g=>f("description",g.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",rows:5,placeholder:"Descreva detalhadamente o empreendimento, suas características, processos produtivos, tecnologias utilizadas, etc.",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor Estimado do Investimento (R$)"}),a.jsx("input",{type:"number",value:i.estimatedValue,onChange:g=>f("estimatedValue",g.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"0.00",step:"0.01"})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Informações Importantes"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsx("li",{children:"• Licença Prévia (LP): Concedida na fase preliminar do planejamento"}),a.jsx("li",{children:"• Licença de Instalação (LI): Autoriza a instalação do empreendimento"}),a.jsx("li",{children:"• Licença de Operação (LO): Autoriza a operação da atividade"})]})]})]}),O=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Documentação"}),a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-green-400 transition-colors",children:[a.jsx(Nn,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-lg font-medium text-gray-900",children:"Anexar Documentos"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Arraste e solte os arquivos aqui ou clique para selecionar"}),a.jsx("input",{type:"file",multiple:!0,onChange:g=>p(g.target.files),className:"hidden",id:"file-upload",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png"}),a.jsx("label",{htmlFor:"file-upload",className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 cursor-pointer transition-colors",children:"Selecionar Arquivos"})]})]}),i.documents.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:"Documentos Anexados:"}),i.documents.map((g,_)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(rt,{className:"w-5 h-5 text-gray-400 mr-2"}),a.jsx("span",{className:"text-sm text-gray-900",children:g.name})]}),a.jsx("button",{onClick:()=>{s(w=>({...w,documents:w.documents.filter((C,T)=>T!==_)}))},className:"text-red-500 hover:text-red-700",children:a.jsx(mt,{className:"w-4 h-4"})})]},_))]}),a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-yellow-900 mb-2",children:"Documentos Obrigatórios"}),a.jsxs("ul",{className:"text-sm text-yellow-800 space-y-1",children:[a.jsx("li",{children:"• Requerimento de licença ambiental"}),a.jsx("li",{children:"• Certidão da Prefeitura Municipal"}),a.jsx("li",{children:"• Cópia da publicação do pedido de licença"}),a.jsx("li",{children:"• Estudos ambientais (conforme o caso)"}),a.jsx("li",{children:"• Planta de situação e localização"}),a.jsx("li",{children:"• Memorial descritivo do empreendimento"})]})]})]});return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Novo Processo de Licenciamento"}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Passo ",l," de ",h]})]}),a.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(mt,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"px-6 py-4 bg-gray-50",children:a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${l/h*100}%`}})})}),a.jsxs("form",{onSubmit:v,className:"flex flex-col h-full",children:[a.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[l===1&&N(),l===2&&k(),l===3&&S(),l===4&&O()]}),a.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50",children:[a.jsx("button",{type:"button",onClick:b,disabled:l===1,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Anterior"}),a.jsx("div",{className:"flex space-x-3",children:l<h?a.jsx("button",{type:"button",onClick:x,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Próximo"}):a.jsx("button",{type:"submit",className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Criar Processo"})})]})]})]})})}class fi{static async getProcessDocuments(e){if(!e)throw new Error("Process ID is required");const{data:n,error:i}=await G.from("process_documents").select("*").eq("process_id",e).order("uploaded_at",{ascending:!1});if(i)throw console.error("Error fetching documents:",i),console.error("Error details:",{error:i,processId:e}),i;return console.log("Documents loaded:",(n==null?void 0:n.length)||0),n.map(s=>({...s,users:{id:"user",name:"Usuário",email:"usuario@email.com",avatar:"U"}}))}static async uploadDocument(e,n,i){if(console.log("Uploading document:",{processId:e,fileName:n.name,fileSize:n.size,fileType:n.type}),!e)throw new Error("Process ID is required");if(!n)throw new Error("File is required");if(!i)throw new Error("User ID is required");const s=`${i}/${e}/${Date.now()}-${n.name}`;try{const{data:l,error:u}=await G.storage.from("documents").upload(s,n,{cacheControl:"3600",upsert:!1});if(u)throw console.error("Storage upload error:",u),new Error(`Erro no upload: ${u.message}`);console.log("File uploaded to storage:",l.path);const h={user_id:i,process_id:e,name:n.name,file_size:n.size,file_type:n.type||"application/octet-stream",file_path:l.path,uploaded_at:new Date().toISOString()},{data:f,error:p}=await G.from("process_documents").insert(h).select().single();if(p)throw await G.storage.from("documents").remove([l.path]),console.error("Error saving document metadata:",p),p;return console.log("Document uploaded successfully:",f),f}catch(l){throw console.error("Upload error:",l),l}}static async deleteDocument(e){if(!e)throw new Error("Document ID is required for deletion");console.log("🗑️ Starting document deletion for ID:",e);const{data:{user:n},error:i}=await G.auth.getUser();if(i||!n)throw console.error("❌ User not authenticated:",i),new Error("Usuário não autenticado");console.log("✅ User authenticated:",n.id);const{data:s,error:l}=await G.from("process_documents").select("id, name, user_id, file_path").eq("id",e).single();if(l)throw console.error("❌ Error checking document existence:",l),l.code==="PGRST116"?new Error("Documento não encontrado no banco de dados"):new Error(`Erro ao verificar documento: ${l.message}`);if(!s)throw console.error("❌ Document not found in database:",e),new Error("Documento não encontrado no banco de dados");if(console.log("✅ Document found:",{id:s.id,name:s.name,owner:s.user_id,currentUser:n.id,filePath:s.file_path}),s.user_id!==n.id)throw console.error("❌ User does not own this document"),new Error("Você não tem permissão para excluir este documento");try{if(s.file_path){console.log("🗑️ Deleting file from storage:",s.file_path);const{error:p}=await G.storage.from("documents").remove([s.file_path]);p?console.error("❌ Error deleting from storage:",p):console.log("✅ File deleted from storage")}console.log("🔄 Attempting to delete document from database...");const{error:u}=await G.from("process_documents").delete().eq("id",e);if(u)throw console.error("❌ Error deleting document from database:",u),new Error(`Erro ao excluir documento: ${u.message}`);console.log("✅ Delete operation completed, verifying...");const{data:h,error:f}=await G.from("process_documents").select("id").eq("id",e).maybeSingle();if(f)throw console.error("❌ Error verifying deletion:",f),new Error(`Erro ao verificar exclusão: ${f.message}`);if(h)throw console.error("❌ Document still exists after deletion attempt:",e),new Error("Documento não foi excluído do banco de dados");console.log("✅ Document successfully deleted and verified:",e)}catch(u){throw console.error("❌ Error in deletion process:",u),u}}static async downloadDocument(e){try{if(console.log("Starting download for:",e),e.file_path){const{data:n,error:i}=await G.storage.from("documents").download(e.file_path);if(i)throw console.error("Storage download error:",i),new Error(`Erro ao baixar arquivo: ${i.message}`);const s=URL.createObjectURL(n),l=document.createElement("a");l.href=s,l.download=e.name,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(s),console.log("Document downloaded successfully:",e.name);return}throw new Error("Caminho do arquivo não encontrado")}catch(n){throw console.error("Error downloading document:",n),n}}static async getDocumentContent(e){var n,i,s,l;console.log("Getting document content for:",e);try{if(e.file_path&&((n=e.file_type)!=null&&n.includes("text")||e.name.endsWith(".txt")))try{const{data:u,error:h}=await G.storage.from("documents").download(e.file_path);if(!h&&u)return await u.text()}catch{console.log("Could not download for preview, showing metadata")}return(i=e.file_type)!=null&&i.includes("text")||e.name.endsWith(".txt")?`Documento: ${e.name}
Tipo: ${e.file_type}
Tamanho: ${e.file_size?(e.file_size/1024).toFixed(2)+" KB":"N/A"}
Enviado em: ${new Date(e.uploaded_at).toLocaleString("pt-BR")}

Para visualizar o conteúdo completo, faça o download do arquivo.

ID do documento: ${e.id}
Processo: ${e.process_id}`:(s=e.file_type)!=null&&s.includes("pdf")?`Documento PDF: ${e.name}

INFORMAÇÕES DO ARQUIVO:
- Nome: ${e.name}
- Tipo: ${e.file_type}
- Tamanho: ${e.file_size?(e.file_size/1024).toFixed(2)+" KB":"N/A"}
- Data: ${new Date(e.uploaded_at).toLocaleString("pt-BR")}

Este é um documento PDF real enviado pelo usuário.
Para visualizar o conteúdo completo, faça o download do arquivo.

ID: ${e.id}
Processo: ${e.process_id}`:(l=e.file_type)!=null&&l.includes("image/")?`Imagem: ${e.name}
Tipo: ${e.file_type}
Tamanho: ${e.file_size?(e.file_size/1024).toFixed(2)+" KB":"N/A"}

Esta é uma imagem real enviada pelo usuário.
Para visualizar a imagem, faça o download do arquivo.

Informações do arquivo:
- ID: ${e.id}
- Processo: ${e.process_id}
- Enviado em: ${new Date(e.uploaded_at).toLocaleString("pt-BR")}`:`Arquivo: ${e.name}
Tipo: ${e.file_type||"Desconhecido"}
Tamanho: ${e.file_size?(e.file_size/1024).toFixed(2)+" KB":"N/A"}

Este arquivo foi enviado pelo usuário.
Para acessar o conteúdo, faça o download do arquivo.

Informações do documento:
- ID: ${e.id}
- Processo: ${e.process_id}
- Enviado em: ${new Date(e.uploaded_at).toLocaleString("pt-BR")}`}catch(u){return console.error("Error getting document content:",u),`Erro ao carregar conteúdo do documento: ${u.message}`}}}class ac{static async getProcessComments(e){if(!e)throw new Error("Process ID is required");console.log("Loading comments for process:",e);const{data:n,error:i}=await G.from("process_comments").select("*").eq("process_id",e).order("created_at",{ascending:!1});if(i)throw console.error("Error fetching comments:",i),i;if(!n||n.length===0)return console.log("No comments found"),[];const s=[...new Set(n.map(f=>f.user_id))],{data:l,error:u}=await G.from("user_profiles").select("id, user_id, name, email, avatar_url").in("user_id",s);if(u)throw console.error("Error fetching user profiles:",u),u;const h=new Map;return l==null||l.forEach(f=>{h.set(f.user_id,f)}),console.log("Comments loaded:",n.length),n.map(f=>({id:f.id,process_id:f.process_id,user_id:f.user_id,comment:f.comment,created_at:f.created_at,updated_at:f.updated_at,user_profiles:h.get(f.user_id)?{id:h.get(f.user_id).id,name:h.get(f.user_id).name,email:h.get(f.user_id).email,avatar_url:h.get(f.user_id).avatar_url}:void 0}))}static async addComment(e,n,i){if(!e)throw new Error("Process ID is required");if(!n)throw new Error("User ID is required");if(!i.trim())throw new Error("Comment content is required");console.log("Adding comment:",{processId:e,userId:n,commentLength:i.length});const s={process_id:e,user_id:n,comment:i.trim()},{data:l,error:u}=await G.from("process_comments").insert(s).select("*").single();if(u)throw console.error("Error adding comment:",u),u;const{data:h,error:f}=await G.from("user_profiles").select("id, user_id, name, email, avatar_url").eq("user_id",n).maybeSingle();return f&&console.error("Error fetching user profile:",f),console.log("Comment added successfully:",l.id),{id:l.id,process_id:l.process_id,user_id:l.user_id,comment:l.comment,created_at:l.created_at,updated_at:l.updated_at,user_profiles:h?{id:h.id,name:h.name,email:h.email,avatar_url:h.avatar_url}:void 0}}static async updateComment(e,n){if(!e)throw new Error("Comment ID is required");if(!n.trim())throw new Error("Comment content is required");console.log("Updating comment:",e);const{data:i,error:s}=await G.from("process_comments").update({comment:n.trim(),updated_at:new Date().toISOString()}).eq("id",e).select("*").single();if(s)throw console.error("Error updating comment:",s),s;const{data:l,error:u}=await G.from("user_profiles").select("id, user_id, name, email, avatar_url").eq("user_id",i.user_id).maybeSingle();return u&&console.error("Error fetching user profile:",u),console.log("Comment updated successfully:",e),{id:i.id,process_id:i.process_id,user_id:i.user_id,comment:i.comment,created_at:i.created_at,updated_at:i.updated_at,user_profiles:l?{id:l.id,name:l.name,email:l.email,avatar_url:l.avatar_url}:void 0}}static async deleteComment(e){if(!e)throw new Error("Comment ID is required");console.log("Deleting comment:",e);const{error:n}=await G.from("process_comments").delete().eq("id",e);if(n)throw console.error("Error deleting comment:",n),n;console.log("Comment deleted successfully:",e)}static async getUserPermissionForComment(e){const{data:{user:n}}=await G.auth.getUser();if(!n)return!1;const{data:i,error:s}=await G.from("process_comments").select("user_id").eq("id",e).single();return s?(console.error("Error checking comment permission:",s),!1):i.user_id===n.id}}function Ib({isOpen:t,onClose:e,document:n}){const[i,s]=nt.useState(""),[l,u]=nt.useState(!1),[h,f]=nt.useState(!1);nt.useEffect(()=>{n&&t&&p()},[n,t]);const p=async()=>{if(n){u(!0);try{const k=await fi.getDocumentContent(n);s(k)}catch(k){console.error("Error loading document content:",k),s("Erro ao carregar o conteúdo do documento.")}finally{u(!1)}}},v=async()=>{if(n){f(!0);try{await fi.downloadDocument(n)}catch(k){console.error("Error downloading document:",k),alert("Erro ao baixar documento: "+k.message)}finally{f(!1)}}};if(!t||!n)return null;const x=k=>k!=null&&k.startsWith("image/")?a.jsx(nm,{className:"w-6 h-6 text-blue-600"}):k!=null&&k.includes("pdf")?a.jsx(rt,{className:"w-6 h-6 text-red-600"}):k!=null&&k.includes("word")||k!=null&&k.includes("document")?a.jsx(rt,{className:"w-6 h-6 text-blue-600"}):a.jsx(em,{className:"w-6 h-6 text-gray-600"}),b=()=>{if(l)return a.jsx("div",{className:"flex items-center justify-center h-96 bg-gray-100 rounded-lg",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Carregando documento..."})]})});const k=n.file_type||"";return k.startsWith("image/")?a.jsx("div",{className:"flex items-center justify-center h-96 bg-gray-100 rounded-lg",children:a.jsxs("div",{className:"text-center",children:[a.jsx(nm,{className:"w-16 h-16 text-blue-400 mx-auto mb-4"}),a.jsxs("p",{className:"text-lg font-medium text-gray-900",children:["Imagem: ",n.name]}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:n.name}),a.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border max-w-md mx-auto",children:a.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:i})}),a.jsxs("button",{onClick:v,disabled:h,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 mx-auto disabled:opacity-50",children:[a.jsx(jr,{className:"w-4 h-4"}),h?"Baixando...":"Baixar Imagem"]})]})}):k.includes("pdf")?a.jsxs("div",{className:"h-96 bg-gray-50 rounded-lg p-6 overflow-y-auto",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx(rt,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),a.jsx("p",{className:"text-lg font-medium text-gray-900",children:"Documento PDF"}),a.jsx("p",{className:"text-sm text-gray-500",children:n.name})]}),a.jsx("div",{className:"bg-white p-4 rounded-lg border shadow-sm",children:a.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line leading-relaxed",children:i})})]}):k.includes("text")||n.name.endsWith(".txt")?a.jsxs("div",{className:"h-96 bg-gray-50 rounded-lg p-6 overflow-y-auto",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx(rt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-lg font-medium text-gray-900",children:"Arquivo de Texto"}),a.jsx("p",{className:"text-sm text-gray-500",children:n.name})]}),a.jsx("div",{className:"bg-white p-4 rounded-lg border shadow-sm font-mono text-sm",children:a.jsx("pre",{className:"text-gray-800 whitespace-pre-wrap leading-relaxed",children:i})})]}):a.jsx("div",{className:"flex items-center justify-center h-96 bg-gray-100 rounded-lg",children:a.jsxs("div",{className:"text-center",children:[a.jsx(em,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsxs("p",{className:"text-lg font-medium text-gray-900",children:["Arquivo: ",n.name]}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:n.name}),a.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Tipo: ",n.file_type]}),a.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border max-w-md mx-auto",children:a.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:i})}),a.jsxs("button",{onClick:v,disabled:h,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 mx-auto disabled:opacity-50",children:[a.jsx(jr,{className:"w-4 h-4"}),h?"Baixando...":"Baixar Arquivo"]})]})})},N=k=>k?`${(k/(1024*1024)).toFixed(2)} MB`:"Tamanho desconhecido";return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gray-50",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[x(n.file_type||""),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:n.name}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[a.jsx("span",{children:n.file_type||"Tipo desconhecido"}),a.jsx("span",{children:N(n.file_size)}),a.jsxs("span",{children:["Enviado em ",new Date(n.uploaded_at).toLocaleDateString("pt-BR")]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:v,disabled:h,className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-200 rounded-lg transition-colors",title:"Baixar documento",children:h?a.jsx("div",{className:"w-5 h-5 border-2 border-gray-600 border-t-transparent rounded-full animate-spin"}):a.jsx(jr,{className:"w-5 h-5"})}),a.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded-lg transition-colors",title:"Fechar",children:a.jsx(mt,{className:"w-5 h-5"})})]})]}),a.jsx("div",{className:"p-6",children:b()}),a.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50",children:[a.jsx("div",{className:"text-sm text-gray-600",children:a.jsxs("p",{children:["ID do documento: ",n.id]})}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs("button",{onClick:v,disabled:h,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 transition-colors",children:[h?a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsx(jr,{className:"w-4 h-4"}),h?"Baixando...":"Baixar"]}),a.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Fechar"})]})]})]})})}function Mb({processId:t,userPermission:e}){const[n,i]=z.useState([]),[s,l]=z.useState([]),[u,h]=z.useState(!1),[f,p]=z.useState(""),[v,x]=z.useState("viewer"),[b,N]=z.useState(!1);z.useEffect(()=>{t&&(k(),S())},[t]);const k=async()=>{try{const I=await Un.getProcessCollaborators(t);i(I)}catch(I){console.error("Error loading collaborators:",I)}},S=async()=>{try{const I=await Un.getUserInvites();l(I.filter(U=>U.process_id===t))}catch(I){console.error("Error loading invites:",I)}},O=async I=>{if(I.preventDefault(),!!f.trim()){N(!0);try{await Un.inviteCollaborator(t,f,v),p(""),h(!1),S(),alert("Convite enviado com sucesso!")}catch(U){console.error("Error sending invite:",U),alert("Erro ao enviar convite: "+U.message)}finally{N(!1)}}},g=async I=>{if(confirm("Tem certeza que deseja remover este colaborador?"))try{await Un.removeCollaborator(t,I),k(),alert("Colaborador removido com sucesso!")}catch(U){console.error("Error removing collaborator:",U),alert("Erro ao remover colaborador: "+U.message)}},_=async(I,U)=>{try{await Un.updateCollaboratorPermission(t,I,U),k(),alert("Permissão atualizada com sucesso!")}catch(K){console.error("Error updating permission:",K),alert("Erro ao atualizar permissão: "+K.message)}},w=I=>{switch(I){case"admin":return a.jsx(oc,{className:"w-4 h-4 text-purple-600"});case"editor":return a.jsx(sm,{className:"w-4 h-4 text-blue-600"});case"viewer":return a.jsx(vu,{className:"w-4 h-4 text-gray-600"});default:return a.jsx(hi,{className:"w-4 h-4 text-gray-400"})}},C=I=>{switch(I){case"admin":return"Administrador";case"editor":return"Editor";case"viewer":return"Visualizador";default:return I}},T=I=>{switch(I){case"admin":return"bg-purple-100 text-purple-800 border-purple-200";case"editor":return"bg-blue-100 text-blue-800 border-blue-200";case"viewer":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},P=e==="owner"||e==="admin";return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(om,{className:"w-6 h-6 text-blue-600"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Colaboradores"}),a.jsx("span",{className:"bg-blue-100 text-blue-800 text-sm px-2 py-1 rounded-full",children:n.length})]}),P&&a.jsxs("button",{onClick:()=>h(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2 transition-colors",children:[a.jsx(Yg,{className:"w-4 h-4"}),"Convidar"]})]}),u&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("form",{onSubmit:O,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email do Colaborador"}),a.jsx("input",{type:"email",value:f,onChange:I=>p(I.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"email@exemplo.com",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nível de Permissão"}),a.jsxs("select",{value:v,onChange:I=>x(I.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"viewer",children:"Visualizador - Apenas visualizar"}),a.jsx("option",{value:"editor",children:"Editor - Visualizar e editar"}),a.jsx("option",{value:"admin",children:"Administrador - Controle total"})]})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs("button",{type:"submit",disabled:b,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:[b?a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsx(Pb,{className:"w-4 h-4"}),"Enviar Convite"]}),a.jsx("button",{type:"button",onClick:()=>h(!1),className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400",children:"Cancelar"})]})]})}),a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Níveis de Permissão"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(oc,{className:"w-4 h-4 text-purple-600"}),a.jsx("span",{className:"font-medium",children:"Proprietário:"}),a.jsx("span",{className:"text-gray-600",children:"Controle total, pode gerenciar colaboradores"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(oc,{className:"w-4 h-4 text-purple-600"}),a.jsx("span",{className:"font-medium",children:"Administrador:"}),a.jsx("span",{className:"text-gray-600",children:"Pode editar e gerenciar colaboradores"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(sm,{className:"w-4 h-4 text-blue-600"}),a.jsx("span",{className:"font-medium",children:"Editor:"}),a.jsx("span",{className:"text-gray-600",children:"Pode visualizar e editar o processo"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(vu,{className:"w-4 h-4 text-gray-600"}),a.jsx("span",{className:"font-medium",children:"Visualizador:"}),a.jsx("span",{className:"text-gray-600",children:"Apenas visualizar o processo"})]})]})]}),n.length>0?a.jsxs("div",{className:"space-y-3",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:"Colaboradores Ativos"}),n.map(I=>{var U,K,E,$,W;return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-blue-600 font-medium",children:((K=(U=I.user_profiles)==null?void 0:U.name)==null?void 0:K.charAt(0).toUpperCase())||"U"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:((E=I.user_profiles)==null?void 0:E.name)||"Usuário"}),a.jsx("p",{className:"text-sm text-gray-500",children:($=I.user_profiles)==null?void 0:$.email}),((W=I.user_profiles)==null?void 0:W.organization)&&a.jsx("p",{className:"text-xs text-gray-400",children:I.user_profiles.organization})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[w(I.permission_level),a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${T(I.permission_level)}`,children:C(I.permission_level)})]}),P&&a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsxs("select",{value:I.permission_level,onChange:Z=>_(I.user_id,Z.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1",children:[a.jsx("option",{value:"viewer",children:"Visualizador"}),a.jsx("option",{value:"editor",children:"Editor"}),a.jsx("option",{value:"admin",children:"Administrador"})]}),a.jsx("button",{onClick:()=>g(I.user_id),className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded",title:"Remover colaborador",children:a.jsx(Va,{className:"w-4 h-4"})})]})]})]}),a.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Colaborando desde ",new Date(I.accepted_at||I.invited_at).toLocaleDateString("pt-BR")]})]},I.id)})]}):a.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg border border-gray-200",children:[a.jsx(om,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-600",children:"Nenhum colaborador ainda"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Convide pessoas para colaborar neste processo"})]}),s.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h4",{className:"font-medium text-gray-900 flex items-center gap-2",children:[a.jsx(Vg,{className:"w-4 h-4 text-orange-500"}),"Convites Pendentes"]}),s.map(I=>a.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium text-gray-900",children:["Convite para: ",I.invited_email]}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Permissão: ",C(I.permission_level)]}),a.jsxs("p",{className:"text-xs text-gray-500",children:["Expira em: ",new Date(I.expires_at).toLocaleDateString("pt-BR")]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("button",{onClick:()=>Un.acceptInvite(I.id).then(()=>{k(),S()}),className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 flex items-center gap-1",children:[a.jsx(Gg,{className:"w-3 h-3"}),"Aceitar"]}),a.jsxs("button",{className:"bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 flex items-center gap-1",children:[a.jsx(mt,{className:"w-3 h-3"}),"Recusar"]})]})]})},I.id))]})]})}function zb({isOpen:t,onClose:e,process:n,onUpdateProcess:i}){var $t;const{user:s}=bd(),[l,u]=z.useState("details"),[h,f]=z.useState(""),[p,v]=z.useState((n==null?void 0:n.status)||""),[x,b]=z.useState([]),[N,k]=z.useState(!1),[S,O]=z.useState([]),[g,_]=z.useState(!1),[w,C]=z.useState(!1),[T,P]=z.useState(!1),[I,U]=z.useState(null),[K,E]=z.useState(null),$=V=>{console.log("Viewing document:",V),U(V),P(!0)};nt.useEffect(()=>{n!=null&&n.id&&t&&(W(),Z(),J())},[n==null?void 0:n.id,t]);const W=async()=>{if(!(n!=null&&n.id)){console.error("No process ID available for loading documents");return}try{console.log("📂 Loading documents for process:",n.id);const V=await fi.getProcessDocuments(n.id);console.log("✅ Documents loaded from database:",{processId:n.id,count:V.length,documents:V.map(oe=>({id:oe.id,name:oe.name}))}),b(V)}catch(V){console.error("❌ Error loading documents:",V),console.error("Load error details:",{processId:n.id,error:V.message}),b([])}},Z=async()=>{if(n!=null&&n.id)try{const V=await Un.getUserPermission(n.id);E(V)}catch(V){console.error("Error loading user permission:",V),E(null)}},J=async()=>{if(n!=null&&n.id){_(!0);try{const V=await ac.getProcessComments(n.id);O(V)}catch(V){console.error("Error loading comments:",V),O([])}finally{_(!1)}}},ae=async V=>{if(V.length){if(!(n!=null&&n.id)){console.error("No process ID available"),alert("Erro: ID do processo não encontrado");return}if(!(s!=null&&s.id)){console.error("No user ID available"),alert("Erro: Usuário não autenticado");return}console.log("Starting file upload:",{processId:n.id,userId:s.id,fileCount:V.length}),k(!0);try{for(const oe of Array.from(V)){console.log("Uploading file:",{name:oe.name,size:oe.size,type:oe.type||"unknown"});try{await fi.uploadDocument(n.id,oe,s.id),console.log("File uploaded successfully:",oe.name)}catch(De){throw console.error("Error uploading file:",oe.name,De),new Error(`Erro ao fazer upload de ${oe.name}: ${De.message}`)}}console.log("All files uploaded, reloading documents..."),await W(),alert("Documentos enviados com sucesso!")}catch(oe){console.error("Error uploading documents:",oe),alert("Erro ao fazer upload dos documentos: "+oe.message)}finally{k(!1),console.log("Upload process completed")}}},je=async V=>{if(!V){console.error("Document ID is required for deletion"),alert("Erro: ID do documento não encontrado");return}const oe=x.find(ye=>ye.id===V),De=`Tem certeza que deseja excluir o documento "${(oe==null?void 0:oe.name)||"documento"}"?`;if(!window.confirm(De)){console.log("User cancelled document deletion");return}console.log("🗑️ User confirmed deletion of document:",{id:V,name:oe==null?void 0:oe.name,currentDocsCount:x.length});try{console.log("📞 Calling DocumentService.deleteDocument..."),await fi.deleteDocument(V),console.log("✅ Document deleted from database, updating local state..."),b(ye=>{const dn=ye.filter(hn=>hn.id!==V);return console.log("📝 Local state updated:",{before:ye.length,after:dn.length,removedId:V}),dn}),console.log("🔄 Reloading documents from database for verification..."),setTimeout(async()=>{try{await W(),console.log("✅ Documents reloaded successfully")}catch(ye){console.error("❌ Error reloading documents:",ye)}},500),console.log("✅ Document deletion completed successfully"),alert("Documento excluído com sucesso!")}catch(ye){console.error("❌ Error deleting document:",ye),console.error("Delete error details:",{documentId:V,documentName:oe==null?void 0:oe.name,error:ye.message}),alert("Erro ao excluir documento: "+ye.message),console.log("🔄 Reloading documents after error..."),await W()}};if(!t||!n)return null;const Re=V=>{switch(V){case"aprovado":return"text-green-700 bg-green-100 border-green-200";case"rejeitado":return"text-red-700 bg-red-100 border-red-200";case"em_analise":return"text-blue-700 bg-blue-100 border-blue-200";case"submitted":return"text-yellow-700 bg-yellow-100 border-yellow-200";case"documentacao_pendente":return"text-orange-700 bg-orange-100 border-orange-200";default:return"text-gray-700 bg-gray-100 border-gray-200"}},D=V=>{switch(V){case"aprovado":return"Aprovada";case"rejeitado":return"Rejeitada";case"em_analise":return"Em Análise";case"submitted":return"Submetida";case"documentacao_pendente":return"Documentação Pendente";default:return V}},Y=V=>{switch(V){case"LP":return"Licença Prévia";case"LI":return"Licença de Instalação";case"LO":return"Licença de Operação";default:return V}},H=()=>{if(p!==n.status){const V={submitted:25,em_analise:50,documentacao_pendente:75,aprovado:100,rejeitado:100};i(n.id,{status:p,progress:V[p]||n.progress})}},re=async()=>{if(!(!h.trim()||!(s!=null&&s.id)||!(n!=null&&n.id))){C(!0);try{await ac.addComment(n.id,s.id,h),f(""),await J()}catch(V){console.error("Error adding comment:",V),alert("Erro ao adicionar comentário: "+V.message)}finally{C(!1)}}},ue=async V=>{if(confirm("Tem certeza que deseja excluir este comentário?"))try{await ac.deleteComment(V),await J()}catch(oe){console.error("Error deleting comment:",oe),alert("Erro ao excluir comentário: "+oe.message)}},Ce=[{id:"details",name:"Detalhes",icon:rt},{id:"timeline",name:"Cronograma",icon:gu},{id:"documents",name:"Documentos",icon:Nn},{id:"comments",name:"Comentários",icon:im},{id:"collaboration",name:"Colaboradores",icon:Ob}],me=()=>{var V,oe,De;return a.jsxs("div",{className:"space-y-6",children:[K&&a.jsx("div",{className:"mb-4",children:a.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-medium rounded-full ${K==="owner"?"bg-purple-100 text-purple-800":K==="admin"?"bg-blue-100 text-blue-800":K==="editor"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:K==="owner"?"👑 Proprietário":K==="admin"?"🛡️ Administrador":K==="editor"?"✏️ Editor":"👁️ Visualizador"})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Número do Processo"}),a.jsx("p",{className:"text-lg font-semibold text-gray-900",children:n.protocol_number})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Licença"}),a.jsx("span",{className:"inline-flex px-3 py-1 text-sm font-medium bg-blue-100 text-blue-800 rounded-full",children:Y(n.license_type)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status Atual"}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-medium rounded-full border ${Re(n.status)}`,children:D(n.status)}),(K==="owner"||K==="admin"||K==="editor")&&a.jsxs(a.Fragment,{children:[a.jsxs("select",{value:p,onChange:ye=>v(ye.target.value),className:"text-sm border border-gray-300 rounded px-2 py-1",children:[a.jsx("option",{value:"submitted",children:"Submetida"}),a.jsx("option",{value:"em_analise",children:"Em Análise"}),a.jsx("option",{value:"documentacao_pendente",children:"Documentação Pendente"}),a.jsx("option",{value:"aprovado",children:"Aprovada"}),a.jsx("option",{value:"rejeitado",children:"Rejeitada"})]}),a.jsx("button",{onClick:H,className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700",children:"Atualizar"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Progresso"}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:a.jsx("div",{className:"bg-green-600 h-3 rounded-full transition-all duration-300",style:{width:`${n.progress||0}%`}})}),a.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[n.progress||0,"% concluído"]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Empresa"}),a.jsx("p",{className:"text-gray-900",children:(V=n.companies)==null?void 0:V.name})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Atividade"}),a.jsx("p",{className:"text-gray-900",children:n.activity})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Analista Responsável"}),a.jsx("p",{className:"text-gray-900",children:n.analyst_name||"Não atribuído"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data de Submissão"}),a.jsx("p",{className:"text-gray-900",children:n.submit_date?new Date(n.submit_date).toLocaleDateString("pt-BR"):"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Esperada"}),a.jsx("p",{className:"text-gray-900",children:n.expected_date?new Date(n.expected_date).toLocaleDateString("pt-BR"):"N/A"})]})]})]}),n.project_description&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrição do Empreendimento"}),a.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:a.jsx("p",{className:"text-gray-900",children:n.project_description})})]}),n.municipality&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Localização"}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("p",{className:"text-gray-900",children:n.municipality}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[(oe=n.companies)==null?void 0:oe.city," - ",(De=n.companies)==null?void 0:De.state]})]})]})]})},he=()=>a.jsx("div",{className:"space-y-4",children:a.jsx("div",{className:"flow-root",children:a.jsxs("ul",{className:"-mb-8",children:[a.jsx("li",{children:a.jsxs("div",{className:"relative pb-8",children:[a.jsx("div",{className:"absolute top-4 left-4 -ml-px h-full w-0.5 bg-gray-200"}),a.jsxs("div",{className:"relative flex space-x-3",children:[a.jsx("div",{children:a.jsx("span",{className:"h-8 w-8 rounded-full bg-green-500 flex items-center justify-center ring-8 ring-white",children:a.jsx(_s,{className:"h-5 w-5 text-white"})})}),a.jsxs("div",{className:"min-w-0 flex-1 pt-1.5 flex justify-between space-x-4",children:[a.jsx("div",{children:a.jsx("p",{className:"text-sm text-gray-500",children:"Processo criado"})}),a.jsx("div",{className:"text-right text-sm whitespace-nowrap text-gray-500",children:new Date(n.submit_date).toLocaleDateString("pt-BR")})]})]})]})}),n.status!=="submitted"&&a.jsx("li",{children:a.jsxs("div",{className:"relative pb-8",children:[a.jsx("div",{className:"absolute top-4 left-4 -ml-px h-full w-0.5 bg-gray-200"}),a.jsxs("div",{className:"relative flex space-x-3",children:[a.jsx("div",{children:a.jsx("span",{className:"h-8 w-8 rounded-full bg-blue-500 flex items-center justify-center ring-8 ring-white",children:a.jsx(gu,{className:"h-5 w-5 text-white"})})}),a.jsxs("div",{className:"min-w-0 flex-1 pt-1.5 flex justify-between space-x-4",children:[a.jsx("div",{children:a.jsx("p",{className:"text-sm text-gray-500",children:"Análise iniciada"})}),a.jsx("div",{className:"text-right text-sm whitespace-nowrap text-gray-500",children:new Date(Date.now()-5*24*60*60*1e3).toLocaleDateString("pt-BR")})]})]})]})}),(n.status==="aprovado"||n.status==="rejeitado")&&a.jsx("li",{children:a.jsx("div",{className:"relative",children:a.jsxs("div",{className:"relative flex space-x-3",children:[a.jsx("div",{children:a.jsx("span",{className:`h-8 w-8 rounded-full flex items-center justify-center ring-8 ring-white ${n.status==="aprovado"?"bg-green-500":"bg-red-500"}`,children:n.status==="aprovado"?a.jsx(_s,{className:"h-5 w-5 text-white"}):a.jsx(Lr,{className:"h-5 w-5 text-white"})})}),a.jsxs("div",{className:"min-w-0 flex-1 pt-1.5 flex justify-between space-x-4",children:[a.jsx("div",{children:a.jsxs("p",{className:"text-sm text-gray-500",children:["Processo ",n.status==="aprovado"?"aprovado":"rejeitado"]})}),a.jsx("div",{className:"text-right text-sm whitespace-nowrap text-gray-500",children:new Date().toLocaleDateString("pt-BR")})]})]})})})]})})}),B=()=>a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Documentos do Processo"}),(K==="owner"||K==="admin"||K==="editor")&&a.jsxs("label",{className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2 cursor-pointer",children:[a.jsx(Nn,{className:"w-4 h-4"}),N?"Enviando...":"Adicionar Documento",a.jsx("input",{type:"file",multiple:!0,onChange:V=>V.target.files&&ae(V.target.files),className:"hidden",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.txt"})]})]}),(K==="owner"||K==="admin"||K==="editor")&&a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-green-400 transition-colors",onDrop:V=>{V.preventDefault();const oe=V.dataTransfer.files;oe.length>0&&ae(oe)},onDragOver:V=>V.preventDefault(),onDragEnter:V=>V.preventDefault(),children:[a.jsx(Nn,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-lg font-medium text-gray-900",children:"Arraste arquivos aqui"}),a.jsx("p",{className:"text-sm text-gray-500",children:"ou clique no botão acima para selecionar"}),a.jsx("p",{className:"text-xs text-gray-400",children:"Formatos aceitos: PDF, DOC, DOCX, JPG, PNG, TXT"})]})]}),x.length>0?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h4",{className:"font-medium text-gray-900",children:["Documentos Anexados (",x.length,")"]}),a.jsx("div",{className:"grid grid-cols-1 gap-3",children:x.map(V=>a.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(rt,{className:"w-8 h-8 text-gray-400"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:V.name}),a.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[a.jsx("span",{children:V.file_type||"Arquivo"}),V.file_size&&a.jsxs("span",{children:[(V.file_size/1024/1024).toFixed(2)," MB"]}),a.jsxs("span",{children:["Enviado em ",new Date(V.uploaded_at).toLocaleDateString("pt-BR")]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{className:"text-green-600 hover:text-green-700 text-sm px-3 py-1 border border-green-300 rounded hover:bg-green-50",onClick:()=>$(V),type:"button",children:"Visualizar"}),a.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm px-3 py-1 border border-blue-300 rounded hover:bg-blue-50",onClick:async()=>{try{await fi.downloadDocument(V)}catch(oe){console.error("Error downloading document:",oe),alert("Erro ao baixar documento: "+oe.message)}},type:"button",children:"Baixar"}),a.jsx("button",{onClick:()=>je(V.id),type:"button",disabled:!(K==="owner"||K==="admin"||K==="editor"),className:`text-sm px-3 py-1 border rounded ${K==="owner"||K==="admin"||K==="editor"?"text-red-600 hover:text-red-700 border-red-300 hover:bg-red-50":"text-gray-400 border-gray-200 cursor-not-allowed"}`,children:"Excluir"})]})]})},V.id))})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(rt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"Nenhum documento anexado ainda"}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Adicione documentos usando o botão acima ou arrastando arquivos"})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-3",children:"Documentos Obrigatórios"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:["Requerimento de Licença","Certidão Municipal","Publicação do Pedido","Estudo de Impacto Ambiental","Planta de Localização","Memorial Descritivo"].map((V,oe)=>{const De=x.some(ye=>ye.name.toLowerCase().includes(V.toLowerCase().split(" ")[0]));return a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:`w-4 h-4 rounded-full flex items-center justify-center ${De?"bg-green-500":"bg-gray-300"}`,children:De&&a.jsx(_s,{className:"w-3 h-3 text-white"})}),a.jsx("span",{className:`text-sm ${De?"text-green-700":"text-gray-600"}`,children:V})]},oe)})})]}),N&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-5 h-5 border-2 border-yellow-600 border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"text-yellow-800",children:"Enviando documentos..."})]})})]}),ve=()=>{var V,oe,De;return a.jsxs("div",{className:"space-y-4",children:[g?a.jsxs("div",{className:"flex items-center justify-center py-8",children:[a.jsx("div",{className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),a.jsx("span",{className:"ml-3 text-gray-600",children:"Carregando comentários..."})]}):a.jsx("div",{className:"space-y-4",children:S.length>0?S.map(ye=>{var dn,hn,ar,Ln,fn,On;return a.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white text-sm font-medium",children:((hn=(dn=ye.user_profiles)==null?void 0:dn.name)==null?void 0:hn.charAt(0).toUpperCase())||((Ln=(ar=ye.user_profiles)==null?void 0:ar.email)==null?void 0:Ln.charAt(0).toUpperCase())||"U"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:((fn=ye.user_profiles)==null?void 0:fn.name)||((On=ye.user_profiles)==null?void 0:On.email)||"Usuário"}),a.jsx("p",{className:"text-xs text-gray-500",children:new Date(ye.created_at).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}),ye.updated_at!==ye.created_at&&a.jsx("p",{className:"text-xs text-gray-400",children:"(editado)"})]}),ye.user_id===(s==null?void 0:s.id)&&a.jsx("button",{onClick:()=>ue(ye.id),className:"text-red-500 hover:text-red-700 text-xs px-2 py-1 rounded hover:bg-red-50",children:"Excluir"})]}),a.jsx("p",{className:"text-sm text-gray-700 mt-1",children:ye.comment})]})]})},ye.id)}):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(im,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),a.jsx("p",{children:"Nenhum comentário ainda"}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Seja o primeiro a comentar neste processo"})]})}),a.jsx("div",{className:"border-t pt-4",children:a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white text-sm font-medium",children:((oe=(V=s==null?void 0:s.user_metadata)==null?void 0:V.name)==null?void 0:oe.charAt(0).toUpperCase())||((De=s==null?void 0:s.email)==null?void 0:De.charAt(0).toUpperCase())||"U"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("textarea",{value:h,onChange:ye=>f(ye.target.value),placeholder:"Adicionar comentário...",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",rows:3,disabled:w}),a.jsx("div",{className:"mt-2 flex justify-end",children:a.jsx("button",{onClick:re,disabled:w||!h.trim(),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:w?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Adicionando..."]}):"Adicionar Comentário"})})]})]})})]})},qe=()=>a.jsx(Mb,{processId:n.id,userPermission:K});return a.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Detalhes do Processo"}),a.jsxs("p",{className:"text-sm text-gray-500",children:[n.protocol_number," - ",($t=n.companies)==null?void 0:$t.name]})]}),a.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(mt,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"flex space-x-8 px-6",children:Ce.map(V=>{const oe=V.icon;return a.jsxs("button",{onClick:()=>u(V.id),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${l===V.id?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(oe,{className:"w-4 h-4"}),a.jsx("span",{children:V.name})]},V.id)})})}),a.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[l==="details"&&me(),l==="timeline"&&he(),l==="documents"&&B(),l==="comments"&&ve(),l==="collaboration"&&qe()]})]}),a.jsx(Ib,{isOpen:T,onClose:()=>{console.log("Closing document viewer"),P(!1),U(null)},document:I})]})}function Rb({isOpen:t,onClose:e}){const[n,i]=z.useState(!0),[s,l]=z.useState(""),[u,h]=z.useState(""),[f,p]=z.useState(""),[v,x]=z.useState("analista"),[b,N]=z.useState(!1),[k,S]=z.useState(""),{signIn:O,signUp:g}=bd();if(!t)return null;const _=async T=>{T.preventDefault(),N(!0),S("");try{n?await O(s,u):await g(s,u,f,v),e()}catch(P){console.error("Erro detalhado no cadastro:",P),P.message.includes("Cadastro realizado! Verifique seu email")?(alert(P.message),e()):S(P.message||"Ocorreu um erro. Tente novamente.")}finally{N(!1)}},w=()=>{l(""),h(""),p(""),x("analista"),S("")},C=()=>{i(!n),w()};return a.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50"}),a.jsxs("div",{className:"relative login-modal rounded-lg shadow-xl w-full max-w-md",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark-header rounded-t-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-lg flex items-center justify-center",children:a.jsx(hi,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-white",children:n?"Entrar no Sistema":"Criar Conta"}),a.jsx("p",{className:"text-sm text-gray-300",children:"Sistema de Licenciamento Ambiental"})]})]}),a.jsx("button",{onClick:e,className:"p-2 text-gray-300 hover:text-white transition-colors",children:a.jsx(mt,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:_,className:"p-6 space-y-4",children:[k&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:a.jsx("p",{className:"text-sm text-red-600",children:k})}),!n&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Completo"}),a.jsx("input",{type:"text",value:f,onChange:T=>p(T.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Digite seu nome completo",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),a.jsx("input",{type:"email",value:s,onChange:T=>l(T.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Digite seu email",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Senha"}),a.jsx("input",{type:"password",value:u,onChange:T=>h(T.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Digite sua senha",required:!0,minLength:6})]}),!n&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Perfil de Usuário"}),a.jsxs("select",{value:v,onChange:T=>x(T.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",required:!0,children:[a.jsx("option",{value:"analista",children:"Analista Ambiental"}),a.jsx("option",{value:"gestor",children:"Gestor"}),a.jsx("option",{value:"admin",children:"Administrador"})]})]}),a.jsx("button",{type:"submit",disabled:b,className:"w-full bg-green-600 text-white py-3 px-4 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center space-x-2",children:b?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsxs(a.Fragment,{children:[n?a.jsx(Nb,{className:"w-5 h-5"}):a.jsx(Yg,{className:"w-5 h-5"}),a.jsx("span",{children:n?"Entrar":"Criar Conta"})]})}),a.jsx("div",{className:"text-center",children:a.jsx("button",{type:"button",onClick:C,className:"text-sm text-green-600 hover:text-green-700 transition-colors",children:n?"Não tem conta? Criar nova conta":"Já tem conta? Fazer login"})})]}),n&&a.jsx("div",{className:"px-6 pb-6",children:a.jsxs("div",{className:"bg-blue-50 bg-opacity-80 border border-blue-200 rounded-lg p-3",children:[a.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Contas de Demonstração:"}),a.jsxs("div",{className:"text-xs text-blue-800 space-y-1",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Analista:"})," ana.silva@meioambiente.gov.br / 123456"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Gestor:"})," maria.costa@meioambiente.gov.br / 123456"]})]}),a.jsx("div",{className:"mt-2 pt-2 border-t border-blue-200",children:a.jsxs("p",{className:"text-xs text-blue-700",children:[a.jsx("strong",{children:"⚠️ Importante:"})," Se estiver com erro de credenciais, verifique se as confirmações de email estão ",a.jsx("strong",{children:"desabilitadas"})," no Supabase (Authentication → Settings)."]})})]})})]})]})}const Db=[{id:"property-types",name:"Tipos de Imóvel",icon:xb},{id:"process-types",name:"Tipos de Processo",icon:rt},{id:"license-types",name:"Tipos de Licença",icon:bb},{id:"activities",name:"Atividades",icon:pu},{id:"activities",name:"Atividades",icon:pu},{id:"enterprise-sizes",name:"Porte do Empreendimento",icon:Cb},{id:"pollution-potentials",name:"Potencial Poluidor",icon:Lr},{id:"reference-units",name:"Unidades de Referência",icon:wa},{id:"study-types",name:"Tipos de Estudo",icon:_b},{id:"documentation-templates",name:"Documentação",icon:rt},{id:"billing-configurations",name:"Configuração de Cobrança",icon:wa}];function lc({children:t,activeSection:e,onSectionChange:n}){const[i,s]=z.useState(!1);return a.jsxs("div",{className:"flex h-full",children:[a.jsxs("div",{className:`bg-white border-r border-gray-200 transition-all duration-300 ${i?"w-16":"w-64"}`,children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[!i&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Bs,{className:"w-6 h-6 text-blue-600"}),a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Administração"})]}),a.jsx("button",{onClick:()=>s(!i),className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:i?a.jsx(wb,{className:"w-4 h-4"}):a.jsx(Kg,{className:"w-4 h-4"})})]})}),a.jsx("nav",{className:"p-2",children:Db.map(l=>{const u=l.icon;return a.jsxs("button",{onClick:()=>n(l.id),className:`w-full flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors mb-1 ${e===l.id?"bg-blue-100 text-blue-700 border border-blue-200":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,title:i?l.name:void 0,children:[a.jsx(u,{className:"w-5 h-5 flex-shrink-0"}),!i&&a.jsx("span",{className:"ml-3 truncate",children:l.name})]},l.id)})})]}),a.jsx("div",{className:"flex-1 overflow-hidden",children:t})]})}function cc({title:t,tableName:e,columns:n,searchFields:i=["name"],onEdit:s,onView:l,onCreate:u,canCreate:h=!0,canEdit:f=!0,canDelete:p=!0,canToggleActive:v=!0}){const[x,b]=z.useState([]),[N,k]=z.useState(!0),[S,O]=z.useState(""),[g,_]=z.useState(!1),[w,C]=z.useState(null),[T,P]=z.useState(0);z.useEffect(()=>{U()},[e,g,T]);const I=()=>{P(Z=>Z+1)};nt.useImperativeHandle(nt.forwardRef(()=>null),()=>({refreshData:I}));const U=async()=>{k(!0);try{let Z;e==="activities"?Z=G.from(e).select(`
            *,
            enterprise_sizes(id, name),
            pollution_potentials(id, name)
          `):Z=G.from(e).select("*"),g||(Z=Z.eq("is_active",!0));const{data:J,error:ae}=await Z.order("created_at",{ascending:!1});if(ae)throw ae;b(J)}catch(Z){console.error("Error loading items:",Z),alert("Erro ao carregar dados: "+Z.message)}finally{k(!1)}},K=async Z=>{try{const{error:J}=await G.from(e).delete().eq("id",Z);if(J)throw J;await U(),C(null),alert("Item excluído com sucesso!")}catch(J){console.error("Error deleting item:",J),alert("Erro ao excluir item: "+J.message)}},E=async(Z,J)=>{try{const{error:ae}=await G.from(e).update({is_active:!J}).eq("id",Z);if(ae)throw ae;await U(),alert(`Item ${J?"desativado":"ativado"} com sucesso!`)}catch(ae){console.error("Error toggling active status:",ae),alert("Erro ao alterar status: "+ae.message)}},$=x.filter(Z=>S?i.some(J=>{var ae;return(ae=Z[J])==null?void 0:ae.toString().toLowerCase().includes(S.toLowerCase())}):!0),W=(Z,J,ae)=>{if(Z.render)return Z.render(J,ae);switch(Z.type){case"boolean":return J?a.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:"Sim"}):a.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full",children:"Não"});case"date":return J?new Date(J).toLocaleDateString("pt-BR"):"-";case"array":return Array.isArray(J)?J.join(", "):"-";case"number":return typeof J=="number"?J.toLocaleString("pt-BR"):J||"-";default:return J||"-"}};return N?a.jsxs("div",{className:"flex items-center justify-center h-64",children:[a.jsx("div",{className:"w-8 h-8 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),a.jsx("span",{className:"ml-3 text-gray-600",children:"Carregando..."})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t}),h&&u&&a.jsxs("button",{onClick:u,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2 transition-colors",children:[a.jsx(_u,{className:"w-4 h-4"}),"Novo"]})]}),a.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx(Ds,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Buscar...",className:"pl-10 w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:S,onChange:Z=>O(Z.target.value)})]})}),a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Jg,{className:"w-4 h-4 text-gray-400"}),a.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx("input",{type:"checkbox",checked:g,onChange:Z=>_(Z.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),"Mostrar inativos"]})]})})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[n.map(Z=>a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:Z.label},Z.key)),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ações"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:$.map(Z=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[n.map(J=>a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:W(J,Z[J.key],Z)},J.key)),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${Z.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:Z.is_active?"Ativo":"Inativo"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[l&&a.jsx("button",{onClick:()=>l(Z),className:"text-gray-600 hover:text-gray-900 p-1 rounded hover:bg-gray-100",title:"Visualizar",children:a.jsx(vu,{className:"w-4 h-4"})}),f&&s&&a.jsx("button",{onClick:()=>s(Z),className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"Editar",children:a.jsx(Tb,{className:"w-4 h-4"})}),v&&a.jsx("button",{onClick:()=>E(Z.id,Z.is_active),className:`p-1 rounded hover:bg-gray-100 ${Z.is_active?"text-green-600 hover:text-green-900":"text-red-600 hover:text-red-900"}`,title:Z.is_active?"Desativar":"Ativar",children:Z.is_active?a.jsx(Xg,{className:"w-4 h-4"}):a.jsx(Qg,{className:"w-4 h-4"})}),p&&a.jsx("button",{onClick:()=>C(Z.id),className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",title:"Excluir",children:a.jsx(Va,{className:"w-4 h-4"})})]})})]},Z.id))})]})}),$.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-400 mb-4",children:a.jsx(Ds,{className:"w-12 h-12 mx-auto"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum item encontrado"}),a.jsx("p",{className:"text-gray-500",children:S?"Tente ajustar os filtros de busca":"Comece criando um novo item"})]})]}),w&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center mr-4",children:a.jsx(Lr,{className:"w-6 h-6 text-red-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Confirmar Exclusão"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Esta ação não pode ser desfeita."})]})]}),a.jsx("p",{className:"text-gray-700 mb-6",children:"Tem certeza que deseja excluir este item? Todos os dados relacionados serão perdidos."}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{onClick:()=>C(null),className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:()=>K(w),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Excluir"})]})]})})})]})}function Bb({isOpen:t,onClose:e,title:n,tableName:i,fields:s,item:l,onSave:u}){const[h,f]=z.useState({}),[p,v]=z.useState(!1),[x,b]=z.useState(null);if(z.useEffect(()=>{if(l)f(l);else{const g={};s.forEach(_=>{_.type==="checkbox"?g[_.key]=!1:_.type==="multiselect"?g[_.key]=[]:g[_.key]=""}),f(g)}},[l,s]),!t)return null;const N=(g,_)=>{f(w=>({...w,[g]:_}))},k=(g,_)=>{b(_),_&&N(g,_.name)},S=async g=>{g.preventDefault(),v(!0);try{let _={...h};if(x)try{const C=`templates/${`${Date.now()}-${x.name}`}`,{data:T,error:P}=await G.storage.from("documents").upload(C,x,{cacheControl:"3600",upsert:!1});if(P)throw P;_={..._,template_file_path:T.path,template_file_name:x.name,template_file_size:x.size,template_file_type:x.type}}catch(w){throw console.error("Error uploading file:",w),new Error("Erro no upload do arquivo: "+w.message)}if(l!=null&&l.id){const{data:w,error:C}=await G.from(i).update(_).eq("id",l.id).select().single();if(C)throw C;console.log("Item updated successfully:",w)}else{const{data:w,error:C}=await G.from(i).insert(_).select().single();if(C)throw C;console.log("Item created successfully:",w)}alert(l!=null&&l.id?"Item atualizado com sucesso!":"Item criado com sucesso!"),u(),e()}catch(_){console.error("Error saving item:",_),alert("Erro ao salvar item: "+_.message)}finally{v(!1)}},O=g=>{var w,C;const _=h[g.key]||"";switch(g.type){case"textarea":return a.jsx("textarea",{value:_,onChange:T=>N(g.key,T.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:g.placeholder,rows:4,required:g.required});case"number":case"decimal":return a.jsx("input",{type:"number",value:_,onChange:T=>N(g.key,g.type==="decimal"?parseFloat(T.target.value):parseInt(T.target.value)),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:g.placeholder,step:g.type==="decimal"?"0.01":"1",min:"0",required:g.required});case"select":return a.jsxs("select",{value:_,onChange:T=>N(g.key,T.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:g.required,children:[a.jsx("option",{value:"",children:"Selecione..."}),(w=g.options)==null?void 0:w.map(T=>a.jsx("option",{value:T.value,children:T.label},T.value))]});case"multiselect":return a.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto border border-gray-300 rounded-lg p-3",children:(C=g.options)==null?void 0:C.map(T=>a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:Array.isArray(_)&&_.includes(T.value),onChange:P=>{const I=Array.isArray(_)?_:[];P.target.checked?N(g.key,[...I,T.value]):N(g.key,I.filter(U=>U!==T.value))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-gray-700",children:T.label})]},T.value))});case"checkbox":return a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:!!_,onChange:T=>N(g.key,T.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Sim"})]});case"file":return a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"file",onChange:T=>{var P;return k(g.key,((P=T.target.files)==null?void 0:P[0])||null)},className:"hidden",id:`file-${g.key}`,accept:g.accept}),a.jsxs("label",{htmlFor:`file-${g.key}`,className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 cursor-pointer flex items-center gap-2 transition-colors",children:[a.jsx(Nn,{className:"w-4 h-4"}),"Selecionar Arquivo"]}),x&&a.jsx("button",{type:"button",onClick:()=>{b(null),N(g.key,"")},className:"text-red-500 hover:text-red-700 p-1",children:a.jsx(Va,{className:"w-4 h-4"})})]}),(x||_)&&a.jsxs("p",{className:"text-sm text-gray-600",children:["Arquivo: ",(x==null?void 0:x.name)||_]})]});default:return a.jsx("input",{type:"text",value:_,onChange:T=>N(g.key,T.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:g.placeholder,required:g.required})}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:n}),a.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(mt,{className:"w-5 h-5"})})]}),a.jsx("form",{onSubmit:S,className:"p-6 space-y-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:s.map(g=>a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[g.label,g.required&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),O(g)]},g.key))}),a.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),a.jsxs("button",{onClick:S,disabled:p,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2 transition-colors",children:[p?a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsx(Wa,{className:"w-4 h-4"}),p?"Salvando...":"Salvar"]})]})]})})}function $b({isOpen:t,onClose:e,title:n,item:i,onSave:s}){var U,K;const[l,u]=z.useState({activity_id:"",license_type_id:"",reference_unit_id:"",unit_value:"",multiplication_factor:"1.0",is_exempt:!1,revenue_destination:"estado",municipality_percentage:"0",state_percentage:"100",observations:""}),[h,f]=z.useState(!1),[p,v]=z.useState([]),[x,b]=z.useState([]),[N,k]=z.useState([]),[S,O]=z.useState(null),[g,_]=z.useState(0);z.useEffect(()=>{t&&w()},[t]),z.useEffect(()=>{var E,$,W,Z;u(i?{activity_id:i.activity_id||"",license_type_id:i.license_type_id||"",reference_unit_id:i.reference_unit_id||"",unit_value:((E=i.unit_value)==null?void 0:E.toString())||"",multiplication_factor:(($=i.multiplication_factor)==null?void 0:$.toString())||"1.0",is_exempt:i.is_exempt||!1,revenue_destination:i.revenue_destination||"estado",municipality_percentage:((W=i.municipality_percentage)==null?void 0:W.toString())||"0",state_percentage:((Z=i.state_percentage)==null?void 0:Z.toString())||"100",observations:i.observations||""}:{activity_id:"",license_type_id:"",reference_unit_id:"",unit_value:"",multiplication_factor:"1.0",is_exempt:!1,revenue_destination:"estado",municipality_percentage:"0",state_percentage:"100",observations:""})},[i]),z.useEffect(()=>{const E=parseFloat(l.unit_value)||0,$=parseFloat(l.multiplication_factor)||1;_(E*$)},[l.unit_value,l.multiplication_factor]),z.useEffect(()=>{l.revenue_destination==="estado"?u(E=>({...E,municipality_percentage:"0",state_percentage:"100"})):l.revenue_destination==="municipio"&&u(E=>({...E,municipality_percentage:"100",state_percentage:"0"}))},[l.revenue_destination]);const w=async()=>{try{const{data:E,error:$}=await G.from("activities").select(`
          id, code, name, measurement_unit, range_start, range_end,
          enterprise_sizes(name),
          pollution_potentials(name)
        `).eq("is_active",!0).order("code");if($)throw $;v(E||[]);const{data:W,error:Z}=await G.from("license_types").select("id, abbreviation, name").eq("is_active",!0).order("abbreviation");if(Z)throw Z;b(W||[]);const{data:J,error:ae}=await G.from("reference_units").select("id, code, name").eq("is_active",!0).order("code");if(ae)throw ae;k(J||[])}catch(E){console.error("Error loading dropdown data:",E),alert("Erro ao carregar dados: "+E.message)}},C=E=>{const $=p.find(W=>W.id===E);O($||null),u(W=>({...W,activity_id:E}))},T=(E,$)=>{u(W=>({...W,[E]:$}))},P=()=>{if(!l.activity_id)return alert("Selecione uma atividade"),!1;if(!l.license_type_id)return alert("Selecione um tipo de licença"),!1;if(!l.reference_unit_id)return alert("Selecione uma unidade de referência"),!1;if(!l.unit_value||parseFloat(l.unit_value)<=0)return alert("Informe um valor base válido"),!1;if(l.revenue_destination==="particionado"){const E=parseFloat(l.municipality_percentage)||0,$=parseFloat(l.state_percentage)||0;if(E+$!==100)return alert("A soma dos percentuais deve ser igual a 100%"),!1}return!0},I=async E=>{if(E.preventDefault(),!!P()){f(!0);try{const $={activity_id:l.activity_id,license_type_id:l.license_type_id,reference_unit_id:l.reference_unit_id,unit_value:parseFloat(l.unit_value),multiplication_factor:parseFloat(l.multiplication_factor)||1,is_exempt:l.is_exempt,revenue_destination:l.revenue_destination,municipality_percentage:parseFloat(l.municipality_percentage)||0,state_percentage:parseFloat(l.state_percentage)||100,observations:l.observations||null};if(i!=null&&i.id){const{error:W}=await G.from("billing_configurations").update($).eq("id",i.id);if(W)throw W;alert("Configuração atualizada com sucesso!")}else{const{error:W}=await G.from("billing_configurations").insert($);if(W)throw W.code==="23505"?new Error("Já existe uma configuração para esta combinação de atividade, tipo de licença e características."):W;alert("Configuração criada com sucesso!")}s(),e()}catch($){console.error("Error saving billing configuration:",$),alert("Erro ao salvar configuração: "+$.message)}finally{f(!1)}}};return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(wa,{className:"w-6 h-6 text-blue-600"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:n})]}),a.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(mt,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:I,className:"p-6 space-y-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Atividade ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{value:l.activity_id,onChange:E=>C(E.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[a.jsx("option",{value:"",children:"Selecione uma atividade..."}),p.map(E=>a.jsxs("option",{value:E.id,children:[E.code," - ",E.name,E.enterprise_sizes&&` (${E.enterprise_sizes.name})`,E.pollution_potentials&&` - ${E.pollution_potentials.name}`]},E.id))]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Tipo de Licença ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{value:l.license_type_id,onChange:E=>T("license_type_id",E.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[a.jsx("option",{value:"",children:"Selecione um tipo..."}),x.map(E=>a.jsxs("option",{value:E.id,children:[E.abbreviation," - ",E.name]},E.id))]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Unidade de Referência ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{value:l.reference_unit_id,onChange:E=>T("reference_unit_id",E.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[a.jsx("option",{value:"",children:"Selecione uma unidade..."}),N.map(E=>a.jsxs("option",{value:E.id,children:[E.code," - ",E.name]},E.id))]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Valor Base (R$) ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:l.unit_value,onChange:E=>T("unit_value",E.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: 150.00",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fator de Multiplicação"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:l.multiplication_factor,onChange:E=>T("multiplication_factor",E.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: 2.5"})]})]}),g>0&&a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(wa,{className:"w-5 h-5 text-blue-600"}),a.jsxs("span",{className:"font-medium text-blue-900",children:["Valor Final Calculado: R$ ",g.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),a.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:[l.unit_value," × ",l.multiplication_factor," = ",g.toFixed(2)]})]}),S&&a.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Detalhes da Atividade Selecionada"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-700",children:"Porte:"}),a.jsx("p",{className:"text-gray-600",children:((U=S.enterprise_sizes)==null?void 0:U.name)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-700",children:"Potencial Poluidor:"}),a.jsx("p",{className:"text-gray-600",children:((K=S.pollution_potentials)==null?void 0:K.name)||"N/A"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-700",children:"Unidade de Medida:"}),a.jsx("p",{className:"text-gray-600",children:S.measurement_unit||"N/A"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-700",children:"Faixa:"}),a.jsx("p",{className:"text-gray-600",children:S.range_start&&S.range_end?`${S.range_start} - ${S.range_end}`:"N/A"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:"Configuração de Receita"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Destinação da Receita"}),a.jsxs("select",{value:l.revenue_destination,onChange:E=>T("revenue_destination",E.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"estado",children:"Estado (100%)"}),a.jsx("option",{value:"municipio",children:"Município (100%)"}),a.jsx("option",{value:"particionado",children:"Particionado (Estado/Município)"})]})]}),l.revenue_destination==="particionado"&&a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Percentual Município (%)"}),a.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:l.municipality_percentage,onChange:E=>{const $=parseFloat(E.target.value)||0;T("municipality_percentage",E.target.value),T("state_percentage",(100-$).toString())},className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Percentual Estado (%)"}),a.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:l.state_percentage,onChange:E=>{const $=parseFloat(E.target.value)||0;T("state_percentage",E.target.value),T("municipality_percentage",(100-$).toString())},className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",id:"is_exempt",checked:l.is_exempt,onChange:E=>T("is_exempt",E.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsx("label",{htmlFor:"is_exempt",className:"text-sm font-medium text-gray-700",children:"Isenção de Taxa"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observações"}),a.jsx("textarea",{value:l.observations,onChange:E=>T("observations",E.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Observações sobre a configuração de cobrança..."})]})]}),a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(Lr,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-yellow-900",children:"Atenção"}),a.jsx("p",{className:"text-sm text-yellow-800 mt-1",children:"Não é permitido criar configurações duplicadas para a mesma combinação de atividade, tipo de licença, porte e potencial poluidor."})]})]})})]}),a.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),a.jsxs("button",{onClick:I,disabled:h,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2 transition-colors",children:[h?a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsx(Wa,{className:"w-4 h-4"}),h?"Salvando...":"Salvar"]})]})]})}):null}function Ub({isOpen:t,onClose:e,title:n,item:i,onSave:s}){const[l,u]=z.useState({code:"",name:"",description:"",enterprise_size_id:"",pollution_potential_id:"",measurement_unit:"",range_start:"",range_end:"",license_types:[],documents:[]}),[h,f]=z.useState(!1),[p,v]=z.useState([]),[x,b]=z.useState([]),[N,k]=z.useState([]),[S,O]=z.useState([]),g=["Unidade","Hectare (ha)","Metro quadrado (m²)","Metro cúbico (m³)","Litro (L)","Quilograma (kg)","Tonelada (t)","Megawatt (MW)","Quilowatt (kW)","Cabeças (animais)","Metros lineares (m)","Quilômetros (km)"];z.useEffect(()=>{t&&_()},[t]),z.useEffect(()=>{var E,$,W;i?(u({code:((E=i.code)==null?void 0:E.toString())||"",name:i.name||"",description:i.description||"",enterprise_size_id:i.enterprise_size_id||"",pollution_potential_id:i.pollution_potential_id||"",measurement_unit:i.measurement_unit||"",range_start:(($=i.range_start)==null?void 0:$.toString())||"",range_end:((W=i.range_end)==null?void 0:W.toString())||"",license_types:[],documents:[]}),i.id&&w(i.id)):u({code:"",name:"",description:"",enterprise_size_id:"",pollution_potential_id:"",measurement_unit:"",range_start:"",range_end:"",license_types:[],documents:[]})},[i]);const _=async()=>{try{const{data:E,error:$}=await G.from("license_types").select("id, abbreviation, name").eq("is_active",!0).order("abbreviation");if($)throw $;v(E||[]);const{data:W,error:Z}=await G.from("documentation_templates").select("id, name, description").eq("is_active",!0).order("name");if(Z)throw Z;b(W||[]);const{data:J,error:ae}=await G.from("enterprise_sizes").select("id, name").eq("is_active",!0).order("name");if(ae)throw ae;k(J||[]);const{data:je,error:Re}=await G.from("pollution_potentials").select("id, name").eq("is_active",!0).order("name");if(Re)throw Re;O(je||[])}catch(E){console.error("Error loading dropdown data:",E),alert("Erro ao carregar dados: "+E.message)}},w=async E=>{try{const{data:$,error:W}=await G.from("activity_license_types").select("license_type_id, is_required").eq("activity_id",E);if(W)throw W;const{data:Z,error:J}=await G.from("activity_documents").select("documentation_template_id, is_required").eq("activity_id",E);if(J)throw J;u(ae=>({...ae,license_types:$||[],documents:Z||[]}))}catch($){console.error("Error loading activity relationships:",$)}},C=(E,$)=>{u(W=>({...W,[E]:$}))},T=E=>{u($=>$.license_types.findIndex(Z=>Z.license_type_id===E)>=0?{...$,license_types:$.license_types.filter(Z=>Z.license_type_id!==E)}:{...$,license_types:[...$.license_types,{license_type_id:E,is_required:!0}]})},P=E=>{u($=>$.documents.findIndex(Z=>Z.documentation_template_id===E)>=0?{...$,documents:$.documents.filter(Z=>Z.documentation_template_id!==E)}:{...$,documents:[...$.documents,{documentation_template_id:E,is_required:!0}]})},I=E=>{u($=>({...$,documents:$.documents.map(W=>W.documentation_template_id===E?{...W,is_required:!W.is_required}:W)}))},U=()=>{if(!l.code)return alert("Código da atividade é obrigatório"),!1;if(!l.name)return alert("Nome da atividade é obrigatório"),!1;if(l.license_types.length===0)return alert("Selecione pelo menos um tipo de licença"),!1;if(!l.enterprise_size_id)return alert("Selecione o porte do empreendimento"),!1;if(!l.pollution_potential_id)return alert("Selecione o potencial poluidor"),!1;if(l.range_start&&l.range_end){const E=parseFloat(l.range_start),$=parseFloat(l.range_end);if(E>=$)return alert("A faixa inicial deve ser menor que a faixa final"),!1}return!0},K=async E=>{if(E.preventDefault(),!!U()){f(!0);try{const $={code:parseFloat(l.code),name:l.name,description:l.description||null,enterprise_size_id:l.enterprise_size_id,pollution_potential_id:l.pollution_potential_id,measurement_unit:l.measurement_unit||null,range_start:l.range_start?parseFloat(l.range_start):null,range_end:l.range_end?parseFloat(l.range_end):null};let W;if(i!=null&&i.id){const{data:Z,error:J}=await G.from("activities").update($).eq("id",i.id).select().single();if(J)throw J.code==="23505"?new Error("Já existe uma atividade com este código ou nome."):J;W=Z.id,alert("Atividade atualizada com sucesso!")}else{const{data:Z,error:J}=await G.from("activities").insert($).select().single();if(J)throw J.code==="23505"?new Error("Já existe uma atividade com este código ou nome."):J;W=Z.id,alert("Atividade criada com sucesso!")}if(await G.from("activity_license_types").delete().eq("activity_id",W),l.license_types.length>0){const Z=l.license_types.map(ae=>({activity_id:W,license_type_id:ae.license_type_id,is_required:ae.is_required})),{error:J}=await G.from("activity_license_types").insert(Z);if(J)throw J}if(await G.from("activity_documents").delete().eq("activity_id",W),l.documents.length>0){const Z=l.documents.map(ae=>({activity_id:W,documentation_template_id:ae.documentation_template_id,is_required:ae.is_required})),{error:J}=await G.from("activity_documents").insert(Z);if(J)throw J}s(),e()}catch($){console.error("Error saving activity:",$),alert("Erro ao salvar atividade: "+$.message)}finally{f(!1)}}};return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(pu,{className:"w-6 h-6 text-blue-600"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:n})]}),a.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(mt,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:K,className:"p-6 space-y-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Código da Atividade ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",step:"0.01",value:l.code,onChange:E=>C("code",E.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: 1.1, 1.56, 2.3",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nome da Atividade ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:l.name,onChange:E=>C("name",E.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: Extração de areia",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrição"}),a.jsx("textarea",{value:l.description,onChange:E=>C("description",E.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Descrição detalhada da atividade"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Porte do Empreendimento ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{value:l.enterprise_size_id,onChange:E=>C("enterprise_size_id",E.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[a.jsx("option",{value:"",children:"Selecione o porte..."}),N.map(E=>a.jsx("option",{value:E.id,children:E.name},E.id))]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Potencial Poluidor ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{value:l.pollution_potential_id,onChange:E=>C("pollution_potential_id",E.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[a.jsx("option",{value:"",children:"Selecione o potencial..."}),S.map(E=>a.jsx("option",{value:E.id,children:E.name},E.id))]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unidade de Medida"}),a.jsxs("select",{value:l.measurement_unit,onChange:E=>C("measurement_unit",E.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"",children:"Selecione a unidade..."}),g.map(E=>a.jsx("option",{value:E,children:E},E))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Faixa Inicial"}),a.jsx("input",{type:"number",step:"0.01",value:l.range_start,onChange:E=>C("range_start",E.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: 0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Faixa Final"}),a.jsx("input",{type:"number",step:"0.01",value:l.range_end,onChange:E=>C("range_end",E.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: 1000"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Tipos de Licença Aplicáveis ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:p.map(E=>{const $=l.license_types.some(W=>W.license_type_id===E.id);return a.jsxs("label",{className:`flex items-center p-3 border rounded-lg cursor-pointer transition-colors ${$?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,children:[a.jsx("input",{type:"checkbox",checked:$,onChange:()=>T(E.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900",children:E.abbreviation}),a.jsx("p",{className:"text-xs text-gray-500",children:E.name})]})]},E.id)})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Documentos Exigidos"}),a.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto border border-gray-200 rounded-lg p-3",children:x.map(E=>{const $=l.documents.find(Z=>Z.documentation_template_id===E.id),W=!!$;return a.jsxs("div",{className:`flex items-center justify-between p-3 border rounded-lg ${W?"border-blue-500 bg-blue-50":"border-gray-300"}`,children:[a.jsxs("label",{className:"flex items-center cursor-pointer flex-1",children:[a.jsx("input",{type:"checkbox",checked:W,onChange:()=>P(E.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900",children:E.name}),a.jsx("p",{className:"text-xs text-gray-500",children:E.description})]})]}),W&&a.jsxs("label",{className:"flex items-center ml-3",children:[a.jsx("input",{type:"checkbox",checked:$.is_required,onChange:()=>I(E.id),className:"rounded border-gray-300 text-red-600 focus:ring-red-500"}),a.jsx("span",{className:"ml-2 text-xs text-red-600 font-medium",children:"Obrigatório"})]})]},E.id)})})]}),a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(Lr,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-yellow-900",children:"Atenção"}),a.jsx("p",{className:"text-sm text-yellow-800 mt-1",children:"Não é permitido criar atividades com código ou nome duplicados. Certifique-se de selecionar pelo menos um tipo de licença aplicável."})]})]})})]}),a.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),a.jsxs("button",{onClick:K,disabled:h,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2 transition-colors",children:[h?a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsx(Wa,{className:"w-4 h-4"}),h?"Salvando...":"Salvar"]})]})]})}):null}const Fb={"property-types":{title:"Tipos de Imóvel",tableName:"property_types",columns:[{key:"name",label:"Nome",type:"text"},{key:"description",label:"Descrição",type:"text"}],formFields:[{key:"name",label:"Nome",type:"text",required:!0,placeholder:"Ex: Rural, Urbano, Linear"},{key:"description",label:"Descrição",type:"textarea",placeholder:"Descrição detalhada do tipo de imóvel"}]},"process-types":{title:"Tipos de Processo",tableName:"process_types",columns:[{key:"name",label:"Nome",type:"text"},{key:"abbreviation",label:"Sigla",type:"text"},{key:"description",label:"Descrição",type:"text"},{key:"default_deadline_days",label:"Prazo (dias)",type:"number",render:t=>t?`${t} dias`:"-"},{key:"display_order",label:"Ordem",type:"number"}],formFields:[{key:"name",label:"Nome do Tipo de Processo",type:"text",required:!0,placeholder:"Ex: Licença Prévia, Autorização Ambiental"},{key:"abbreviation",label:"Sigla/Abreviação",type:"text",placeholder:"Ex: LP, AA, RE"},{key:"description",label:"Descrição",type:"textarea",placeholder:"Descrição detalhada do tipo de processo"},{key:"default_deadline_days",label:"Prazo Padrão (dias)",type:"number",placeholder:"Ex: 180, 120, 90"},{key:"display_order",label:"Ordem de Exibição",type:"number",placeholder:"Ex: 1, 2, 3..."}]},"enterprise-sizes":{title:"Porte do Empreendimento",tableName:"enterprise_sizes",columns:[{key:"name",label:"Nome",type:"text"},{key:"description",label:"Descrição",type:"text"}],formFields:[{key:"name",label:"Nome",type:"text",required:!0,placeholder:"Ex: Pequeno, Médio, Grande"},{key:"description",label:"Descrição",type:"textarea",placeholder:"Descrição do porte do empreendimento"}]},"pollution-potentials":{title:"Potencial Poluidor",tableName:"pollution_potentials",columns:[{key:"name",label:"Nome",type:"text"},{key:"description",label:"Descrição",type:"text"}],formFields:[{key:"name",label:"Nome",type:"text",required:!0,placeholder:"Ex: Baixo, Médio, Alto"},{key:"description",label:"Descrição",type:"textarea",placeholder:"Descrição do potencial poluidor"}]},"reference-units":{title:"Unidades de Referência",tableName:"reference_units",columns:[{key:"code",label:"Código",type:"text"},{key:"name",label:"Nome",type:"text"},{key:"description",label:"Descrição",type:"text"}],formFields:[{key:"code",label:"Código",type:"text",required:!0,placeholder:"Ex: UPF, UFIR, SM"},{key:"name",label:"Nome",type:"text",required:!0,placeholder:"Ex: Unidade Padrão Fiscal"},{key:"description",label:"Descrição",type:"textarea",placeholder:"Descrição da unidade de referência"}]},"license-types":{title:"Tipos de Licença",tableName:"license_types",columns:[{key:"abbreviation",label:"Sigla",type:"text"},{key:"name",label:"Nome",type:"text"},{key:"validity_period",label:"Prazo",type:"number"},{key:"time_unit",label:"Unidade",type:"text"}],formFields:[{key:"abbreviation",label:"Sigla/Abreviação",type:"text",required:!0,placeholder:"Ex: LP, LI, LO"},{key:"name",label:"Tipo da Licença",type:"text",required:!0,placeholder:"Ex: Licença Prévia"},{key:"validity_period",label:"Prazo de Validade",type:"number",required:!0,placeholder:"Ex: 5"},{key:"time_unit",label:"Unidade de Tempo",type:"select",required:!0,options:[{value:"meses",label:"Meses"},{value:"anos",label:"Anos"}]},{key:"description",label:"Descrição",type:"textarea",placeholder:"Descrição do tipo de licença"}]},"study-types":{title:"Tipos de Estudo",tableName:"study_types",columns:[{key:"abbreviation",label:"Sigla",type:"text"},{key:"name",label:"Nome",type:"text"},{key:"description",label:"Descrição",type:"text"}],formFields:[{key:"abbreviation",label:"Sigla/Abreviação",type:"text",required:!0,placeholder:"Ex: EIA, RIMA, RAP"},{key:"name",label:"Nome do Estudo",type:"text",required:!0,placeholder:"Ex: Estudo de Impacto Ambiental"},{key:"description",label:"Descrição",type:"textarea",placeholder:"Descrição do tipo de estudo"}]},"billing-configurations":{title:"Configuração de Cobrança",tableName:"billing_configurations",columns:[{key:"activities",label:"Atividade",type:"text",render:t=>t?`${t.code} - ${t.name}`:"-"},{key:"license_types",label:"Tipo de Licença",type:"text",render:t=>t?`${t.abbreviation} - ${t.name}`:"-"},{key:"reference_units",label:"Unidade Ref.",type:"text",render:t=>t?t.code:"-"},{key:"unit_value",label:"Valor Base",type:"number",render:t=>t?`R$ ${t.toLocaleString("pt-BR",{minimumFractionDigits:2})}`:"-"},{key:"multiplication_factor",label:"Fator",type:"number",render:t=>t?`${t}x`:"-"},{key:"is_exempt",label:"Isenção",type:"boolean",render:t=>t?a.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded-full",children:"Isento"}):a.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:"Cobrável"})}],formFields:[{key:"activity_id",label:"Atividade",type:"select",required:!0,options:[]},{key:"license_type_id",label:"Tipo de Licença",type:"select",required:!0,options:[]},{key:"reference_unit_id",label:"Unidade de Referência",type:"select",required:!0,options:[]},{key:"unit_value",label:"Valor Base (R$)",type:"decimal",required:!0,placeholder:"Ex: 150.00"},{key:"multiplication_factor",label:"Fator de Multiplicação",type:"decimal",placeholder:"Ex: 2.5 (padrão: 1.0)"},{key:"is_exempt",label:"Isenção de Taxa",type:"checkbox"},{key:"revenue_destination",label:"Destinação da Receita",type:"select",options:[{value:"estado",label:"Estado (100%)"},{value:"municipio",label:"Município (100%)"},{value:"particionado",label:"Particionado (Estado/Município)"}]},{key:"municipality_percentage",label:"Percentual Município (%)",type:"decimal",placeholder:"Ex: 30.0 (apenas se particionado)"},{key:"state_percentage",label:"Percentual Estado (%)",type:"decimal",placeholder:"Ex: 70.0 (apenas se particionado)"},{key:"observations",label:"Observações",type:"textarea",placeholder:"Observações sobre a configuração de cobrança"}]},activities:{title:"Atividades",tableName:"activities",columns:[{key:"code",label:"Código",type:"number"},{key:"name",label:"Nome",type:"text"},{key:"enterprise_sizes",label:"Porte",type:"text",render:t=>(t==null?void 0:t.name)||"-"},{key:"pollution_potentials",label:"Potencial Poluidor",type:"text",render:t=>(t==null?void 0:t.name)||"-"},{key:"measurement_unit",label:"Unidade",type:"text"},{key:"range_start",label:"Faixa Inicial",type:"number",render:t=>t?t.toLocaleString("pt-BR"):"-"},{key:"range_end",label:"Faixa Final",type:"number",render:t=>t?t.toLocaleString("pt-BR"):"-"}],formFields:[]},"documentation-templates":{title:"Documentação",tableName:"documentation_templates",columns:[{key:"name",label:"Nome",type:"text"},{key:"description",label:"Descrição",type:"text"},{key:"document_types",label:"Tipos",type:"array"},{key:"template_file_name",label:"Modelo",type:"text",render:t=>t?a.jsxs("span",{className:"text-blue-600 text-sm",children:["📎 ",t]}):a.jsx("span",{className:"text-gray-400 text-sm",children:"Sem modelo"})}],formFields:[{key:"name",label:"Nome do Documento",type:"text",required:!0,placeholder:"Ex: Requerimento de Licença"},{key:"description",label:"Descrição",type:"textarea",required:!0,placeholder:"Descrição detalhada do documento"},{key:"document_types",label:"Tipos de Documento",type:"multiselect",required:!0,options:[{value:"Word",label:"Word"},{value:"PDF",label:"PDF"},{value:"Imagem",label:"Imagem"},{value:"Zip",label:"Zip"},{value:"Excel",label:"Excel"}]},{key:"template_file",label:"Upload de Modelo (Opcional)",type:"file",accept:".doc,.docx,.pdf,.jpg,.jpeg,.png,.xlsx,.xls"}]}};function qb(){const[t,e]=z.useState("property-types"),[n,i]=z.useState(!1),[s,l]=z.useState(null),[u,h]=z.useState(0),f=Fb[t],p=()=>{l(null),i(!0)},v=N=>{l(N),i(!0)},x=N=>{const k=(O,g)=>O==="default_deadline_days"&&g?`${g} dias`:O==="is_active"?g?"Ativo":"Inativo":O==="created_at"||O==="updated_at"?new Date(g).toLocaleString("pt-BR"):g||"Não informado",S=Object.entries(N).filter(([O])=>!["id"].includes(O)).map(([O,g])=>`${{name:"Nome",abbreviation:"Sigla",description:"Descrição",default_deadline_days:"Prazo Padrão",display_order:"Ordem de Exibição",is_active:"Status",created_at:"Criado em",updated_at:"Atualizado em"}[O]||O}: ${k(O,g)}`).join(`
`);alert(`Detalhes do Item:

${S}`)},b=()=>{i(!1),l(null),h(N=>N+1)};return t==="billing-configurations"?a.jsx(lc,{activeSection:t,onSectionChange:e,children:a.jsxs("div",{className:"p-6 h-full overflow-y-auto",children:[a.jsx(cc,{title:f.title,tableName:f.tableName,columns:f.columns,searchFields:["activities.name","license_types.name","reference_units.code"],onCreate:p,onEdit:v,onView:x},`${t}-${u}`),a.jsx($b,{isOpen:n,onClose:()=>i(!1),title:`${s?"Editar":"Nova"} ${f.title}`,item:s,onSave:b})]})}):t==="activities"?a.jsx(lc,{activeSection:t,onSectionChange:e,children:a.jsxs("div",{className:"p-6 h-full overflow-y-auto",children:[a.jsx(cc,{title:f.title,tableName:f.tableName,columns:f.columns,searchFields:["name","code"],onCreate:p,onEdit:v,onView:x},`${t}-${u}`),a.jsx(Ub,{isOpen:n,onClose:()=>i(!1),title:`${s?"Editar":"Nova"} ${f.title.slice(0,-1)}`,item:s,onSave:b})]})}):f?a.jsx(lc,{activeSection:t,onSectionChange:e,children:a.jsxs("div",{className:"p-6 h-full overflow-y-auto",children:[a.jsx(cc,{title:f.title,tableName:f.tableName,columns:f.columns,searchFields:["name","description","abbreviation","code"],onCreate:p,onEdit:v,onView:x},`${t}-${u}`),a.jsx(Bb,{isOpen:n,onClose:()=>i(!1),title:`${s?"Editar":"Novo"} ${f.title.slice(0,-1)}`,tableName:f.tableName,fields:f.formFields,item:s,onSave:b})]})}):a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Seção não encontrada"}),a.jsx("p",{className:"text-gray-600",children:"A seção selecionada não está disponível."})]})})}function e0(t,e){const n=z.useRef(e);z.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const Zb=1;function Hb(t){return Object.freeze({__version:Zb,map:t})}function t0(t,e){return Object.freeze({...t,...e})}const n0=z.createContext(null),r0=n0.Provider;function Ga(){const t=z.useContext(n0);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function i0(t){function e(n,i){const{instance:s,context:l}=t(n).current;return z.useImperativeHandle(i,()=>s),n.children==null?null:nt.createElement(r0,{value:l},n.children)}return z.forwardRef(e)}function Wb(t){function e(n,i){const[s,l]=z.useState(!1),{instance:u}=t(n,l).current;z.useImperativeHandle(i,()=>u),z.useEffect(function(){s&&u.update()},[u,s,n.children]);const h=u._contentNode;return h?xg.createPortal(n.children,h):null}return z.forwardRef(e)}function Vb(t){function e(n,i){const{instance:s}=t(n).current;return z.useImperativeHandle(i,()=>s),null}return z.forwardRef(e)}function jd(t,e){const n=z.useRef();z.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Ka(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function Gb(t,e){return function(i,s){const l=Ga(),u=t(Ka(i,l),l);return e0(l.map,i.attribution),jd(u.current,i.eventHandlers),e(u.current,l,i,s),u}}var xu={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(Pt,function(n){var i="1.9.4";function s(r){var o,c,d,m;for(c=1,d=arguments.length;c<d;c++){m=arguments[c];for(o in m)r[o]=m[o]}return r}var l=Object.create||function(){function r(){}return function(o){return r.prototype=o,new r}}();function u(r,o){var c=Array.prototype.slice;if(r.bind)return r.bind.apply(r,c.call(arguments,1));var d=c.call(arguments,2);return function(){return r.apply(o,d.length?d.concat(c.call(arguments)):arguments)}}var h=0;function f(r){return"_leaflet_id"in r||(r._leaflet_id=++h),r._leaflet_id}function p(r,o,c){var d,m,y,j;return j=function(){d=!1,m&&(y.apply(c,m),m=!1)},y=function(){d?m=arguments:(r.apply(c,arguments),setTimeout(j,o),d=!0)},y}function v(r,o,c){var d=o[1],m=o[0],y=d-m;return r===d&&c?r:((r-m)%y+y)%y+m}function x(){return!1}function b(r,o){if(o===!1)return r;var c=Math.pow(10,o===void 0?6:o);return Math.round(r*c)/c}function N(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function k(r){return N(r).split(/\s+/)}function S(r,o){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?l(r.options):{});for(var c in o)r.options[c]=o[c];return r.options}function O(r,o,c){var d=[];for(var m in r)d.push(encodeURIComponent(c?m.toUpperCase():m)+"="+encodeURIComponent(r[m]));return(!o||o.indexOf("?")===-1?"?":"&")+d.join("&")}var g=/\{ *([\w_ -]+) *\}/g;function _(r,o){return r.replace(g,function(c,d){var m=o[d];if(m===void 0)throw new Error("No value provided for variable "+c);return typeof m=="function"&&(m=m(o)),m})}var w=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function C(r,o){for(var c=0;c<r.length;c++)if(r[c]===o)return c;return-1}var T="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function P(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var I=0;function U(r){var o=+new Date,c=Math.max(0,16-(o-I));return I=o+c,window.setTimeout(r,c)}var K=window.requestAnimationFrame||P("RequestAnimationFrame")||U,E=window.cancelAnimationFrame||P("CancelAnimationFrame")||P("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function $(r,o,c){if(c&&K===U)r.call(o);else return K.call(window,u(r,o))}function W(r){r&&E.call(window,r)}var Z={__proto__:null,extend:s,create:l,bind:u,get lastId(){return h},stamp:f,throttle:p,wrapNum:v,falseFn:x,formatNum:b,trim:N,splitWords:k,setOptions:S,getParamString:O,template:_,isArray:w,indexOf:C,emptyImageUrl:T,requestFn:K,cancelFn:E,requestAnimFrame:$,cancelAnimFrame:W};function J(){}J.extend=function(r){var o=function(){S(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=o.__super__=this.prototype,d=l(c);d.constructor=o,o.prototype=d;for(var m in this)Object.prototype.hasOwnProperty.call(this,m)&&m!=="prototype"&&m!=="__super__"&&(o[m]=this[m]);return r.statics&&s(o,r.statics),r.includes&&(ae(r.includes),s.apply(null,[d].concat(r.includes))),s(d,r),delete d.statics,delete d.includes,d.options&&(d.options=c.options?l(c.options):{},s(d.options,r.options)),d._initHooks=[],d.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var y=0,j=d._initHooks.length;y<j;y++)d._initHooks[y].call(this)}},o},J.include=function(r){var o=this.prototype.options;return s(this.prototype,r),r.options&&(this.prototype.options=o,this.mergeOptions(r.options)),this},J.mergeOptions=function(r){return s(this.prototype.options,r),this},J.addInitHook=function(r){var o=Array.prototype.slice.call(arguments,1),c=typeof r=="function"?r:function(){this[r].apply(this,o)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function ae(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=w(r)?r:[r];for(var o=0;o<r.length;o++)r[o]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var je={on:function(r,o,c){if(typeof r=="object")for(var d in r)this._on(d,r[d],o);else{r=k(r);for(var m=0,y=r.length;m<y;m++)this._on(r[m],o,c)}return this},off:function(r,o,c){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var d in r)this._off(d,r[d],o);else{r=k(r);for(var m=arguments.length===1,y=0,j=r.length;y<j;y++)m?this._off(r[y]):this._off(r[y],o,c)}return this},_on:function(r,o,c,d){if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}if(this._listens(r,o,c)===!1){c===this&&(c=void 0);var m={fn:o,ctx:c};d&&(m.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(m)}},_off:function(r,o,c){var d,m,y;if(this._events&&(d=this._events[r],!!d)){if(arguments.length===1){if(this._firingCount)for(m=0,y=d.length;m<y;m++)d[m].fn=x;delete this._events[r];return}if(typeof o!="function"){console.warn("wrong listener type: "+typeof o);return}var j=this._listens(r,o,c);if(j!==!1){var A=d[j];this._firingCount&&(A.fn=x,this._events[r]=d=d.slice()),d.splice(j,1)}}},fire:function(r,o,c){if(!this.listens(r,c))return this;var d=s({},o,{type:r,target:this,sourceTarget:o&&o.sourceTarget||this});if(this._events){var m=this._events[r];if(m){this._firingCount=this._firingCount+1||1;for(var y=0,j=m.length;y<j;y++){var A=m[y],M=A.fn;A.once&&this.off(r,M,A.ctx),M.call(A.ctx||this,d)}this._firingCount--}}return c&&this._propagateEvent(d),this},listens:function(r,o,c,d){typeof r!="string"&&console.warn('"string" type argument expected');var m=o;typeof o!="function"&&(d=!!o,m=void 0,c=void 0);var y=this._events&&this._events[r];if(y&&y.length&&this._listens(r,m,c)!==!1)return!0;if(d){for(var j in this._eventParents)if(this._eventParents[j].listens(r,o,c,d))return!0}return!1},_listens:function(r,o,c){if(!this._events)return!1;var d=this._events[r]||[];if(!o)return!!d.length;c===this&&(c=void 0);for(var m=0,y=d.length;m<y;m++)if(d[m].fn===o&&d[m].ctx===c)return m;return!1},once:function(r,o,c){if(typeof r=="object")for(var d in r)this._on(d,r[d],o,!0);else{r=k(r);for(var m=0,y=r.length;m<y;m++)this._on(r[m],o,c,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[f(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[f(r)],this},_propagateEvent:function(r){for(var o in this._eventParents)this._eventParents[o].fire(r.type,s({layer:r.target,propagatedFrom:r.target},r),!0)}};je.addEventListener=je.on,je.removeEventListener=je.clearAllEventListeners=je.off,je.addOneTimeEventListener=je.once,je.fireEvent=je.fire,je.hasEventListeners=je.listens;var Re=J.extend(je);function D(r,o,c){this.x=c?Math.round(r):r,this.y=c?Math.round(o):o}var Y=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};D.prototype={clone:function(){return new D(this.x,this.y)},add:function(r){return this.clone()._add(H(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(H(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new D(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new D(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Y(this.x),this.y=Y(this.y),this},distanceTo:function(r){r=H(r);var o=r.x-this.x,c=r.y-this.y;return Math.sqrt(o*o+c*c)},equals:function(r){return r=H(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=H(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+b(this.x)+", "+b(this.y)+")"}};function H(r,o,c){return r instanceof D?r:w(r)?new D(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new D(r.x,r.y):new D(r,o,c)}function re(r,o){if(r)for(var c=o?[r,o]:r,d=0,m=c.length;d<m;d++)this.extend(c[d])}re.prototype={extend:function(r){var o,c;if(!r)return this;if(r instanceof D||typeof r[0]=="number"||"x"in r)o=c=H(r);else if(r=ue(r),o=r.min,c=r.max,!o||!c)return this;return!this.min&&!this.max?(this.min=o.clone(),this.max=c.clone()):(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(r){return H((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return H(this.min.x,this.max.y)},getTopRight:function(){return H(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var o,c;return typeof r[0]=="number"||r instanceof D?r=H(r):r=ue(r),r instanceof re?(o=r.min,c=r.max):o=c=r,o.x>=this.min.x&&c.x<=this.max.x&&o.y>=this.min.y&&c.y<=this.max.y},intersects:function(r){r=ue(r);var o=this.min,c=this.max,d=r.min,m=r.max,y=m.x>=o.x&&d.x<=c.x,j=m.y>=o.y&&d.y<=c.y;return y&&j},overlaps:function(r){r=ue(r);var o=this.min,c=this.max,d=r.min,m=r.max,y=m.x>o.x&&d.x<c.x,j=m.y>o.y&&d.y<c.y;return y&&j},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var o=this.min,c=this.max,d=Math.abs(o.x-c.x)*r,m=Math.abs(o.y-c.y)*r;return ue(H(o.x-d,o.y-m),H(c.x+d,c.y+m))},equals:function(r){return r?(r=ue(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function ue(r,o){return!r||r instanceof re?r:new re(r,o)}function Ce(r,o){if(r)for(var c=o?[r,o]:r,d=0,m=c.length;d<m;d++)this.extend(c[d])}Ce.prototype={extend:function(r){var o=this._southWest,c=this._northEast,d,m;if(r instanceof he)d=r,m=r;else if(r instanceof Ce){if(d=r._southWest,m=r._northEast,!d||!m)return this}else return r?this.extend(B(r)||me(r)):this;return!o&&!c?(this._southWest=new he(d.lat,d.lng),this._northEast=new he(m.lat,m.lng)):(o.lat=Math.min(d.lat,o.lat),o.lng=Math.min(d.lng,o.lng),c.lat=Math.max(m.lat,c.lat),c.lng=Math.max(m.lng,c.lng)),this},pad:function(r){var o=this._southWest,c=this._northEast,d=Math.abs(o.lat-c.lat)*r,m=Math.abs(o.lng-c.lng)*r;return new Ce(new he(o.lat-d,o.lng-m),new he(c.lat+d,c.lng+m))},getCenter:function(){return new he((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new he(this.getNorth(),this.getWest())},getSouthEast:function(){return new he(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof he||"lat"in r?r=B(r):r=me(r);var o=this._southWest,c=this._northEast,d,m;return r instanceof Ce?(d=r.getSouthWest(),m=r.getNorthEast()):d=m=r,d.lat>=o.lat&&m.lat<=c.lat&&d.lng>=o.lng&&m.lng<=c.lng},intersects:function(r){r=me(r);var o=this._southWest,c=this._northEast,d=r.getSouthWest(),m=r.getNorthEast(),y=m.lat>=o.lat&&d.lat<=c.lat,j=m.lng>=o.lng&&d.lng<=c.lng;return y&&j},overlaps:function(r){r=me(r);var o=this._southWest,c=this._northEast,d=r.getSouthWest(),m=r.getNorthEast(),y=m.lat>o.lat&&d.lat<c.lat,j=m.lng>o.lng&&d.lng<c.lng;return y&&j},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,o){return r?(r=me(r),this._southWest.equals(r.getSouthWest(),o)&&this._northEast.equals(r.getNorthEast(),o)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function me(r,o){return r instanceof Ce?r:new Ce(r,o)}function he(r,o,c){if(isNaN(r)||isNaN(o))throw new Error("Invalid LatLng object: ("+r+", "+o+")");this.lat=+r,this.lng=+o,c!==void 0&&(this.alt=+c)}he.prototype={equals:function(r,o){if(!r)return!1;r=B(r);var c=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return c<=(o===void 0?1e-9:o)},toString:function(r){return"LatLng("+b(this.lat,r)+", "+b(this.lng,r)+")"},distanceTo:function(r){return qe.distance(this,B(r))},wrap:function(){return qe.wrapLatLng(this)},toBounds:function(r){var o=180*r/40075017,c=o/Math.cos(Math.PI/180*this.lat);return me([this.lat-o,this.lng-c],[this.lat+o,this.lng+c])},clone:function(){return new he(this.lat,this.lng,this.alt)}};function B(r,o,c){return r instanceof he?r:w(r)&&typeof r[0]!="object"?r.length===3?new he(r[0],r[1],r[2]):r.length===2?new he(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new he(r.lat,"lng"in r?r.lng:r.lon,r.alt):o===void 0?null:new he(r,o,c)}var ve={latLngToPoint:function(r,o){var c=this.projection.project(r),d=this.scale(o);return this.transformation._transform(c,d)},pointToLatLng:function(r,o){var c=this.scale(o),d=this.transformation.untransform(r,c);return this.projection.unproject(d)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var o=this.projection.bounds,c=this.scale(r),d=this.transformation.transform(o.min,c),m=this.transformation.transform(o.max,c);return new re(d,m)},infinite:!1,wrapLatLng:function(r){var o=this.wrapLng?v(r.lng,this.wrapLng,!0):r.lng,c=this.wrapLat?v(r.lat,this.wrapLat,!0):r.lat,d=r.alt;return new he(c,o,d)},wrapLatLngBounds:function(r){var o=r.getCenter(),c=this.wrapLatLng(o),d=o.lat-c.lat,m=o.lng-c.lng;if(d===0&&m===0)return r;var y=r.getSouthWest(),j=r.getNorthEast(),A=new he(y.lat-d,y.lng-m),M=new he(j.lat-d,j.lng-m);return new Ce(A,M)}},qe=s({},ve,{wrapLng:[-180,180],R:6371e3,distance:function(r,o){var c=Math.PI/180,d=r.lat*c,m=o.lat*c,y=Math.sin((o.lat-r.lat)*c/2),j=Math.sin((o.lng-r.lng)*c/2),A=y*y+Math.cos(d)*Math.cos(m)*j*j,M=2*Math.atan2(Math.sqrt(A),Math.sqrt(1-A));return this.R*M}}),$t=6378137,V={R:$t,MAX_LATITUDE:85.0511287798,project:function(r){var o=Math.PI/180,c=this.MAX_LATITUDE,d=Math.max(Math.min(c,r.lat),-c),m=Math.sin(d*o);return new D(this.R*r.lng*o,this.R*Math.log((1+m)/(1-m))/2)},unproject:function(r){var o=180/Math.PI;return new he((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*o,r.x*o/this.R)},bounds:function(){var r=$t*Math.PI;return new re([-r,-r],[r,r])}()};function oe(r,o,c,d){if(w(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=o,this._c=c,this._d=d}oe.prototype={transform:function(r,o){return this._transform(r.clone(),o)},_transform:function(r,o){return o=o||1,r.x=o*(this._a*r.x+this._b),r.y=o*(this._c*r.y+this._d),r},untransform:function(r,o){return o=o||1,new D((r.x/o-this._b)/this._a,(r.y/o-this._d)/this._c)}};function De(r,o,c,d){return new oe(r,o,c,d)}var ye=s({},qe,{code:"EPSG:3857",projection:V,transformation:function(){var r=.5/(Math.PI*V.R);return De(r,.5,-r,.5)}()}),dn=s({},ye,{code:"EPSG:900913"});function hn(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function ar(r,o){var c="",d,m,y,j,A,M;for(d=0,y=r.length;d<y;d++){for(A=r[d],m=0,j=A.length;m<j;m++)M=A[m],c+=(m?"L":"M")+M.x+" "+M.y;c+=o?ee.svg?"z":"x":""}return c||"M0 0"}var Ln=document.documentElement.style,fn="ActiveXObject"in window,On=fn&&!document.addEventListener,Mr="msLaunchUri"in navigator&&!("documentMode"in document),lr=en("webkit"),Gs=en("android"),An=en("android 2")||en("android 3"),Xa=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ks=Gs&&en("Google")&&Xa<537&&!("AudioNode"in window),zr=!!window.opera,R=!Mr&&en("chrome"),ne=en("gecko")&&!lr&&!zr&&!fn,te=!R&&en("safari"),Ne=en("phantom"),be="OTransition"in Ln,$e=navigator.platform.indexOf("Win")===0,Ut=fn&&"transition"in Ln,Ft="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!An,Nd="MozPerspective"in Ln,l0=!window.L_DISABLE_3D&&(Ut||Ft||Nd)&&!be&&!Ne,Ii=typeof orientation<"u"||en("mobile"),c0=Ii&&lr,u0=Ii&&Ft,Sd=!window.PointerEvent&&window.MSPointerEvent,Pd=!!(window.PointerEvent||Sd),Ed="ontouchstart"in window||!!window.TouchEvent,d0=!window.L_NO_TOUCH&&(Ed||Pd),h0=Ii&&zr,f0=Ii&&ne,m0=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,p0=function(){var r=!1;try{var o=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",x,o),window.removeEventListener("testPassiveEventSupport",x,o)}catch{}return r}(),g0=function(){return!!document.createElement("canvas").getContext}(),Ya=!!(document.createElementNS&&hn("svg").createSVGRect),v0=!!Ya&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),y0=!Ya&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var o=r.firstChild;return o.style.behavior="url(#default#VML)",o&&typeof o.adj=="object"}catch{return!1}}(),_0=navigator.platform.indexOf("Mac")===0,x0=navigator.platform.indexOf("Linux")===0;function en(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var ee={ie:fn,ielt9:On,edge:Mr,webkit:lr,android:Gs,android23:An,androidStock:Ks,opera:zr,chrome:R,gecko:ne,safari:te,phantom:Ne,opera12:be,win:$e,ie3d:Ut,webkit3d:Ft,gecko3d:Nd,any3d:l0,mobile:Ii,mobileWebkit:c0,mobileWebkit3d:u0,msPointer:Sd,pointer:Pd,touch:d0,touchNative:Ed,mobileOpera:h0,mobileGecko:f0,retina:m0,passiveEvents:p0,canvas:g0,svg:Ya,vml:y0,inlineSvg:v0,mac:_0,linux:x0},Cd=ee.msPointer?"MSPointerDown":"pointerdown",Td=ee.msPointer?"MSPointerMove":"pointermove",Ld=ee.msPointer?"MSPointerUp":"pointerup",Od=ee.msPointer?"MSPointerCancel":"pointercancel",el={touchstart:Cd,touchmove:Td,touchend:Ld,touchcancel:Od},Ad={touchstart:S0,touchmove:Js,touchend:Js,touchcancel:Js},Rr={},Id=!1;function w0(r,o,c){return o==="touchstart"&&N0(),Ad[o]?(c=Ad[o].bind(this,c),r.addEventListener(el[o],c,!1),c):(console.warn("wrong event specified:",o),x)}function b0(r,o,c){if(!el[o]){console.warn("wrong event specified:",o);return}r.removeEventListener(el[o],c,!1)}function j0(r){Rr[r.pointerId]=r}function k0(r){Rr[r.pointerId]&&(Rr[r.pointerId]=r)}function Md(r){delete Rr[r.pointerId]}function N0(){Id||(document.addEventListener(Cd,j0,!0),document.addEventListener(Td,k0,!0),document.addEventListener(Ld,Md,!0),document.addEventListener(Od,Md,!0),Id=!0)}function Js(r,o){if(o.pointerType!==(o.MSPOINTER_TYPE_MOUSE||"mouse")){o.touches=[];for(var c in Rr)o.touches.push(Rr[c]);o.changedTouches=[o],r(o)}}function S0(r,o){o.MSPOINTER_TYPE_TOUCH&&o.pointerType===o.MSPOINTER_TYPE_TOUCH&&et(o),Js(r,o)}function P0(r){var o={},c,d;for(d in r)c=r[d],o[d]=c&&c.bind?c.bind(r):c;return r=o,o.type="dblclick",o.detail=2,o.isTrusted=!1,o._simulated=!0,o}var E0=200;function C0(r,o){r.addEventListener("dblclick",o);var c=0,d;function m(y){if(y.detail!==1){d=y.detail;return}if(!(y.pointerType==="mouse"||y.sourceCapabilities&&!y.sourceCapabilities.firesTouchEvents)){var j=$d(y);if(!(j.some(function(M){return M instanceof HTMLLabelElement&&M.attributes.for})&&!j.some(function(M){return M instanceof HTMLInputElement||M instanceof HTMLSelectElement}))){var A=Date.now();A-c<=E0?(d++,d===2&&o(P0(y))):d=1,c=A}}}return r.addEventListener("click",m),{dblclick:o,simDblclick:m}}function T0(r,o){r.removeEventListener("dblclick",o.dblclick),r.removeEventListener("click",o.simDblclick)}var tl=Ys(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Mi=Ys(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),zd=Mi==="webkitTransition"||Mi==="OTransition"?Mi+"End":"transitionend";function Rd(r){return typeof r=="string"?document.getElementById(r):r}function zi(r,o){var c=r.style[o]||r.currentStyle&&r.currentStyle[o];if((!c||c==="auto")&&document.defaultView){var d=document.defaultView.getComputedStyle(r,null);c=d?d[o]:null}return c==="auto"?null:c}function we(r,o,c){var d=document.createElement(r);return d.className=o||"",c&&c.appendChild(d),d}function Ae(r){var o=r.parentNode;o&&o.removeChild(r)}function Qs(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function Dr(r){var o=r.parentNode;o&&o.lastChild!==r&&o.appendChild(r)}function Br(r){var o=r.parentNode;o&&o.firstChild!==r&&o.insertBefore(r,o.firstChild)}function nl(r,o){if(r.classList!==void 0)return r.classList.contains(o);var c=Xs(r);return c.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(c)}function de(r,o){if(r.classList!==void 0)for(var c=k(o),d=0,m=c.length;d<m;d++)r.classList.add(c[d]);else if(!nl(r,o)){var y=Xs(r);rl(r,(y?y+" ":"")+o)}}function Ue(r,o){r.classList!==void 0?r.classList.remove(o):rl(r,N((" "+Xs(r)+" ").replace(" "+o+" "," ")))}function rl(r,o){r.className.baseVal===void 0?r.className=o:r.className.baseVal=o}function Xs(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function Lt(r,o){"opacity"in r.style?r.style.opacity=o:"filter"in r.style&&L0(r,o)}function L0(r,o){var c=!1,d="DXImageTransform.Microsoft.Alpha";try{c=r.filters.item(d)}catch{if(o===1)return}o=Math.round(o*100),c?(c.Enabled=o!==100,c.Opacity=o):r.style.filter+=" progid:"+d+"(opacity="+o+")"}function Ys(r){for(var o=document.documentElement.style,c=0;c<r.length;c++)if(r[c]in o)return r[c];return!1}function cr(r,o,c){var d=o||new D(0,0);r.style[tl]=(ee.ie3d?"translate("+d.x+"px,"+d.y+"px)":"translate3d("+d.x+"px,"+d.y+"px,0)")+(c?" scale("+c+")":"")}function Ze(r,o){r._leaflet_pos=o,ee.any3d?cr(r,o):(r.style.left=o.x+"px",r.style.top=o.y+"px")}function ur(r){return r._leaflet_pos||new D(0,0)}var Ri,Di,il;if("onselectstart"in document)Ri=function(){le(window,"selectstart",et)},Di=function(){Se(window,"selectstart",et)};else{var Bi=Ys(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ri=function(){if(Bi){var r=document.documentElement.style;il=r[Bi],r[Bi]="none"}},Di=function(){Bi&&(document.documentElement.style[Bi]=il,il=void 0)}}function sl(){le(window,"dragstart",et)}function ol(){Se(window,"dragstart",et)}var eo,al;function ll(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(to(),eo=r,al=r.style.outlineStyle,r.style.outlineStyle="none",le(window,"keydown",to))}function to(){eo&&(eo.style.outlineStyle=al,eo=void 0,al=void 0,Se(window,"keydown",to))}function Dd(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function cl(r){var o=r.getBoundingClientRect();return{x:o.width/r.offsetWidth||1,y:o.height/r.offsetHeight||1,boundingClientRect:o}}var O0={__proto__:null,TRANSFORM:tl,TRANSITION:Mi,TRANSITION_END:zd,get:Rd,getStyle:zi,create:we,remove:Ae,empty:Qs,toFront:Dr,toBack:Br,hasClass:nl,addClass:de,removeClass:Ue,setClass:rl,getClass:Xs,setOpacity:Lt,testProp:Ys,setTransform:cr,setPosition:Ze,getPosition:ur,get disableTextSelection(){return Ri},get enableTextSelection(){return Di},disableImageDrag:sl,enableImageDrag:ol,preventOutline:ll,restoreOutline:to,getSizedParentNode:Dd,getScale:cl};function le(r,o,c,d){if(o&&typeof o=="object")for(var m in o)dl(r,m,o[m],c);else{o=k(o);for(var y=0,j=o.length;y<j;y++)dl(r,o[y],c,d)}return this}var tn="_leaflet_events";function Se(r,o,c,d){if(arguments.length===1)Bd(r),delete r[tn];else if(o&&typeof o=="object")for(var m in o)hl(r,m,o[m],c);else if(o=k(o),arguments.length===2)Bd(r,function(A){return C(o,A)!==-1});else for(var y=0,j=o.length;y<j;y++)hl(r,o[y],c,d);return this}function Bd(r,o){for(var c in r[tn]){var d=c.split(/\d/)[0];(!o||o(d))&&hl(r,d,null,null,c)}}var ul={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function dl(r,o,c,d){var m=o+f(c)+(d?"_"+f(d):"");if(r[tn]&&r[tn][m])return this;var y=function(A){return c.call(d||r,A||window.event)},j=y;!ee.touchNative&&ee.pointer&&o.indexOf("touch")===0?y=w0(r,o,y):ee.touch&&o==="dblclick"?y=C0(r,y):"addEventListener"in r?o==="touchstart"||o==="touchmove"||o==="wheel"||o==="mousewheel"?r.addEventListener(ul[o]||o,y,ee.passiveEvents?{passive:!1}:!1):o==="mouseenter"||o==="mouseleave"?(y=function(A){A=A||window.event,ml(r,A)&&j(A)},r.addEventListener(ul[o],y,!1)):r.addEventListener(o,j,!1):r.attachEvent("on"+o,y),r[tn]=r[tn]||{},r[tn][m]=y}function hl(r,o,c,d,m){m=m||o+f(c)+(d?"_"+f(d):"");var y=r[tn]&&r[tn][m];if(!y)return this;!ee.touchNative&&ee.pointer&&o.indexOf("touch")===0?b0(r,o,y):ee.touch&&o==="dblclick"?T0(r,y):"removeEventListener"in r?r.removeEventListener(ul[o]||o,y,!1):r.detachEvent("on"+o,y),r[tn][m]=null}function dr(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function fl(r){return dl(r,"wheel",dr),this}function $i(r){return le(r,"mousedown touchstart dblclick contextmenu",dr),r._leaflet_disable_click=!0,this}function et(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function hr(r){return et(r),dr(r),this}function $d(r){if(r.composedPath)return r.composedPath();for(var o=[],c=r.target;c;)o.push(c),c=c.parentNode;return o}function Ud(r,o){if(!o)return new D(r.clientX,r.clientY);var c=cl(o),d=c.boundingClientRect;return new D((r.clientX-d.left)/c.x-o.clientLeft,(r.clientY-d.top)/c.y-o.clientTop)}var A0=ee.linux&&ee.chrome?window.devicePixelRatio:ee.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Fd(r){return ee.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/A0:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function ml(r,o){var c=o.relatedTarget;if(!c)return!0;try{for(;c&&c!==r;)c=c.parentNode}catch{return!1}return c!==r}var I0={__proto__:null,on:le,off:Se,stopPropagation:dr,disableScrollPropagation:fl,disableClickPropagation:$i,preventDefault:et,stop:hr,getPropagationPath:$d,getMousePosition:Ud,getWheelDelta:Fd,isExternalTarget:ml,addListener:le,removeListener:Se},qd=Re.extend({run:function(r,o,c,d){this.stop(),this._el=r,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(d||.5,.2),this._startPos=ur(r),this._offset=o.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=$(this._animate,this),this._step()},_step:function(r){var o=+new Date-this._startTime,c=this._duration*1e3;o<c?this._runFrame(this._easeOut(o/c),r):(this._runFrame(1),this._complete())},_runFrame:function(r,o){var c=this._startPos.add(this._offset.multiplyBy(r));o&&c._round(),Ze(this._el,c),this.fire("step")},_complete:function(){W(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),_e=Re.extend({options:{crs:ye,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,o){o=S(this,o),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),o.maxBounds&&this.setMaxBounds(o.maxBounds),o.zoom!==void 0&&(this._zoom=this._limitZoom(o.zoom)),o.center&&o.zoom!==void 0&&this.setView(B(o.center),o.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Mi&&ee.any3d&&!ee.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),le(this._proxy,zd,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,o,c){if(o=o===void 0?this._zoom:this._limitZoom(o),r=this._limitCenter(B(r),o,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=s({animate:c.animate},c.zoom),c.pan=s({animate:c.animate,duration:c.duration},c.pan));var d=this._zoom!==o?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,o,c.zoom):this._tryAnimatedPan(r,c.pan);if(d)return clearTimeout(this._sizeTimer),this}return this._resetView(r,o,c.pan&&c.pan.noMoveStart),this},setZoom:function(r,o){return this._loaded?this.setView(this.getCenter(),r,{zoom:o}):(this._zoom=r,this)},zoomIn:function(r,o){return r=r||(ee.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,o)},zoomOut:function(r,o){return r=r||(ee.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,o)},setZoomAround:function(r,o,c){var d=this.getZoomScale(o),m=this.getSize().divideBy(2),y=r instanceof D?r:this.latLngToContainerPoint(r),j=y.subtract(m).multiplyBy(1-1/d),A=this.containerPointToLatLng(m.add(j));return this.setView(A,o,{zoom:c})},_getBoundsCenterZoom:function(r,o){o=o||{},r=r.getBounds?r.getBounds():me(r);var c=H(o.paddingTopLeft||o.padding||[0,0]),d=H(o.paddingBottomRight||o.padding||[0,0]),m=this.getBoundsZoom(r,!1,c.add(d));if(m=typeof o.maxZoom=="number"?Math.min(o.maxZoom,m):m,m===1/0)return{center:r.getCenter(),zoom:m};var y=d.subtract(c).divideBy(2),j=this.project(r.getSouthWest(),m),A=this.project(r.getNorthEast(),m),M=this.unproject(j.add(A).divideBy(2).add(y),m);return{center:M,zoom:m}},fitBounds:function(r,o){if(r=me(r),!r.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(r,o);return this.setView(c.center,c.zoom,o)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,o){return this.setView(r,this._zoom,{pan:o})},panBy:function(r,o){if(r=H(r).round(),o=o||{},!r.x&&!r.y)return this.fire("moveend");if(o.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new qd,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),o.noMoveStart||this.fire("movestart"),o.animate!==!1){de(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,c,o.duration||.25,o.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,o,c){if(c=c||{},c.animate===!1||!ee.any3d)return this.setView(r,o,c);this._stop();var d=this.project(this.getCenter()),m=this.project(r),y=this.getSize(),j=this._zoom;r=B(r),o=o===void 0?j:o;var A=Math.max(y.x,y.y),M=A*this.getZoomScale(j,o),F=m.distanceTo(d)||1,Q=1.42,se=Q*Q;function fe(He){var mo=He?-1:1,bv=He?M:A,jv=M*M-A*A+mo*se*se*F*F,kv=2*bv*se*F,Nl=jv/kv,jh=Math.sqrt(Nl*Nl+1)-Nl,Nv=jh<1e-9?-18:Math.log(jh);return Nv}function ut(He){return(Math.exp(He)-Math.exp(-He))/2}function Qe(He){return(Math.exp(He)+Math.exp(-He))/2}function At(He){return ut(He)/Qe(He)}var vt=fe(0);function Hr(He){return A*(Qe(vt)/Qe(vt+Q*He))}function yv(He){return A*(Qe(vt)*At(vt+Q*He)-ut(vt))/se}function _v(He){return 1-Math.pow(1-He,1.5)}var xv=Date.now(),wh=(fe(1)-vt)/Q,wv=c.duration?1e3*c.duration:1e3*wh*.8;function bh(){var He=(Date.now()-xv)/wv,mo=_v(He)*wh;He<=1?(this._flyToFrame=$(bh,this),this._move(this.unproject(d.add(m.subtract(d).multiplyBy(yv(mo)/F)),j),this.getScaleZoom(A/Hr(mo),j),{flyTo:!0})):this._move(r,o)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),bh.call(this),this},flyToBounds:function(r,o){var c=this._getBoundsCenterZoom(r,o);return this.flyTo(c.center,c.zoom,o)},setMaxBounds:function(r){return r=me(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var o=this.options.minZoom;return this.options.minZoom=r,this._loaded&&o!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var o=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&o!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,o){this._enforcingBounds=!0;var c=this.getCenter(),d=this._limitCenter(c,this._zoom,me(r));return c.equals(d)||this.panTo(d,o),this._enforcingBounds=!1,this},panInside:function(r,o){o=o||{};var c=H(o.paddingTopLeft||o.padding||[0,0]),d=H(o.paddingBottomRight||o.padding||[0,0]),m=this.project(this.getCenter()),y=this.project(r),j=this.getPixelBounds(),A=ue([j.min.add(c),j.max.subtract(d)]),M=A.getSize();if(!A.contains(y)){this._enforcingBounds=!0;var F=y.subtract(A.getCenter()),Q=A.extend(y).getSize().subtract(M);m.x+=F.x<0?-Q.x:Q.x,m.y+=F.y<0?-Q.y:Q.y,this.panTo(this.unproject(m),o),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=s({animate:!1,pan:!0},r===!0?{animate:!0}:r);var o=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),d=o.divideBy(2).round(),m=c.divideBy(2).round(),y=d.subtract(m);return!y.x&&!y.y?this:(r.animate&&r.pan?this.panBy(y):(r.pan&&this._rawPanBy(y),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:o,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=s({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var o=u(this._handleGeolocationResponse,this),c=u(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(o,c,r):navigator.geolocation.getCurrentPosition(o,c,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var o=r.code,c=r.message||(o===1?"permission denied":o===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:o,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var o=r.coords.latitude,c=r.coords.longitude,d=new he(o,c),m=d.toBounds(r.coords.accuracy*2),y=this._locateOptions;if(y.setView){var j=this.getBoundsZoom(m);this.setView(d,y.maxZoom?Math.min(j,y.maxZoom):j)}var A={latlng:d,bounds:m,timestamp:r.timestamp};for(var M in r.coords)typeof r.coords[M]=="number"&&(A[M]=r.coords[M]);this.fire("locationfound",A)}},addHandler:function(r,o){if(!o)return this;var c=this[r]=new o(this);return this._handlers.push(c),this.options[r]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ae(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(W(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)Ae(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,o){var c="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),d=we("div",c,o||this._mapPane);return r&&(this._panes[r]=d),d},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),o=this.unproject(r.getBottomLeft()),c=this.unproject(r.getTopRight());return new Ce(o,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,o,c){r=me(r),c=H(c||[0,0]);var d=this.getZoom()||0,m=this.getMinZoom(),y=this.getMaxZoom(),j=r.getNorthWest(),A=r.getSouthEast(),M=this.getSize().subtract(c),F=ue(this.project(A,d),this.project(j,d)).getSize(),Q=ee.any3d?this.options.zoomSnap:1,se=M.x/F.x,fe=M.y/F.y,ut=o?Math.max(se,fe):Math.min(se,fe);return d=this.getScaleZoom(ut,d),Q&&(d=Math.round(d/(Q/100))*(Q/100),d=o?Math.ceil(d/Q)*Q:Math.floor(d/Q)*Q),Math.max(m,Math.min(y,d))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new D(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,o){var c=this._getTopLeftPoint(r,o);return new re(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,o){var c=this.options.crs;return o=o===void 0?this._zoom:o,c.scale(r)/c.scale(o)},getScaleZoom:function(r,o){var c=this.options.crs;o=o===void 0?this._zoom:o;var d=c.zoom(r*c.scale(o));return isNaN(d)?1/0:d},project:function(r,o){return o=o===void 0?this._zoom:o,this.options.crs.latLngToPoint(B(r),o)},unproject:function(r,o){return o=o===void 0?this._zoom:o,this.options.crs.pointToLatLng(H(r),o)},layerPointToLatLng:function(r){var o=H(r).add(this.getPixelOrigin());return this.unproject(o)},latLngToLayerPoint:function(r){var o=this.project(B(r))._round();return o._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(B(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(me(r))},distance:function(r,o){return this.options.crs.distance(B(r),B(o))},containerPointToLayerPoint:function(r){return H(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return H(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var o=this.containerPointToLayerPoint(H(r));return this.layerPointToLatLng(o)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(B(r)))},mouseEventToContainerPoint:function(r){return Ud(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var o=this._container=Rd(r);if(o){if(o._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");le(o,"scroll",this._onScroll,this),this._containerId=f(o)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&ee.any3d,de(r,"leaflet-container"+(ee.touch?" leaflet-touch":"")+(ee.retina?" leaflet-retina":"")+(ee.ielt9?" leaflet-oldie":"")+(ee.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var o=zi(r,"position");o!=="absolute"&&o!=="relative"&&o!=="fixed"&&o!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ze(this._mapPane,new D(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(de(r.markerPane,"leaflet-zoom-hide"),de(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,o,c){Ze(this._mapPane,new D(0,0));var d=!this._loaded;this._loaded=!0,o=this._limitZoom(o),this.fire("viewprereset");var m=this._zoom!==o;this._moveStart(m,c)._move(r,o)._moveEnd(m),this.fire("viewreset"),d&&this.fire("load")},_moveStart:function(r,o){return r&&this.fire("zoomstart"),o||this.fire("movestart"),this},_move:function(r,o,c,d){o===void 0&&(o=this._zoom);var m=this._zoom!==o;return this._zoom=o,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),d?c&&c.pinch&&this.fire("zoom",c):((m||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return W(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){Ze(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[f(this._container)]=this;var o=r?Se:le;o(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&o(window,"resize",this._onResize,this),ee.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){W(this._resizeRequest),this._resizeRequest=$(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,o){for(var c=[],d,m=o==="mouseout"||o==="mouseover",y=r.target||r.srcElement,j=!1;y;){if(d=this._targets[f(y)],d&&(o==="click"||o==="preclick")&&this._draggableMoved(d)){j=!0;break}if(d&&d.listens(o,!0)&&(m&&!ml(y,r)||(c.push(d),m))||y===this._container)break;y=y.parentNode}return!c.length&&!j&&!m&&this.listens(o,!0)&&(c=[this]),c},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var o=r.target||r.srcElement;if(!(!this._loaded||o._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(o))){var c=r.type;c==="mousedown"&&ll(o),this._fireDOMEvent(r,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,o,c){if(r.type==="click"){var d=s({},r);d.type="preclick",this._fireDOMEvent(d,d.type,c)}var m=this._findEventTargets(r,o);if(c){for(var y=[],j=0;j<c.length;j++)c[j].listens(o,!0)&&y.push(c[j]);m=y.concat(m)}if(m.length){o==="contextmenu"&&et(r);var A=m[0],M={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var F=A.getLatLng&&(!A._radius||A._radius<=10);M.containerPoint=F?this.latLngToContainerPoint(A.getLatLng()):this.mouseEventToContainerPoint(r),M.layerPoint=this.containerPointToLayerPoint(M.containerPoint),M.latlng=F?A.getLatLng():this.layerPointToLatLng(M.layerPoint)}for(j=0;j<m.length;j++)if(m[j].fire(o,M,!0),M.originalEvent._stopped||m[j].options.bubblingMouseEvents===!1&&C(this._mouseEvents,o)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,o=this._handlers.length;r<o;r++)this._handlers[r].disable()},whenReady:function(r,o){return this._loaded?r.call(o||this,{target:this}):this.on("load",r,o),this},_getMapPanePos:function(){return ur(this._mapPane)||new D(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,o){var c=r&&o!==void 0?this._getNewPixelOrigin(r,o):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,o){var c=this.getSize()._divideBy(2);return this.project(r,o)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,o,c){var d=this._getNewPixelOrigin(c,o);return this.project(r,o)._subtract(d)},_latLngBoundsToNewLayerBounds:function(r,o,c){var d=this._getNewPixelOrigin(c,o);return ue([this.project(r.getSouthWest(),o)._subtract(d),this.project(r.getNorthWest(),o)._subtract(d),this.project(r.getSouthEast(),o)._subtract(d),this.project(r.getNorthEast(),o)._subtract(d)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,o,c){if(!c)return r;var d=this.project(r,o),m=this.getSize().divideBy(2),y=new re(d.subtract(m),d.add(m)),j=this._getBoundsOffset(y,c,o);return Math.abs(j.x)<=1&&Math.abs(j.y)<=1?r:this.unproject(d.add(j),o)},_limitOffset:function(r,o){if(!o)return r;var c=this.getPixelBounds(),d=new re(c.min.add(r),c.max.add(r));return r.add(this._getBoundsOffset(d,o))},_getBoundsOffset:function(r,o,c){var d=ue(this.project(o.getNorthEast(),c),this.project(o.getSouthWest(),c)),m=d.min.subtract(r.min),y=d.max.subtract(r.max),j=this._rebound(m.x,-y.x),A=this._rebound(m.y,-y.y);return new D(j,A)},_rebound:function(r,o){return r+o>0?Math.round(r-o)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(o))},_limitZoom:function(r){var o=this.getMinZoom(),c=this.getMaxZoom(),d=ee.any3d?this.options.zoomSnap:1;return d&&(r=Math.round(r/d)*d),Math.max(o,Math.min(c,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ue(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,o){var c=this._getCenterOffset(r)._trunc();return(o&&o.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,o),!0)},_createAnimProxy:function(){var r=this._proxy=we("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(o){var c=tl,d=this._proxy.style[c];cr(this._proxy,this.project(o.center,o.zoom),this.getZoomScale(o.zoom,1)),d===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ae(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),o=this.getZoom();cr(this._proxy,this.project(r,o),this.getZoomScale(o,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,o,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(o-this._zoom)>this.options.zoomAnimationThreshold)return!1;var d=this.getZoomScale(o),m=this._getCenterOffset(r)._divideBy(1-1/d);return c.animate!==!0&&!this.getSize().contains(m)?!1:($(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(r,o,!0)},this),!0)},_animateZoom:function(r,o,c,d){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=o,de(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:o,noUpdate:d}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ue(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function M0(r,o){return new _e(r,o)}var qt=J.extend({options:{position:"topright"},initialize:function(r){S(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var o=this._map;return o&&o.removeControl(this),this.options.position=r,o&&o.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var o=this._container=this.onAdd(r),c=this.getPosition(),d=r._controlCorners[c];return de(o,"leaflet-control"),c.indexOf("bottom")!==-1?d.insertBefore(o,d.firstChild):d.appendChild(o),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ae(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),Ui=function(r){return new qt(r)};_e.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},o="leaflet-",c=this._controlContainer=we("div",o+"control-container",this._container);function d(m,y){var j=o+m+" "+o+y;r[m+y]=we("div",j,c)}d("top","left"),d("top","right"),d("bottom","left"),d("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)Ae(this._controlCorners[r]);Ae(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Zd=qt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,o,c,d){return c<d?-1:d<c?1:0}},initialize:function(r,o,c){S(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var d in r)this._addLayer(r[d],d);for(d in o)this._addLayer(o[d],d,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return qt.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,o){return this._addLayer(r,o),this._map?this._update():this},addOverlay:function(r,o){return this._addLayer(r,o,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var o=this._getLayer(f(r));return o&&this._layers.splice(this._layers.indexOf(o),1),this._map?this._update():this},expand:function(){de(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(de(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):Ue(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ue(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",o=this._container=we("div",r),c=this.options.collapsed;o.setAttribute("aria-haspopup",!0),$i(o),fl(o);var d=this._section=we("section",r+"-list");c&&(this._map.on("click",this.collapse,this),le(o,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var m=this._layersLink=we("a",r+"-toggle",o);m.href="#",m.title="Layers",m.setAttribute("role","button"),le(m,{keydown:function(y){y.keyCode===13&&this._expandSafely()},click:function(y){et(y),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=we("div",r+"-base",d),this._separator=we("div",r+"-separator",d),this._overlaysList=we("div",r+"-overlays",d),o.appendChild(d)},_getLayer:function(r){for(var o=0;o<this._layers.length;o++)if(this._layers[o]&&f(this._layers[o].layer)===r)return this._layers[o]},_addLayer:function(r,o,c){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:o,overlay:c}),this.options.sortLayers&&this._layers.sort(u(function(d,m){return this.options.sortFunction(d.layer,m.layer,d.name,m.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Qs(this._baseLayersList),Qs(this._overlaysList),this._layerControlInputs=[];var r,o,c,d,m=0;for(c=0;c<this._layers.length;c++)d=this._layers[c],this._addItem(d),o=o||d.overlay,r=r||!d.overlay,m+=d.overlay?0:1;return this.options.hideSingleBase&&(r=r&&m>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=o&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var o=this._getLayer(f(r.target)),c=o.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;c&&this._map.fire(c,o)},_createRadioElement:function(r,o){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(o?' checked="checked"':"")+"/>",d=document.createElement("div");return d.innerHTML=c,d.firstChild},_addItem:function(r){var o=document.createElement("label"),c=this._map.hasLayer(r.layer),d;r.overlay?(d=document.createElement("input"),d.type="checkbox",d.className="leaflet-control-layers-selector",d.defaultChecked=c):d=this._createRadioElement("leaflet-base-layers_"+f(this),c),this._layerControlInputs.push(d),d.layerId=f(r.layer),le(d,"click",this._onInputClick,this);var m=document.createElement("span");m.innerHTML=" "+r.name;var y=document.createElement("span");o.appendChild(y),y.appendChild(d),y.appendChild(m);var j=r.overlay?this._overlaysList:this._baseLayersList;return j.appendChild(o),this._checkDisabledLayers(),o},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,o,c,d=[],m=[];this._handlingClick=!0;for(var y=r.length-1;y>=0;y--)o=r[y],c=this._getLayer(o.layerId).layer,o.checked?d.push(c):o.checked||m.push(c);for(y=0;y<m.length;y++)this._map.hasLayer(m[y])&&this._map.removeLayer(m[y]);for(y=0;y<d.length;y++)this._map.hasLayer(d[y])||this._map.addLayer(d[y]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,o,c,d=this._map.getZoom(),m=r.length-1;m>=0;m--)o=r[m],c=this._getLayer(o.layerId).layer,o.disabled=c.options.minZoom!==void 0&&d<c.options.minZoom||c.options.maxZoom!==void 0&&d>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,le(r,"click",et),this.expand();var o=this;setTimeout(function(){Se(r,"click",et),o._preventClick=!1})}}),z0=function(r,o,c){return new Zd(r,o,c)},pl=qt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var o="leaflet-control-zoom",c=we("div",o+" leaflet-bar"),d=this.options;return this._zoomInButton=this._createButton(d.zoomInText,d.zoomInTitle,o+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(d.zoomOutText,d.zoomOutTitle,o+"-out",c,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,o,c,d,m){var y=we("a",c,d);return y.innerHTML=r,y.href="#",y.title=o,y.setAttribute("role","button"),y.setAttribute("aria-label",o),$i(y),le(y,"click",hr),le(y,"click",m,this),le(y,"click",this._refocusOnMap,this),y},_updateDisabled:function(){var r=this._map,o="leaflet-disabled";Ue(this._zoomInButton,o),Ue(this._zoomOutButton,o),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(de(this._zoomOutButton,o),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(de(this._zoomInButton,o),this._zoomInButton.setAttribute("aria-disabled","true"))}});_e.mergeOptions({zoomControl:!0}),_e.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new pl,this.addControl(this.zoomControl))});var R0=function(r){return new pl(r)},Hd=qt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var o="leaflet-control-scale",c=we("div",o),d=this.options;return this._addScales(d,o+"-line",c),r.on(d.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),c},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,o,c){r.metric&&(this._mScale=we("div",o,c)),r.imperial&&(this._iScale=we("div",o,c))},_update:function(){var r=this._map,o=r.getSize().y/2,c=r.distance(r.containerPointToLatLng([0,o]),r.containerPointToLatLng([this.options.maxWidth,o]));this._updateScales(c)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var o=this._getRoundNum(r),c=o<1e3?o+" m":o/1e3+" km";this._updateScale(this._mScale,c,o/r)},_updateImperial:function(r){var o=r*3.2808399,c,d,m;o>5280?(c=o/5280,d=this._getRoundNum(c),this._updateScale(this._iScale,d+" mi",d/c)):(m=this._getRoundNum(o),this._updateScale(this._iScale,m+" ft",m/o))},_updateScale:function(r,o,c){r.style.width=Math.round(this.options.maxWidth*c)+"px",r.innerHTML=o},_getRoundNum:function(r){var o=Math.pow(10,(Math.floor(r)+"").length-1),c=r/o;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,o*c}}),D0=function(r){return new Hd(r)},B0='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',gl=qt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ee.inlineSvg?B0+" ":"")+"Leaflet</a>"},initialize:function(r){S(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=we("div","leaflet-control-attribution"),$i(this._container);for(var o in r._layers)r._layers[o].getAttribution&&this.addAttribution(r._layers[o].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var o in this._attributions)this._attributions[o]&&r.push(o);var c=[];this.options.prefix&&c.push(this.options.prefix),r.length&&c.push(r.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});_e.mergeOptions({attributionControl:!0}),_e.addInitHook(function(){this.options.attributionControl&&new gl().addTo(this)});var $0=function(r){return new gl(r)};qt.Layers=Zd,qt.Zoom=pl,qt.Scale=Hd,qt.Attribution=gl,Ui.layers=z0,Ui.zoom=R0,Ui.scale=D0,Ui.attribution=$0;var nn=J.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});nn.addTo=function(r,o){return r.addHandler(o,this),this};var U0={Events:je},Wd=ee.touch?"touchstart mousedown":"mousedown",In=Re.extend({options:{clickTolerance:3},initialize:function(r,o,c,d){S(this,d),this._element=r,this._dragStartTarget=o||r,this._preventOutline=c},enable:function(){this._enabled||(le(this._dragStartTarget,Wd,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(In._dragging===this&&this.finishDrag(!0),Se(this._dragStartTarget,Wd,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!nl(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){In._dragging===this&&this.finishDrag();return}if(!(In._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(In._dragging=this,this._preventOutline&&ll(this._element),sl(),Ri(),!this._moving)){this.fire("down");var o=r.touches?r.touches[0]:r,c=Dd(this._element);this._startPoint=new D(o.clientX,o.clientY),this._startPos=ur(this._element),this._parentScale=cl(c);var d=r.type==="mousedown";le(document,d?"mousemove":"touchmove",this._onMove,this),le(document,d?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var o=r.touches&&r.touches.length===1?r.touches[0]:r,c=new D(o.clientX,o.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,et(r),this._moved||(this.fire("dragstart"),this._moved=!0,de(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),de(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),Ze(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){Ue(document.body,"leaflet-dragging"),this._lastTarget&&(Ue(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Se(document,"mousemove touchmove",this._onMove,this),Se(document,"mouseup touchend touchcancel",this._onUp,this),ol(),Di();var o=this._moved&&this._moving;this._moving=!1,In._dragging=!1,o&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function Vd(r,o,c){var d,m=[1,4,2,8],y,j,A,M,F,Q,se,fe;for(y=0,Q=r.length;y<Q;y++)r[y]._code=fr(r[y],o);for(A=0;A<4;A++){for(se=m[A],d=[],y=0,Q=r.length,j=Q-1;y<Q;j=y++)M=r[y],F=r[j],M._code&se?F._code&se||(fe=no(F,M,se,o,c),fe._code=fr(fe,o),d.push(fe)):(F._code&se&&(fe=no(F,M,se,o,c),fe._code=fr(fe,o),d.push(fe)),d.push(M));r=d}return r}function Gd(r,o){var c,d,m,y,j,A,M,F,Q;if(!r||r.length===0)throw new Error("latlngs not passed");Ot(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var se=B([0,0]),fe=me(r),ut=fe.getNorthWest().distanceTo(fe.getSouthWest())*fe.getNorthEast().distanceTo(fe.getNorthWest());ut<1700&&(se=vl(r));var Qe=r.length,At=[];for(c=0;c<Qe;c++){var vt=B(r[c]);At.push(o.project(B([vt.lat-se.lat,vt.lng-se.lng])))}for(A=M=F=0,c=0,d=Qe-1;c<Qe;d=c++)m=At[c],y=At[d],j=m.y*y.x-y.y*m.x,M+=(m.x+y.x)*j,F+=(m.y+y.y)*j,A+=j*3;A===0?Q=At[0]:Q=[M/A,F/A];var Hr=o.unproject(H(Q));return B([Hr.lat+se.lat,Hr.lng+se.lng])}function vl(r){for(var o=0,c=0,d=0,m=0;m<r.length;m++){var y=B(r[m]);o+=y.lat,c+=y.lng,d++}return B([o/d,c/d])}var F0={__proto__:null,clipPolygon:Vd,polygonCenter:Gd,centroid:vl};function Kd(r,o){if(!o||!r.length)return r.slice();var c=o*o;return r=H0(r,c),r=Z0(r,c),r}function Jd(r,o,c){return Math.sqrt(Fi(r,o,c,!0))}function q0(r,o,c){return Fi(r,o,c)}function Z0(r,o){var c=r.length,d=typeof Uint8Array<"u"?Uint8Array:Array,m=new d(c);m[0]=m[c-1]=1,yl(r,m,o,0,c-1);var y,j=[];for(y=0;y<c;y++)m[y]&&j.push(r[y]);return j}function yl(r,o,c,d,m){var y=0,j,A,M;for(A=d+1;A<=m-1;A++)M=Fi(r[A],r[d],r[m],!0),M>y&&(j=A,y=M);y>c&&(o[j]=1,yl(r,o,c,d,j),yl(r,o,c,j,m))}function H0(r,o){for(var c=[r[0]],d=1,m=0,y=r.length;d<y;d++)W0(r[d],r[m])>o&&(c.push(r[d]),m=d);return m<y-1&&c.push(r[y-1]),c}var Qd;function Xd(r,o,c,d,m){var y=d?Qd:fr(r,c),j=fr(o,c),A,M,F;for(Qd=j;;){if(!(y|j))return[r,o];if(y&j)return!1;A=y||j,M=no(r,o,A,c,m),F=fr(M,c),A===y?(r=M,y=F):(o=M,j=F)}}function no(r,o,c,d,m){var y=o.x-r.x,j=o.y-r.y,A=d.min,M=d.max,F,Q;return c&8?(F=r.x+y*(M.y-r.y)/j,Q=M.y):c&4?(F=r.x+y*(A.y-r.y)/j,Q=A.y):c&2?(F=M.x,Q=r.y+j*(M.x-r.x)/y):c&1&&(F=A.x,Q=r.y+j*(A.x-r.x)/y),new D(F,Q,m)}function fr(r,o){var c=0;return r.x<o.min.x?c|=1:r.x>o.max.x&&(c|=2),r.y<o.min.y?c|=4:r.y>o.max.y&&(c|=8),c}function W0(r,o){var c=o.x-r.x,d=o.y-r.y;return c*c+d*d}function Fi(r,o,c,d){var m=o.x,y=o.y,j=c.x-m,A=c.y-y,M=j*j+A*A,F;return M>0&&(F=((r.x-m)*j+(r.y-y)*A)/M,F>1?(m=c.x,y=c.y):F>0&&(m+=j*F,y+=A*F)),j=r.x-m,A=r.y-y,d?j*j+A*A:new D(m,y)}function Ot(r){return!w(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function Yd(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ot(r)}function eh(r,o){var c,d,m,y,j,A,M,F;if(!r||r.length===0)throw new Error("latlngs not passed");Ot(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var Q=B([0,0]),se=me(r),fe=se.getNorthWest().distanceTo(se.getSouthWest())*se.getNorthEast().distanceTo(se.getNorthWest());fe<1700&&(Q=vl(r));var ut=r.length,Qe=[];for(c=0;c<ut;c++){var At=B(r[c]);Qe.push(o.project(B([At.lat-Q.lat,At.lng-Q.lng])))}for(c=0,d=0;c<ut-1;c++)d+=Qe[c].distanceTo(Qe[c+1])/2;if(d===0)F=Qe[0];else for(c=0,y=0;c<ut-1;c++)if(j=Qe[c],A=Qe[c+1],m=j.distanceTo(A),y+=m,y>d){M=(y-d)/m,F=[A.x-M*(A.x-j.x),A.y-M*(A.y-j.y)];break}var vt=o.unproject(H(F));return B([vt.lat+Q.lat,vt.lng+Q.lng])}var V0={__proto__:null,simplify:Kd,pointToSegmentDistance:Jd,closestPointOnSegment:q0,clipSegment:Xd,_getEdgeIntersection:no,_getBitCode:fr,_sqClosestPointOnSegment:Fi,isFlat:Ot,_flat:Yd,polylineCenter:eh},_l={project:function(r){return new D(r.lng,r.lat)},unproject:function(r){return new he(r.y,r.x)},bounds:new re([-180,-90],[180,90])},xl={R:6378137,R_MINOR:6356752314245179e-9,bounds:new re([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var o=Math.PI/180,c=this.R,d=r.lat*o,m=this.R_MINOR/c,y=Math.sqrt(1-m*m),j=y*Math.sin(d),A=Math.tan(Math.PI/4-d/2)/Math.pow((1-j)/(1+j),y/2);return d=-c*Math.log(Math.max(A,1e-10)),new D(r.lng*o*c,d)},unproject:function(r){for(var o=180/Math.PI,c=this.R,d=this.R_MINOR/c,m=Math.sqrt(1-d*d),y=Math.exp(-r.y/c),j=Math.PI/2-2*Math.atan(y),A=0,M=.1,F;A<15&&Math.abs(M)>1e-7;A++)F=m*Math.sin(j),F=Math.pow((1-F)/(1+F),m/2),M=Math.PI/2-2*Math.atan(y*F)-j,j+=M;return new he(j*o,r.x*o/c)}},G0={__proto__:null,LonLat:_l,Mercator:xl,SphericalMercator:V},K0=s({},qe,{code:"EPSG:3395",projection:xl,transformation:function(){var r=.5/(Math.PI*xl.R);return De(r,.5,-r,.5)}()}),th=s({},qe,{code:"EPSG:4326",projection:_l,transformation:De(1/180,1,-1/180,.5)}),J0=s({},ve,{projection:_l,transformation:De(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,o){var c=o.lng-r.lng,d=o.lat-r.lat;return Math.sqrt(c*c+d*d)},infinite:!0});ve.Earth=qe,ve.EPSG3395=K0,ve.EPSG3857=ye,ve.EPSG900913=dn,ve.EPSG4326=th,ve.Simple=J0;var Zt=Re.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[f(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[f(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var o=r.target;if(o.hasLayer(this)){if(this._map=o,this._zoomAnimated=o._zoomAnimated,this.getEvents){var c=this.getEvents();o.on(c,this),this.once("remove",function(){o.off(c,this)},this)}this.onAdd(o),this.fire("add"),o.fire("layeradd",{layer:this})}}});_e.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var o=f(r);return this._layers[o]?this:(this._layers[o]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var o=f(r);return this._layers[o]?(this._loaded&&r.onRemove(this),delete this._layers[o],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return f(r)in this._layers},eachLayer:function(r,o){for(var c in this._layers)r.call(o,this._layers[c]);return this},_addLayers:function(r){r=r?w(r)?r:[r]:[];for(var o=0,c=r.length;o<c;o++)this.addLayer(r[o])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[f(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var o=f(r);this._zoomBoundLayers[o]&&(delete this._zoomBoundLayers[o],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,o=-1/0,c=this._getZoomSpan();for(var d in this._zoomBoundLayers){var m=this._zoomBoundLayers[d].options;r=m.minZoom===void 0?r:Math.min(r,m.minZoom),o=m.maxZoom===void 0?o:Math.max(o,m.maxZoom)}this._layersMaxZoom=o===-1/0?void 0:o,this._layersMinZoom=r===1/0?void 0:r,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var $r=Zt.extend({initialize:function(r,o){S(this,o),this._layers={};var c,d;if(r)for(c=0,d=r.length;c<d;c++)this.addLayer(r[c])},addLayer:function(r){var o=this.getLayerId(r);return this._layers[o]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var o=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[o]&&this._map.removeLayer(this._layers[o]),delete this._layers[o],this},hasLayer:function(r){var o=typeof r=="number"?r:this.getLayerId(r);return o in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var o=Array.prototype.slice.call(arguments,1),c,d;for(c in this._layers)d=this._layers[c],d[r]&&d[r].apply(d,o);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,o){for(var c in this._layers)r.call(o,this._layers[c]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return f(r)}}),Q0=function(r,o){return new $r(r,o)},mn=$r.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),$r.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),$r.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new Ce;for(var o in this._layers){var c=this._layers[o];r.extend(c.getBounds?c.getBounds():c.getLatLng())}return r}}),X0=function(r,o){return new mn(r,o)},Ur=J.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){S(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,o){var c=this._getIconUrl(r);if(!c){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var d=this._createImg(c,o&&o.tagName==="IMG"?o:null);return this._setIconStyles(d,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),d},_setIconStyles:function(r,o){var c=this.options,d=c[o+"Size"];typeof d=="number"&&(d=[d,d]);var m=H(d),y=H(o==="shadow"&&c.shadowAnchor||c.iconAnchor||m&&m.divideBy(2,!0));r.className="leaflet-marker-"+o+" "+(c.className||""),y&&(r.style.marginLeft=-y.x+"px",r.style.marginTop=-y.y+"px"),m&&(r.style.width=m.x+"px",r.style.height=m.y+"px")},_createImg:function(r,o){return o=o||document.createElement("img"),o.src=r,o},_getIconUrl:function(r){return ee.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function Y0(r){return new Ur(r)}var qi=Ur.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof qi.imagePath!="string"&&(qi.imagePath=this._detectIconPath()),(this.options.imagePath||qi.imagePath)+Ur.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var o=function(c,d,m){var y=d.exec(c);return y&&y[m]};return r=o(r,/^url\((['"])?(.+)\1\)$/,2),r&&o(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=we("div","leaflet-default-icon-path",document.body),o=zi(r,"background-image")||zi(r,"backgroundImage");if(document.body.removeChild(r),o=this._stripUrl(o),o)return o;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),nh=nn.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new In(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),de(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ue(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var o=this._marker,c=o._map,d=this._marker.options.autoPanSpeed,m=this._marker.options.autoPanPadding,y=ur(o._icon),j=c.getPixelBounds(),A=c.getPixelOrigin(),M=ue(j.min._subtract(A).add(m),j.max._subtract(A).subtract(m));if(!M.contains(y)){var F=H((Math.max(M.max.x,y.x)-M.max.x)/(j.max.x-M.max.x)-(Math.min(M.min.x,y.x)-M.min.x)/(j.min.x-M.min.x),(Math.max(M.max.y,y.y)-M.max.y)/(j.max.y-M.max.y)-(Math.min(M.min.y,y.y)-M.min.y)/(j.min.y-M.min.y)).multiplyBy(d);c.panBy(F,{animate:!1}),this._draggable._newPos._add(F),this._draggable._startPos._add(F),Ze(o._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=$(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(W(this._panRequest),this._panRequest=$(this._adjustPan.bind(this,r)))},_onDrag:function(r){var o=this._marker,c=o._shadow,d=ur(o._icon),m=o._map.layerPointToLatLng(d);c&&Ze(c,d),o._latlng=m,r.latlng=m,r.oldLatLng=this._oldLatLng,o.fire("move",r).fire("drag",r)},_onDragEnd:function(r){W(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),ro=Zt.extend({options:{icon:new qi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,o){S(this,o),this._latlng=B(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var o=this._latlng;return this._latlng=B(r),this.update(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,o="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=r.icon.createIcon(this._icon),d=!1;c!==this._icon&&(this._icon&&this._removeIcon(),d=!0,r.title&&(c.title=r.title),c.tagName==="IMG"&&(c.alt=r.alt||"")),de(c,o),r.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&le(c,"focus",this._panOnFocus,this);var m=r.icon.createShadow(this._shadow),y=!1;m!==this._shadow&&(this._removeShadow(),y=!0),m&&(de(m,o),m.alt=""),this._shadow=m,r.opacity<1&&this._updateOpacity(),d&&this.getPane().appendChild(this._icon),this._initInteraction(),m&&y&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Se(this._icon,"focus",this._panOnFocus,this),Ae(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ae(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&Ze(this._icon,r),this._shadow&&Ze(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var o=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(o)},_initInteraction:function(){if(this.options.interactive&&(de(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),nh)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new nh(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&Lt(this._icon,r),this._shadow&&Lt(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var o=this.options.icon.options,c=o.iconSize?H(o.iconSize):H(0,0),d=o.iconAnchor?H(o.iconAnchor):H(0,0);r.panInside(this._latlng,{paddingTopLeft:d,paddingBottomRight:c.subtract(d)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ev(r,o){return new ro(r,o)}var Mn=Zt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return S(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),io=Mn.extend({options:{fill:!0,radius:10},initialize:function(r,o){S(this,o),this._latlng=B(r),this._radius=this.options.radius},setLatLng:function(r){var o=this._latlng;return this._latlng=B(r),this.redraw(),this.fire("move",{oldLatLng:o,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var o=r&&r.radius||this._radius;return Mn.prototype.setStyle.call(this,r),this.setRadius(o),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,o=this._radiusY||r,c=this._clickTolerance(),d=[r+c,o+c];this._pxBounds=new re(this._point.subtract(d),this._point.add(d))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function tv(r,o){return new io(r,o)}var wl=io.extend({initialize:function(r,o,c){if(typeof o=="number"&&(o=s({},c,{radius:o})),S(this,o),this._latlng=B(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new Ce(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:Mn.prototype.setStyle,_project:function(){var r=this._latlng.lng,o=this._latlng.lat,c=this._map,d=c.options.crs;if(d.distance===qe.distance){var m=Math.PI/180,y=this._mRadius/qe.R/m,j=c.project([o+y,r]),A=c.project([o-y,r]),M=j.add(A).divideBy(2),F=c.unproject(M).lat,Q=Math.acos((Math.cos(y*m)-Math.sin(o*m)*Math.sin(F*m))/(Math.cos(o*m)*Math.cos(F*m)))/m;(isNaN(Q)||Q===0)&&(Q=y/Math.cos(Math.PI/180*o)),this._point=M.subtract(c.getPixelOrigin()),this._radius=isNaN(Q)?0:M.x-c.project([F,r-Q]).x,this._radiusY=M.y-j.y}else{var se=d.unproject(d.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(se).x}this._updateBounds()}});function nv(r,o,c){return new wl(r,o,c)}var pn=Mn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,o){S(this,o),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var o=1/0,c=null,d=Fi,m,y,j=0,A=this._parts.length;j<A;j++)for(var M=this._parts[j],F=1,Q=M.length;F<Q;F++){m=M[F-1],y=M[F];var se=d(r,m,y,!0);se<o&&(o=se,c=d(r,m,y))}return c&&(c.distance=Math.sqrt(o)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return eh(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,o){return o=o||this._defaultShape(),r=B(r),o.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new Ce,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return Ot(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var o=[],c=Ot(r),d=0,m=r.length;d<m;d++)c?(o[d]=B(r[d]),this._bounds.extend(o[d])):o[d]=this._convertLatLngs(r[d]);return o},_project:function(){var r=new re;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),o=new D(r,r);this._rawPxBounds&&(this._pxBounds=new re([this._rawPxBounds.min.subtract(o),this._rawPxBounds.max.add(o)]))},_projectLatlngs:function(r,o,c){var d=r[0]instanceof he,m=r.length,y,j;if(d){for(j=[],y=0;y<m;y++)j[y]=this._map.latLngToLayerPoint(r[y]),c.extend(j[y]);o.push(j)}else for(y=0;y<m;y++)this._projectLatlngs(r[y],o,c)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,c,d,m,y,j,A,M;for(c=0,m=0,y=this._rings.length;c<y;c++)for(M=this._rings[c],d=0,j=M.length;d<j-1;d++)A=Xd(M[d],M[d+1],r,d,!0),A&&(o[m]=o[m]||[],o[m].push(A[0]),(A[1]!==M[d+1]||d===j-2)&&(o[m].push(A[1]),m++))}},_simplifyPoints:function(){for(var r=this._parts,o=this.options.smoothFactor,c=0,d=r.length;c<d;c++)r[c]=Kd(r[c],o)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,o){var c,d,m,y,j,A,M=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(c=0,y=this._parts.length;c<y;c++)for(A=this._parts[c],d=0,j=A.length,m=j-1;d<j;m=d++)if(!(!o&&d===0)&&Jd(r,A[m],A[d])<=M)return!0;return!1}});function rv(r,o){return new pn(r,o)}pn._flat=Yd;var Fr=pn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Gd(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var o=pn.prototype._convertLatLngs.call(this,r),c=o.length;return c>=2&&o[0]instanceof he&&o[0].equals(o[c-1])&&o.pop(),o},_setLatLngs:function(r){pn.prototype._setLatLngs.call(this,r),Ot(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ot(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,o=this.options.weight,c=new D(o,o);if(r=new re(r.min.subtract(c),r.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var d=0,m=this._rings.length,y;d<m;d++)y=Vd(this._rings[d],r,!0),y.length&&this._parts.push(y)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var o=!1,c,d,m,y,j,A,M,F;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(y=0,M=this._parts.length;y<M;y++)for(c=this._parts[y],j=0,F=c.length,A=F-1;j<F;A=j++)d=c[j],m=c[A],d.y>r.y!=m.y>r.y&&r.x<(m.x-d.x)*(r.y-d.y)/(m.y-d.y)+d.x&&(o=!o);return o||pn.prototype._containsPoint.call(this,r,!0)}});function iv(r,o){return new Fr(r,o)}var gn=mn.extend({initialize:function(r,o){S(this,o),this._layers={},r&&this.addData(r)},addData:function(r){var o=w(r)?r:r.features,c,d,m;if(o){for(c=0,d=o.length;c<d;c++)m=o[c],(m.geometries||m.geometry||m.features||m.coordinates)&&this.addData(m);return this}var y=this.options;if(y.filter&&!y.filter(r))return this;var j=so(r,y);return j?(j.feature=lo(r),j.defaultOptions=j.options,this.resetStyle(j),y.onEachFeature&&y.onEachFeature(r,j),this.addLayer(j)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=s({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(o){this._setLayerStyle(o,r)},this)},_setLayerStyle:function(r,o){r.setStyle&&(typeof o=="function"&&(o=o(r.feature)),r.setStyle(o))}});function so(r,o){var c=r.type==="Feature"?r.geometry:r,d=c?c.coordinates:null,m=[],y=o&&o.pointToLayer,j=o&&o.coordsToLatLng||bl,A,M,F,Q;if(!d&&!c)return null;switch(c.type){case"Point":return A=j(d),rh(y,r,A,o);case"MultiPoint":for(F=0,Q=d.length;F<Q;F++)A=j(d[F]),m.push(rh(y,r,A,o));return new mn(m);case"LineString":case"MultiLineString":return M=oo(d,c.type==="LineString"?0:1,j),new pn(M,o);case"Polygon":case"MultiPolygon":return M=oo(d,c.type==="Polygon"?1:2,j),new Fr(M,o);case"GeometryCollection":for(F=0,Q=c.geometries.length;F<Q;F++){var se=so({geometry:c.geometries[F],type:"Feature",properties:r.properties},o);se&&m.push(se)}return new mn(m);case"FeatureCollection":for(F=0,Q=c.features.length;F<Q;F++){var fe=so(c.features[F],o);fe&&m.push(fe)}return new mn(m);default:throw new Error("Invalid GeoJSON object.")}}function rh(r,o,c,d){return r?r(o,c):new ro(c,d&&d.markersInheritOptions&&d)}function bl(r){return new he(r[1],r[0],r[2])}function oo(r,o,c){for(var d=[],m=0,y=r.length,j;m<y;m++)j=o?oo(r[m],o-1,c):(c||bl)(r[m]),d.push(j);return d}function jl(r,o){return r=B(r),r.alt!==void 0?[b(r.lng,o),b(r.lat,o),b(r.alt,o)]:[b(r.lng,o),b(r.lat,o)]}function ao(r,o,c,d){for(var m=[],y=0,j=r.length;y<j;y++)m.push(o?ao(r[y],Ot(r[y])?0:o-1,c,d):jl(r[y],d));return!o&&c&&m.length>0&&m.push(m[0].slice()),m}function qr(r,o){return r.feature?s({},r.feature,{geometry:o}):lo(o)}function lo(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var kl={toGeoJSON:function(r){return qr(this,{type:"Point",coordinates:jl(this.getLatLng(),r)})}};ro.include(kl),wl.include(kl),io.include(kl),pn.include({toGeoJSON:function(r){var o=!Ot(this._latlngs),c=ao(this._latlngs,o?1:0,!1,r);return qr(this,{type:(o?"Multi":"")+"LineString",coordinates:c})}}),Fr.include({toGeoJSON:function(r){var o=!Ot(this._latlngs),c=o&&!Ot(this._latlngs[0]),d=ao(this._latlngs,c?2:o?1:0,!0,r);return o||(d=[d]),qr(this,{type:(c?"Multi":"")+"Polygon",coordinates:d})}}),$r.include({toMultiPoint:function(r){var o=[];return this.eachLayer(function(c){o.push(c.toGeoJSON(r).geometry.coordinates)}),qr(this,{type:"MultiPoint",coordinates:o})},toGeoJSON:function(r){var o=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(o==="MultiPoint")return this.toMultiPoint(r);var c=o==="GeometryCollection",d=[];return this.eachLayer(function(m){if(m.toGeoJSON){var y=m.toGeoJSON(r);if(c)d.push(y.geometry);else{var j=lo(y);j.type==="FeatureCollection"?d.push.apply(d,j.features):d.push(j)}}}),c?qr(this,{geometries:d,type:"GeometryCollection"}):{type:"FeatureCollection",features:d}}});function ih(r,o){return new gn(r,o)}var sv=ih,co=Zt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,o,c){this._url=r,this._bounds=me(o),S(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(de(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ae(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&Dr(this._image),this},bringToBack:function(){return this._map&&Br(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=me(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",o=this._image=r?this._url:we("img");if(de(o,"leaflet-image-layer"),this._zoomAnimated&&de(o,"leaflet-zoom-animated"),this.options.className&&de(o,this.options.className),o.onselectstart=x,o.onmousemove=x,o.onload=u(this.fire,this,"load"),o.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=o.src;return}o.src=this._url,o.alt=this.options.alt},_animateZoom:function(r){var o=this._map.getZoomScale(r.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;cr(this._image,c,o)},_reset:function(){var r=this._image,o=new re(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=o.getSize();Ze(r,o.min),r.style.width=c.x+"px",r.style.height=c.y+"px"},_updateOpacity:function(){Lt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),ov=function(r,o,c){return new co(r,o,c)},sh=co.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",o=this._image=r?this._url:we("video");if(de(o,"leaflet-image-layer"),this._zoomAnimated&&de(o,"leaflet-zoom-animated"),this.options.className&&de(o,this.options.className),o.onselectstart=x,o.onmousemove=x,o.onloadeddata=u(this.fire,this,"load"),r){for(var c=o.getElementsByTagName("source"),d=[],m=0;m<c.length;m++)d.push(c[m].src);this._url=c.length>0?d:[o.src];return}w(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(o.style,"objectFit")&&(o.style.objectFit="fill"),o.autoplay=!!this.options.autoplay,o.loop=!!this.options.loop,o.muted=!!this.options.muted,o.playsInline=!!this.options.playsInline;for(var y=0;y<this._url.length;y++){var j=we("source");j.src=this._url[y],o.appendChild(j)}}});function av(r,o,c){return new sh(r,o,c)}var oh=co.extend({_initImage:function(){var r=this._image=this._url;de(r,"leaflet-image-layer"),this._zoomAnimated&&de(r,"leaflet-zoom-animated"),this.options.className&&de(r,this.options.className),r.onselectstart=x,r.onmousemove=x}});function lv(r,o,c){return new oh(r,o,c)}var rn=Zt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,o){r&&(r instanceof he||w(r))?(this._latlng=B(r),S(this,o)):(S(this,r),this._source=o),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&Lt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&Lt(this._container,1),this.bringToFront(),this.options.interactive&&(de(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(Lt(this._container,0),this._removeTimeout=setTimeout(u(Ae,void 0,this._container),200)):Ae(this._container),this.options.interactive&&(Ue(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=B(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Dr(this._container),this},bringToBack:function(){return this._map&&Br(this._container),this},_prepareOpen:function(r){var o=this._source;if(!o._map)return!1;if(o instanceof mn){o=null;var c=this._source._layers;for(var d in c)if(c[d]._map){o=c[d];break}if(!o)return!1;this._source=o}if(!r)if(o.getCenter)r=o.getCenter();else if(o.getLatLng)r=o.getLatLng();else if(o.getBounds)r=o.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,o=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof o=="string")r.innerHTML=o;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(o)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),o=H(this.options.offset),c=this._getAnchor();this._zoomAnimated?Ze(this._container,r.add(c)):o=o.add(r).add(c);var d=this._containerBottom=-o.y,m=this._containerLeft=-Math.round(this._containerWidth/2)+o.x;this._container.style.bottom=d+"px",this._container.style.left=m+"px"}},_getAnchor:function(){return[0,0]}});_e.include({_initOverlay:function(r,o,c,d){var m=o;return m instanceof r||(m=new r(d).setContent(o)),c&&m.setLatLng(c),m}}),Zt.include({_initOverlay:function(r,o,c,d){var m=c;return m instanceof r?(S(m,d),m._source=this):(m=o&&!d?o:new r(d,this),m.setContent(c)),m}});var uo=rn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,rn.prototype.openOn.call(this,r)},onAdd:function(r){rn.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Mn||this._source.on("preclick",dr))},onRemove:function(r){rn.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Mn||this._source.off("preclick",dr))},getEvents:function(){var r=rn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",o=this._container=we("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=we("div",r+"-content-wrapper",o);if(this._contentNode=we("div",r+"-content",c),$i(o),fl(this._contentNode),le(o,"contextmenu",dr),this._tipContainer=we("div",r+"-tip-container",o),this._tip=we("div",r+"-tip",this._tipContainer),this.options.closeButton){var d=this._closeButton=we("a",r+"-close-button",o);d.setAttribute("role","button"),d.setAttribute("aria-label","Close popup"),d.href="#close",d.innerHTML='<span aria-hidden="true">&#215;</span>',le(d,"click",function(m){et(m),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,o=r.style;o.width="",o.whiteSpace="nowrap";var c=r.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),o.width=c+1+"px",o.whiteSpace="",o.height="";var d=r.offsetHeight,m=this.options.maxHeight,y="leaflet-popup-scrolled";m&&d>m?(o.height=m+"px",de(r,y)):Ue(r,y),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var o=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),c=this._getAnchor();Ze(this._container,o.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,o=parseInt(zi(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+o,d=this._containerWidth,m=new D(this._containerLeft,-c-this._containerBottom);m._add(ur(this._container));var y=r.layerPointToContainerPoint(m),j=H(this.options.autoPanPadding),A=H(this.options.autoPanPaddingTopLeft||j),M=H(this.options.autoPanPaddingBottomRight||j),F=r.getSize(),Q=0,se=0;y.x+d+M.x>F.x&&(Q=y.x+d-F.x+M.x),y.x-Q-A.x<0&&(Q=y.x-A.x),y.y+c+M.y>F.y&&(se=y.y+c-F.y+M.y),y.y-se-A.y<0&&(se=y.y-A.y),(Q||se)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([Q,se]))}},_getAnchor:function(){return H(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),cv=function(r,o){return new uo(r,o)};_e.mergeOptions({closePopupOnClick:!0}),_e.include({openPopup:function(r,o,c){return this._initOverlay(uo,r,o,c).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),Zt.include({bindPopup:function(r,o){return this._popup=this._initOverlay(uo,this._popup,r,o),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof mn||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){hr(r);var o=r.layer||r.target;if(this._popup._source===o&&!(o instanceof Mn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=o,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var ho=rn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){rn.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){rn.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=rn.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",o=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=we("div",o),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+f(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var o,c,d=this._map,m=this._container,y=d.latLngToContainerPoint(d.getCenter()),j=d.layerPointToContainerPoint(r),A=this.options.direction,M=m.offsetWidth,F=m.offsetHeight,Q=H(this.options.offset),se=this._getAnchor();A==="top"?(o=M/2,c=F):A==="bottom"?(o=M/2,c=0):A==="center"?(o=M/2,c=F/2):A==="right"?(o=0,c=F/2):A==="left"?(o=M,c=F/2):j.x<y.x?(A="right",o=0,c=F/2):(A="left",o=M+(Q.x+se.x)*2,c=F/2),r=r.subtract(H(o,c,!0)).add(Q).add(se),Ue(m,"leaflet-tooltip-right"),Ue(m,"leaflet-tooltip-left"),Ue(m,"leaflet-tooltip-top"),Ue(m,"leaflet-tooltip-bottom"),de(m,"leaflet-tooltip-"+A),Ze(m,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&Lt(this._container,r)},_animateZoom:function(r){var o=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(o)},_getAnchor:function(){return H(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),uv=function(r,o){return new ho(r,o)};_e.include({openTooltip:function(r,o,c){return this._initOverlay(ho,r,o,c).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),Zt.include({bindTooltip:function(r,o){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ho,this._tooltip,r,o),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var o=r?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[o](c),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof mn||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var o=typeof r.getElement=="function"&&r.getElement();o&&(le(o,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),le(o,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var o=typeof r.getElement=="function"&&r.getElement();o&&o.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var o=this;this._map.once("moveend",function(){o._openOnceFlag=!1,o._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var o=r.latlng,c,d;this._tooltip.options.sticky&&r.originalEvent&&(c=this._map.mouseEventToContainerPoint(r.originalEvent),d=this._map.containerPointToLayerPoint(c),o=this._map.layerPointToLatLng(d)),this._tooltip.setLatLng(o)}});var ah=Ur.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var o=r&&r.tagName==="DIV"?r:document.createElement("div"),c=this.options;if(c.html instanceof Element?(Qs(o),o.appendChild(c.html)):o.innerHTML=c.html!==!1?c.html:"",c.bgPos){var d=H(c.bgPos);o.style.backgroundPosition=-d.x+"px "+-d.y+"px"}return this._setIconStyles(o,"icon"),o},createShadow:function(){return null}});function dv(r){return new ah(r)}Ur.Default=qi;var Zi=Zt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ee.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){S(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),Ae(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Dr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Br(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof D?r:new D(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var o=this.getPane().children,c=-r(-1/0,1/0),d=0,m=o.length,y;d<m;d++)y=o[d].style.zIndex,o[d]!==this._container&&y&&(c=r(c,+y));isFinite(c)&&(this.options.zIndex=c+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ee.ielt9){Lt(this._container,this.options.opacity);var r=+new Date,o=!1,c=!1;for(var d in this._tiles){var m=this._tiles[d];if(!(!m.current||!m.loaded)){var y=Math.min(1,(r-m.loaded)/200);Lt(m.el,y),y<1?o=!0:(m.active?c=!0:this._onOpaqueTile(m),m.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),o&&(W(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this))}},_onOpaqueTile:x,_initContainer:function(){this._container||(this._container=we("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,o=this.options.maxZoom;if(r!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===r?(this._levels[c].el.style.zIndex=o-Math.abs(r-c),this._onUpdateLevel(c)):(Ae(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var d=this._levels[r],m=this._map;return d||(d=this._levels[r]={},d.el=we("div","leaflet-tile-container leaflet-zoom-animated",this._container),d.el.style.zIndex=o,d.origin=m.project(m.unproject(m.getPixelOrigin()),r).round(),d.zoom=r,this._setZoomTransform(d,m.getCenter(),m.getZoom()),x(d.el.offsetWidth),this._onCreateLevel(d)),this._level=d,d}},_onUpdateLevel:x,_onRemoveLevel:x,_onCreateLevel:x,_pruneTiles:function(){if(this._map){var r,o,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)o=this._tiles[r],o.retain=o.current;for(r in this._tiles)if(o=this._tiles[r],o.current&&!o.active){var d=o.coords;this._retainParent(d.x,d.y,d.z,d.z-5)||this._retainChildren(d.x,d.y,d.z,d.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var o in this._tiles)this._tiles[o].coords.z===r&&this._removeTile(o)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)Ae(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,o,c,d){var m=Math.floor(r/2),y=Math.floor(o/2),j=c-1,A=new D(+m,+y);A.z=+j;var M=this._tileCoordsToKey(A),F=this._tiles[M];return F&&F.active?(F.retain=!0,!0):(F&&F.loaded&&(F.retain=!0),j>d?this._retainParent(m,y,j,d):!1)},_retainChildren:function(r,o,c,d){for(var m=2*r;m<2*r+2;m++)for(var y=2*o;y<2*o+2;y++){var j=new D(m,y);j.z=c+1;var A=this._tileCoordsToKey(j),M=this._tiles[A];if(M&&M.active){M.retain=!0;continue}else M&&M.loaded&&(M.retain=!0);c+1<d&&this._retainChildren(m,y,c+1,d)}},_resetView:function(r){var o=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),o,o)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var o=this.options;return o.minNativeZoom!==void 0&&r<o.minNativeZoom?o.minNativeZoom:o.maxNativeZoom!==void 0&&o.maxNativeZoom<r?o.maxNativeZoom:r},_setView:function(r,o,c,d){var m=Math.round(o);this.options.maxZoom!==void 0&&m>this.options.maxZoom||this.options.minZoom!==void 0&&m<this.options.minZoom?m=void 0:m=this._clampZoom(m);var y=this.options.updateWhenZooming&&m!==this._tileZoom;(!d||y)&&(this._tileZoom=m,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),m!==void 0&&this._update(r),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(r,o)},_setZoomTransforms:function(r,o){for(var c in this._levels)this._setZoomTransform(this._levels[c],r,o)},_setZoomTransform:function(r,o,c){var d=this._map.getZoomScale(c,r.zoom),m=r.origin.multiplyBy(d).subtract(this._map._getNewPixelOrigin(o,c)).round();ee.any3d?cr(r.el,m,d):Ze(r.el,m)},_resetGrid:function(){var r=this._map,o=r.options.crs,c=this._tileSize=this.getTileSize(),d=this._tileZoom,m=this._map.getPixelWorldBounds(this._tileZoom);m&&(this._globalTileRange=this._pxBoundsToTileRange(m)),this._wrapX=o.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,o.wrapLng[0]],d).x/c.x),Math.ceil(r.project([0,o.wrapLng[1]],d).x/c.y)],this._wrapY=o.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([o.wrapLat[0],0],d).y/c.x),Math.ceil(r.project([o.wrapLat[1],0],d).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var o=this._map,c=o._animatingZoom?Math.max(o._animateToZoom,o.getZoom()):o.getZoom(),d=o.getZoomScale(c,this._tileZoom),m=o.project(r,this._tileZoom).floor(),y=o.getSize().divideBy(d*2);return new re(m.subtract(y),m.add(y))},_update:function(r){var o=this._map;if(o){var c=this._clampZoom(o.getZoom());if(r===void 0&&(r=o.getCenter()),this._tileZoom!==void 0){var d=this._getTiledPixelBounds(r),m=this._pxBoundsToTileRange(d),y=m.getCenter(),j=[],A=this.options.keepBuffer,M=new re(m.getBottomLeft().subtract([A,-A]),m.getTopRight().add([A,-A]));if(!(isFinite(m.min.x)&&isFinite(m.min.y)&&isFinite(m.max.x)&&isFinite(m.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var F in this._tiles){var Q=this._tiles[F].coords;(Q.z!==this._tileZoom||!M.contains(new D(Q.x,Q.y)))&&(this._tiles[F].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(r,c);return}for(var se=m.min.y;se<=m.max.y;se++)for(var fe=m.min.x;fe<=m.max.x;fe++){var ut=new D(fe,se);if(ut.z=this._tileZoom,!!this._isValidTile(ut)){var Qe=this._tiles[this._tileCoordsToKey(ut)];Qe?Qe.current=!0:j.push(ut)}}if(j.sort(function(vt,Hr){return vt.distanceTo(y)-Hr.distanceTo(y)}),j.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var At=document.createDocumentFragment();for(fe=0;fe<j.length;fe++)this._addTile(j[fe],At);this._level.el.appendChild(At)}}}},_isValidTile:function(r){var o=this._map.options.crs;if(!o.infinite){var c=this._globalTileRange;if(!o.wrapLng&&(r.x<c.min.x||r.x>c.max.x)||!o.wrapLat&&(r.y<c.min.y||r.y>c.max.y))return!1}if(!this.options.bounds)return!0;var d=this._tileCoordsToBounds(r);return me(this.options.bounds).overlaps(d)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var o=this._map,c=this.getTileSize(),d=r.scaleBy(c),m=d.add(c),y=o.unproject(d,r.z),j=o.unproject(m,r.z);return[y,j]},_tileCoordsToBounds:function(r){var o=this._tileCoordsToNwSe(r),c=new Ce(o[0],o[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var o=r.split(":"),c=new D(+o[0],+o[1]);return c.z=+o[2],c},_removeTile:function(r){var o=this._tiles[r];o&&(Ae(o.el),delete this._tiles[r],this.fire("tileunload",{tile:o.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){de(r,"leaflet-tile");var o=this.getTileSize();r.style.width=o.x+"px",r.style.height=o.y+"px",r.onselectstart=x,r.onmousemove=x,ee.ielt9&&this.options.opacity<1&&Lt(r,this.options.opacity)},_addTile:function(r,o){var c=this._getTilePos(r),d=this._tileCoordsToKey(r),m=this.createTile(this._wrapCoords(r),u(this._tileReady,this,r));this._initTile(m),this.createTile.length<2&&$(u(this._tileReady,this,r,null,m)),Ze(m,c),this._tiles[d]={el:m,coords:r,current:!0},o.appendChild(m),this.fire("tileloadstart",{tile:m,coords:r})},_tileReady:function(r,o,c){o&&this.fire("tileerror",{error:o,tile:c,coords:r});var d=this._tileCoordsToKey(r);c=this._tiles[d],c&&(c.loaded=+new Date,this._map._fadeAnimated?(Lt(c.el,0),W(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),o||(de(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ee.ielt9||!this._map._fadeAnimated?$(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var o=new D(this._wrapX?v(r.x,this._wrapX):r.x,this._wrapY?v(r.y,this._wrapY):r.y);return o.z=r.z,o},_pxBoundsToTileRange:function(r){var o=this.getTileSize();return new re(r.min.unscaleBy(o).floor(),r.max.unscaleBy(o).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function hv(r){return new Zi(r)}var Zr=Zi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,o){this._url=r,o=S(this,o),o.detectRetina&&ee.retina&&o.maxZoom>0?(o.tileSize=Math.floor(o.tileSize/2),o.zoomReverse?(o.zoomOffset--,o.minZoom=Math.min(o.maxZoom,o.minZoom+1)):(o.zoomOffset++,o.maxZoom=Math.max(o.minZoom,o.maxZoom-1)),o.minZoom=Math.max(0,o.minZoom)):o.zoomReverse?o.minZoom=Math.min(o.maxZoom,o.minZoom):o.maxZoom=Math.max(o.minZoom,o.maxZoom),typeof o.subdomains=="string"&&(o.subdomains=o.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,o){return this._url===r&&o===void 0&&(o=!0),this._url=r,o||this.redraw(),this},createTile:function(r,o){var c=document.createElement("img");return le(c,"load",u(this._tileOnLoad,this,o,c)),le(c,"error",u(this._tileOnError,this,o,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(r),c},getTileUrl:function(r){var o={r:ee.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-r.y;this.options.tms&&(o.y=c),o["-y"]=c}return _(this._url,s(o,this.options))},_tileOnLoad:function(r,o){ee.ielt9?setTimeout(u(r,this,null,o),0):r(null,o)},_tileOnError:function(r,o,c){var d=this.options.errorTileUrl;d&&o.getAttribute("src")!==d&&(o.src=d),r(c,o)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,o=this.options.maxZoom,c=this.options.zoomReverse,d=this.options.zoomOffset;return c&&(r=o-r),r+d},_getSubdomain:function(r){var o=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[o]},_abortLoading:function(){var r,o;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(o=this._tiles[r].el,o.onload=x,o.onerror=x,!o.complete)){o.src=T;var c=this._tiles[r].coords;Ae(o),delete this._tiles[r],this.fire("tileabort",{tile:o,coords:c})}},_removeTile:function(r){var o=this._tiles[r];if(o)return o.el.setAttribute("src",T),Zi.prototype._removeTile.call(this,r)},_tileReady:function(r,o,c){if(!(!this._map||c&&c.getAttribute("src")===T))return Zi.prototype._tileReady.call(this,r,o,c)}});function lh(r,o){return new Zr(r,o)}var ch=Zr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,o){this._url=r;var c=s({},this.defaultWmsParams);for(var d in o)d in this.options||(c[d]=o[d]);o=S(this,o);var m=o.detectRetina&&ee.retina?2:1,y=this.getTileSize();c.width=y.x*m,c.height=y.y*m,this.wmsParams=c},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var o=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[o]=this._crs.code,Zr.prototype.onAdd.call(this,r)},getTileUrl:function(r){var o=this._tileCoordsToNwSe(r),c=this._crs,d=ue(c.project(o[0]),c.project(o[1])),m=d.min,y=d.max,j=(this._wmsVersion>=1.3&&this._crs===th?[m.y,m.x,y.y,y.x]:[m.x,m.y,y.x,y.y]).join(","),A=Zr.prototype.getTileUrl.call(this,r);return A+O(this.wmsParams,A,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+j},setParams:function(r,o){return s(this.wmsParams,r),o||this.redraw(),this}});function fv(r,o){return new ch(r,o)}Zr.WMS=ch,lh.wms=fv;var vn=Zt.extend({options:{padding:.1},initialize:function(r){S(this,r),f(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),de(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,o){var c=this._map.getZoomScale(o,this._zoom),d=this._map.getSize().multiplyBy(.5+this.options.padding),m=this._map.project(this._center,o),y=d.multiplyBy(-c).add(m).subtract(this._map._getNewPixelOrigin(r,o));ee.any3d?cr(this._container,y,c):Ze(this._container,y)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,o=this._map.getSize(),c=this._map.containerPointToLayerPoint(o.multiplyBy(-r)).round();this._bounds=new re(c,c.add(o.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),uh=vn.extend({options:{tolerance:0},getEvents:function(){var r=vn.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){vn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");le(r,"mousemove",this._onMouseMove,this),le(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),le(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){W(this._redrawRequest),delete this._ctx,Ae(this._container),Se(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var o in this._layers)r=this._layers[o],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){vn.prototype._update.call(this);var r=this._bounds,o=this._container,c=r.getSize(),d=ee.retina?2:1;Ze(o,r.min),o.width=d*c.x,o.height=d*c.y,o.style.width=c.x+"px",o.style.height=c.y+"px",ee.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){vn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[f(r)]=r;var o=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=o),this._drawLast=o,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var o=r._order,c=o.next,d=o.prev;c?c.prev=d:this._drawLast=d,d?d.next=c:this._drawFirst=c,delete r._order,delete this._layers[f(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var o=r.options.dashArray.split(/[, ]+/),c=[],d,m;for(m=0;m<o.length;m++){if(d=Number(o[m]),isNaN(d))return;c.push(d)}r.options._dashArray=c}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||$(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var o=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new re,this._redrawBounds.extend(r._pxBounds.min.subtract([o,o])),this._redrawBounds.extend(r._pxBounds.max.add([o,o]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var o=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,o.x,o.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,o=this._redrawBounds;if(this._ctx.save(),o){var c=o.getSize();this._ctx.beginPath(),this._ctx.rect(o.min.x,o.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var d=this._drawFirst;d;d=d.next)r=d.layer,(!o||r._pxBounds&&r._pxBounds.intersects(o))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,o){if(this._drawing){var c,d,m,y,j=r._parts,A=j.length,M=this._ctx;if(A){for(M.beginPath(),c=0;c<A;c++){for(d=0,m=j[c].length;d<m;d++)y=j[c][d],M[d?"lineTo":"moveTo"](y.x,y.y);o&&M.closePath()}this._fillStroke(M,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var o=r._point,c=this._ctx,d=Math.max(Math.round(r._radius),1),m=(Math.max(Math.round(r._radiusY),1)||d)/d;m!==1&&(c.save(),c.scale(1,m)),c.beginPath(),c.arc(o.x,o.y/m,d,0,Math.PI*2,!1),m!==1&&c.restore(),this._fillStroke(c,r)}},_fillStroke:function(r,o){var c=o.options;c.fill&&(r.globalAlpha=c.fillOpacity,r.fillStyle=c.fillColor||c.color,r.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(r.setLineDash&&r.setLineDash(o.options&&o.options._dashArray||[]),r.globalAlpha=c.opacity,r.lineWidth=c.weight,r.strokeStyle=c.color,r.lineCap=c.lineCap,r.lineJoin=c.lineJoin,r.stroke())},_onClick:function(r){for(var o=this._map.mouseEventToLayerPoint(r),c,d,m=this._drawFirst;m;m=m.next)c=m.layer,c.options.interactive&&c._containsPoint(o)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(c))&&(d=c);this._fireEvent(d?[d]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var o=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,o)}},_handleMouseOut:function(r){var o=this._hoveredLayer;o&&(Ue(this._container,"leaflet-interactive"),this._fireEvent([o],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,o){if(!this._mouseHoverThrottled){for(var c,d,m=this._drawFirst;m;m=m.next)c=m.layer,c.options.interactive&&c._containsPoint(o)&&(d=c);d!==this._hoveredLayer&&(this._handleMouseOut(r),d&&(de(this._container,"leaflet-interactive"),this._fireEvent([d],r,"mouseover"),this._hoveredLayer=d)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,o,c){this._map._fireDOMEvent(o,c||o.type,r)},_bringToFront:function(r){var o=r._order;if(o){var c=o.next,d=o.prev;if(c)c.prev=d;else return;d?d.next=c:c&&(this._drawFirst=c),o.prev=this._drawLast,this._drawLast.next=o,o.next=null,this._drawLast=o,this._requestRedraw(r)}},_bringToBack:function(r){var o=r._order;if(o){var c=o.next,d=o.prev;if(d)d.next=c;else return;c?c.prev=d:d&&(this._drawLast=d),o.prev=null,o.next=this._drawFirst,this._drawFirst.prev=o,this._drawFirst=o,this._requestRedraw(r)}}});function dh(r){return ee.canvas?new uh(r):null}var Hi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),mv={_initContainer:function(){this._container=we("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(vn.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var o=r._container=Hi("shape");de(o,"leaflet-vml-shape "+(this.options.className||"")),o.coordsize="1 1",r._path=Hi("path"),o.appendChild(r._path),this._updateStyle(r),this._layers[f(r)]=r},_addPath:function(r){var o=r._container;this._container.appendChild(o),r.options.interactive&&r.addInteractiveTarget(o)},_removePath:function(r){var o=r._container;Ae(o),r.removeInteractiveTarget(o),delete this._layers[f(r)]},_updateStyle:function(r){var o=r._stroke,c=r._fill,d=r.options,m=r._container;m.stroked=!!d.stroke,m.filled=!!d.fill,d.stroke?(o||(o=r._stroke=Hi("stroke")),m.appendChild(o),o.weight=d.weight+"px",o.color=d.color,o.opacity=d.opacity,d.dashArray?o.dashStyle=w(d.dashArray)?d.dashArray.join(" "):d.dashArray.replace(/( *, *)/g," "):o.dashStyle="",o.endcap=d.lineCap.replace("butt","flat"),o.joinstyle=d.lineJoin):o&&(m.removeChild(o),r._stroke=null),d.fill?(c||(c=r._fill=Hi("fill")),m.appendChild(c),c.color=d.fillColor||d.color,c.opacity=d.fillOpacity):c&&(m.removeChild(c),r._fill=null)},_updateCircle:function(r){var o=r._point.round(),c=Math.round(r._radius),d=Math.round(r._radiusY||c);this._setPath(r,r._empty()?"M0 0":"AL "+o.x+","+o.y+" "+c+","+d+" 0,"+65535*360)},_setPath:function(r,o){r._path.v=o},_bringToFront:function(r){Dr(r._container)},_bringToBack:function(r){Br(r._container)}},fo=ee.vml?Hi:hn,Wi=vn.extend({_initContainer:function(){this._container=fo("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=fo("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ae(this._container),Se(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){vn.prototype._update.call(this);var r=this._bounds,o=r.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(o))&&(this._svgSize=o,c.setAttribute("width",o.x),c.setAttribute("height",o.y)),Ze(c,r.min),c.setAttribute("viewBox",[r.min.x,r.min.y,o.x,o.y].join(" ")),this.fire("update")}},_initPath:function(r){var o=r._path=fo("path");r.options.className&&de(o,r.options.className),r.options.interactive&&de(o,"leaflet-interactive"),this._updateStyle(r),this._layers[f(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){Ae(r._path),r.removeInteractiveTarget(r._path),delete this._layers[f(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var o=r._path,c=r.options;o&&(c.stroke?(o.setAttribute("stroke",c.color),o.setAttribute("stroke-opacity",c.opacity),o.setAttribute("stroke-width",c.weight),o.setAttribute("stroke-linecap",c.lineCap),o.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?o.setAttribute("stroke-dasharray",c.dashArray):o.removeAttribute("stroke-dasharray"),c.dashOffset?o.setAttribute("stroke-dashoffset",c.dashOffset):o.removeAttribute("stroke-dashoffset")):o.setAttribute("stroke","none"),c.fill?(o.setAttribute("fill",c.fillColor||c.color),o.setAttribute("fill-opacity",c.fillOpacity),o.setAttribute("fill-rule",c.fillRule||"evenodd")):o.setAttribute("fill","none"))},_updatePoly:function(r,o){this._setPath(r,ar(r._parts,o))},_updateCircle:function(r){var o=r._point,c=Math.max(Math.round(r._radius),1),d=Math.max(Math.round(r._radiusY),1)||c,m="a"+c+","+d+" 0 1,0 ",y=r._empty()?"M0 0":"M"+(o.x-c)+","+o.y+m+c*2+",0 "+m+-c*2+",0 ";this._setPath(r,y)},_setPath:function(r,o){r._path.setAttribute("d",o)},_bringToFront:function(r){Dr(r._path)},_bringToBack:function(r){Br(r._path)}});ee.vml&&Wi.include(mv);function hh(r){return ee.svg||ee.vml?new Wi(r):null}_e.include({getRenderer:function(r){var o=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return o||(o=this._renderer=this._createRenderer()),this.hasLayer(o)||this.addLayer(o),o},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var o=this._paneRenderers[r];return o===void 0&&(o=this._createRenderer({pane:r}),this._paneRenderers[r]=o),o},_createRenderer:function(r){return this.options.preferCanvas&&dh(r)||hh(r)}});var fh=Fr.extend({initialize:function(r,o){Fr.prototype.initialize.call(this,this._boundsToLatLngs(r),o)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=me(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function pv(r,o){return new fh(r,o)}Wi.create=fo,Wi.pointsToPath=ar,gn.geometryToLayer=so,gn.coordsToLatLng=bl,gn.coordsToLatLngs=oo,gn.latLngToCoords=jl,gn.latLngsToCoords=ao,gn.getFeature=qr,gn.asFeature=lo,_e.mergeOptions({boxZoom:!0});var mh=nn.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){le(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Se(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ae(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ri(),sl(),this._startPoint=this._map.mouseEventToContainerPoint(r),le(document,{contextmenu:hr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=we("div","leaflet-zoom-box",this._container),de(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var o=new re(this._point,this._startPoint),c=o.getSize();Ze(this._box,o.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(Ae(this._box),Ue(this._container,"leaflet-crosshair")),Di(),ol(),Se(document,{contextmenu:hr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var o=new Ce(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(o).fire("boxzoomend",{boxZoomBounds:o})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});_e.addInitHook("addHandler","boxZoom",mh),_e.mergeOptions({doubleClickZoom:!0});var ph=nn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var o=this._map,c=o.getZoom(),d=o.options.zoomDelta,m=r.originalEvent.shiftKey?c-d:c+d;o.options.doubleClickZoom==="center"?o.setZoom(m):o.setZoomAround(r.containerPoint,m)}});_e.addInitHook("addHandler","doubleClickZoom",ph),_e.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var gh=nn.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new In(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}de(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ue(this._map._container,"leaflet-grab"),Ue(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var o=me(this._map.options.maxBounds);this._offsetLimit=ue(this._map.latLngToContainerPoint(o.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(o.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var o=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(o),this._prunePositions(o)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),o=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=o.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,o){return r-(r-o)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),o=this._offsetLimit;r.x<o.min.x&&(r.x=this._viscousLimit(r.x,o.min.x)),r.y<o.min.y&&(r.y=this._viscousLimit(r.y,o.min.y)),r.x>o.max.x&&(r.x=this._viscousLimit(r.x,o.max.x)),r.y>o.max.y&&(r.y=this._viscousLimit(r.y,o.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,o=Math.round(r/2),c=this._initialWorldOffset,d=this._draggable._newPos.x,m=(d-o+c)%r+o-c,y=(d+o+c)%r-o-c,j=Math.abs(m+c)<Math.abs(y+c)?m:y;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=j},_onDragEnd:function(r){var o=this._map,c=o.options,d=!c.inertia||r.noInertia||this._times.length<2;if(o.fire("dragend",r),d)o.fire("moveend");else{this._prunePositions(+new Date);var m=this._lastPos.subtract(this._positions[0]),y=(this._lastTime-this._times[0])/1e3,j=c.easeLinearity,A=m.multiplyBy(j/y),M=A.distanceTo([0,0]),F=Math.min(c.inertiaMaxSpeed,M),Q=A.multiplyBy(F/M),se=F/(c.inertiaDeceleration*j),fe=Q.multiplyBy(-se/2).round();!fe.x&&!fe.y?o.fire("moveend"):(fe=o._limitOffset(fe,o.options.maxBounds),$(function(){o.panBy(fe,{duration:se,easeLinearity:j,noMoveStart:!0,animate:!0})}))}}});_e.addInitHook("addHandler","dragging",gh),_e.mergeOptions({keyboard:!0,keyboardPanDelta:80});var vh=nn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),le(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Se(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,o=document.documentElement,c=r.scrollTop||o.scrollTop,d=r.scrollLeft||o.scrollLeft;this._map._container.focus(),window.scrollTo(d,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var o=this._panKeys={},c=this.keyCodes,d,m;for(d=0,m=c.left.length;d<m;d++)o[c.left[d]]=[-1*r,0];for(d=0,m=c.right.length;d<m;d++)o[c.right[d]]=[r,0];for(d=0,m=c.down.length;d<m;d++)o[c.down[d]]=[0,r];for(d=0,m=c.up.length;d<m;d++)o[c.up[d]]=[0,-1*r]},_setZoomDelta:function(r){var o=this._zoomKeys={},c=this.keyCodes,d,m;for(d=0,m=c.zoomIn.length;d<m;d++)o[c.zoomIn[d]]=r;for(d=0,m=c.zoomOut.length;d<m;d++)o[c.zoomOut[d]]=-r},_addHooks:function(){le(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Se(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var o=r.keyCode,c=this._map,d;if(o in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(d=this._panKeys[o],r.shiftKey&&(d=H(d).multiplyBy(3)),c.options.maxBounds&&(d=c._limitOffset(H(d),c.options.maxBounds)),c.options.worldCopyJump){var m=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(d)));c.panTo(m)}else c.panBy(d)}else if(o in this._zoomKeys)c.setZoom(c.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[o]);else if(o===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;hr(r)}}});_e.addInitHook("addHandler","keyboard",vh),_e.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var yh=nn.extend({addHooks:function(){le(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Se(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var o=Fd(r),c=this._map.options.wheelDebounceTime;this._delta+=o,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var d=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),d),hr(r)},_performZoom:function(){var r=this._map,o=r.getZoom(),c=this._map.options.zoomSnap||0;r._stop();var d=this._delta/(this._map.options.wheelPxPerZoomLevel*4),m=4*Math.log(2/(1+Math.exp(-Math.abs(d))))/Math.LN2,y=c?Math.ceil(m/c)*c:m,j=r._limitZoom(o+(this._delta>0?y:-y))-o;this._delta=0,this._startTime=null,j&&(r.options.scrollWheelZoom==="center"?r.setZoom(o+j):r.setZoomAround(this._lastMousePos,o+j))}});_e.addInitHook("addHandler","scrollWheelZoom",yh);var gv=600;_e.mergeOptions({tapHold:ee.touchNative&&ee.safari&&ee.mobile,tapTolerance:15});var _h=nn.extend({addHooks:function(){le(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Se(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var o=r.touches[0];this._startPos=this._newPos=new D(o.clientX,o.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(le(document,"touchend",et),le(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",o))},this),gv),le(document,"touchend touchcancel contextmenu",this._cancel,this),le(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){Se(document,"touchend",et),Se(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),Se(document,"touchend touchcancel contextmenu",this._cancel,this),Se(document,"touchmove",this._onMove,this)},_onMove:function(r){var o=r.touches[0];this._newPos=new D(o.clientX,o.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,o){var c=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:o.screenX,screenY:o.screenY,clientX:o.clientX,clientY:o.clientY});c._simulated=!0,o.target.dispatchEvent(c)}});_e.addInitHook("addHandler","tapHold",_h),_e.mergeOptions({touchZoom:ee.touch,bounceAtZoomLimits:!0});var xh=nn.extend({addHooks:function(){de(this._map._container,"leaflet-touch-zoom"),le(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ue(this._map._container,"leaflet-touch-zoom"),Se(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var o=this._map;if(!(!r.touches||r.touches.length!==2||o._animatingZoom||this._zooming)){var c=o.mouseEventToContainerPoint(r.touches[0]),d=o.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=o.getSize()._divideBy(2),this._startLatLng=o.containerPointToLatLng(this._centerPoint),o.options.touchZoom!=="center"&&(this._pinchStartLatLng=o.containerPointToLatLng(c.add(d)._divideBy(2))),this._startDist=c.distanceTo(d),this._startZoom=o.getZoom(),this._moved=!1,this._zooming=!0,o._stop(),le(document,"touchmove",this._onTouchMove,this),le(document,"touchend touchcancel",this._onTouchEnd,this),et(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var o=this._map,c=o.mouseEventToContainerPoint(r.touches[0]),d=o.mouseEventToContainerPoint(r.touches[1]),m=c.distanceTo(d)/this._startDist;if(this._zoom=o.getScaleZoom(m,this._startZoom),!o.options.bounceAtZoomLimits&&(this._zoom<o.getMinZoom()&&m<1||this._zoom>o.getMaxZoom()&&m>1)&&(this._zoom=o._limitZoom(this._zoom)),o.options.touchZoom==="center"){if(this._center=this._startLatLng,m===1)return}else{var y=c._add(d)._divideBy(2)._subtract(this._centerPoint);if(m===1&&y.x===0&&y.y===0)return;this._center=o.unproject(o.project(this._pinchStartLatLng,this._zoom).subtract(y),this._zoom)}this._moved||(o._moveStart(!0,!1),this._moved=!0),W(this._animRequest);var j=u(o._move,o,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=$(j,this,!0),et(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,W(this._animRequest),Se(document,"touchmove",this._onTouchMove,this),Se(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});_e.addInitHook("addHandler","touchZoom",xh),_e.BoxZoom=mh,_e.DoubleClickZoom=ph,_e.Drag=gh,_e.Keyboard=vh,_e.ScrollWheelZoom=yh,_e.TapHold=_h,_e.TouchZoom=xh,n.Bounds=re,n.Browser=ee,n.CRS=ve,n.Canvas=uh,n.Circle=wl,n.CircleMarker=io,n.Class=J,n.Control=qt,n.DivIcon=ah,n.DivOverlay=rn,n.DomEvent=I0,n.DomUtil=O0,n.Draggable=In,n.Evented=Re,n.FeatureGroup=mn,n.GeoJSON=gn,n.GridLayer=Zi,n.Handler=nn,n.Icon=Ur,n.ImageOverlay=co,n.LatLng=he,n.LatLngBounds=Ce,n.Layer=Zt,n.LayerGroup=$r,n.LineUtil=V0,n.Map=_e,n.Marker=ro,n.Mixin=U0,n.Path=Mn,n.Point=D,n.PolyUtil=F0,n.Polygon=Fr,n.Polyline=pn,n.Popup=uo,n.PosAnimation=qd,n.Projection=G0,n.Rectangle=fh,n.Renderer=vn,n.SVG=Wi,n.SVGOverlay=oh,n.TileLayer=Zr,n.Tooltip=ho,n.Transformation=oe,n.Util=Z,n.VideoOverlay=sh,n.bind=u,n.bounds=ue,n.canvas=dh,n.circle=nv,n.circleMarker=tv,n.control=Ui,n.divIcon=dv,n.extend=s,n.featureGroup=X0,n.geoJSON=ih,n.geoJson=sv,n.gridLayer=hv,n.icon=Y0,n.imageOverlay=ov,n.latLng=B,n.latLngBounds=me,n.layerGroup=Q0,n.map=M0,n.marker=ev,n.point=H,n.polygon=iv,n.polyline=rv,n.popup=cv,n.rectangle=pv,n.setOptions=S,n.stamp=f,n.svg=hh,n.svgOverlay=lv,n.tileLayer=lh,n.tooltip=uv,n.transformation=De,n.version=i,n.videoOverlay=av;var vv=window.L;n.noConflict=function(){return window.L=vv,this},window.L=n})})(xu,xu.exports);var Ai=xu.exports;const kd=am(Ai);function Ja(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function Qa(t,e){return e==null?function(i,s){const l=z.useRef();return l.current||(l.current=t(i,s)),l}:function(i,s){const l=z.useRef();l.current||(l.current=t(i,s));const u=z.useRef(i),{instance:h}=l.current;return z.useEffect(function(){u.current!==i&&(e(h,i,u.current),u.current=i)},[h,i,s]),l}}function s0(t,e){z.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var l;(l=e.layerContainer)==null||l.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function o0(t){return function(n){const i=Ga(),s=t(Ka(n,i),i);return e0(i.map,n.attribution),jd(s.current,n.eventHandlers),s0(s.current,i),s}}function Kb(t,e){const n=z.useRef();z.useEffect(function(){if(e.pathOptions!==n.current){const s=e.pathOptions??{};t.instance.setStyle(s),n.current=s}},[t,e])}function Jb(t){return function(n){const i=Ga(),s=t(Ka(n,i),i);return jd(s.current,n.eventHandlers),s0(s.current,i),Kb(s.current,n),s}}function Qb(t,e){const n=Qa(t,e),i=o0(n);return i0(i)}function Xb(t,e){const n=Qa(t),i=Gb(n,e);return Wb(i)}function Yb(t,e){const n=Qa(t,e),i=Jb(n);return i0(i)}function e1(t,e){const n=Qa(t,e),i=o0(n);return Vb(i)}function t1(t,e,n){const{opacity:i,zIndex:s}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function n1(){return Ga().map}function r1(t){const e=n1();return z.useEffect(function(){return e.on(t),function(){e.off(t)}},[e,t]),e}function wu(){return wu=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},wu.apply(this,arguments)}function i1({bounds:t,boundsOptions:e,center:n,children:i,className:s,id:l,placeholder:u,style:h,whenReady:f,zoom:p,...v},x){const[b]=z.useState({className:s,id:l,style:h}),[N,k]=z.useState(null);z.useImperativeHandle(x,()=>(N==null?void 0:N.map)??null,[N]);const S=z.useCallback(g=>{if(g!==null&&N===null){const _=new Ai.Map(g,v);n!=null&&p!=null?_.setView(n,p):t!=null&&_.fitBounds(t,e),f!=null&&_.whenReady(f),k(Hb(_))}},[]);z.useEffect(()=>()=>{N==null||N.map.remove()},[N]);const O=N?nt.createElement(r0,{value:N},i):u??null;return nt.createElement("div",wu({},b,{ref:S}),O)}const s1=z.forwardRef(i1),o1=Qb(function({position:e,...n},i){const s=new Ai.Marker(e,n);return Ja(s,t0(i,{overlayContainer:s}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),a1=Yb(function({positions:e,...n},i){const s=new Ai.Polygon(e,n);return Ja(s,t0(i,{overlayContainer:s}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),a0=Xb(function(e,n){const i=new Ai.Popup(e,n.overlayContainer);return Ja(i,n)},function(e,n,{position:i},s){z.useEffect(function(){const{instance:u}=e;function h(p){p.popup===u&&(u.update(),s(!0))}function f(p){p.popup===u&&s(!1)}return n.map.on({popupopen:h,popupclose:f}),n.overlayContainer==null?(i!=null&&u.setLatLng(i),u.openOn(n.map)):n.overlayContainer.bindPopup(u),function(){var v;n.map.off({popupopen:h,popupclose:f}),(v=n.overlayContainer)==null||v.unbindPopup(),n.map.removeLayer(u)}},[e,n,s,i])}),uc=e1(function({url:e,...n},i){const s=new Ai.TileLayer(e,Ka(n,i));return Ja(s,i)},function(e,n,i){t1(e,n,i);const{url:s}=n;s!=null&&s!==i.url&&e.setUrl(s)});function l1({isOpen:t,onClose:e,onUpload:n}){const[i,s]=z.useState(!1),[l,u]=z.useState(!1),[h,f]=z.useState(null);if(!t)return null;const p=O=>{O.preventDefault(),O.stopPropagation(),O.type==="dragenter"||O.type==="dragover"?s(!0):O.type==="dragleave"&&s(!1)},v=O=>{O.preventDefault(),O.stopPropagation(),s(!1),O.dataTransfer.files&&O.dataTransfer.files[0]&&S(O.dataTransfer.files)},x=O=>{O.preventDefault(),O.target.files&&O.target.files[0]&&S(O.target.files)},b=O=>{const g=O.split(`
`),_=g[0].split(",").map(P=>P.trim().toLowerCase()),w=_.findIndex(P=>P.includes("lat")),C=_.findIndex(P=>P.includes("lng")||P.includes("lon")),T=_.findIndex(P=>P.includes("name")||P.includes("nome"));if(w===-1||C===-1)throw new Error("Colunas de latitude e longitude não encontradas");return g.slice(1).filter(P=>P.trim()).map((P,I)=>{const U=P.split(","),K=parseFloat(U[w]),E=parseFloat(U[C]);return isNaN(K)||isNaN(E)?null:{id:`csv-${I}`,name:U[T]||`Ponto ${I+1}`,latitude:K,longitude:E,type:"imported",data:Object.fromEntries(_.map(($,W)=>[$,U[W]]))}}).filter(Boolean)},N=O=>{var _,w,C;const g=JSON.parse(O);if(console.log("🔍 UPLOAD DEBUG - JSON Structure:",{type:g.type,featuresCount:(_=g.features)==null?void 0:_.length,firstFeature:(w=g.features)==null?void 0:w[0]}),g.type==="FeatureCollection"){if(console.log("📍 UPLOAD DEBUG - Processing FeatureCollection with",(C=g.features)==null?void 0:C.length,"features"),!g.features||!Array.isArray(g.features))return console.error("❌ No features array found"),[];console.log("🔍 First feature sample:",g.features[0]);const T=g.features.map((P,I)=>{var U,K,E,$,W,Z,J,ae,je,Re,D;if(!P.geometry)return console.warn("❌ Feature without geometry at index:",I),null;if(!P.geometry.coordinates||!Array.isArray(P.geometry.coordinates))return console.warn("❌ Feature with invalid coordinates at index:",I),null;if(console.log(`🔍 Processing feature ${I}:`,{type:P.geometry.type,properties:P.properties,coordinatesLength:(U=P.geometry.coordinates)==null?void 0:U.length}),P.geometry.type==="Point"){const Y=P.geometry.coordinates;return!Array.isArray(Y)||Y.length<2||isNaN(Y[0])||isNaN(Y[1])?(console.warn("❌ Invalid Point coordinates at index:",I),null):{id:P.id||`point-${I}`,name:((K=P.properties)==null?void 0:K.municipio)||((E=P.properties)==null?void 0:E.name)||(($=P.properties)==null?void 0:$.Nome)||`Ponto ${I+1}`,type:"Point",coordinates:P.geometry.coordinates,properties:P.properties||{},data:P.properties||{}}}else if(P.geometry.type==="Polygon"){const Y=P.geometry.coordinates;return!Array.isArray(Y)||Y.length===0||!Array.isArray(Y[0])?(console.warn("❌ Invalid Polygon coordinates at index:",I),null):{id:P.id||`polygon-${I}`,name:((W=P.properties)==null?void 0:W.municipio)||((Z=P.properties)==null?void 0:Z.name)||((J=P.properties)==null?void 0:J.Nome)||`Polígono ${I+1}`,type:"Polygon",coordinates:P.geometry.coordinates,properties:P.properties||{},data:P.properties||{}}}else if(P.geometry.type==="MultiPolygon"){const Y=P.geometry.coordinates;return!Array.isArray(Y)||Y.length===0?(console.warn("❌ Invalid MultiPolygon coordinates at index:",I),null):(console.log("🔶 MultiPolygon found for:",(ae=P.properties)==null?void 0:ae.municipio),{id:P.id||`multipolygon-${I}`,name:((je=P.properties)==null?void 0:je.municipio)||((Re=P.properties)==null?void 0:Re.name)||((D=P.properties)==null?void 0:D.Nome)||`Multi-Polígono ${I+1}`,type:"MultiPolygon",coordinates:P.geometry.coordinates,properties:P.properties||{},data:P.properties||{}})}else return console.warn("❌ Unsupported geometry type:",P.geometry.type),null}).filter(Boolean);return console.log("🎯 Final processed features:",{total:T.length,points:T.filter(P=>P.type==="Point").length,polygons:T.filter(P=>P.type==="Polygon").length,multiPolygons:T.filter(P=>P.type==="MultiPolygon").length}),T}else{if(Array.isArray(g))return console.log("📋 Processing simple array with",g.length,"items"),g.map((T,P)=>({id:T.id||`json-${P}`,name:T.name||T.Nome||`Item ${P+1}`,type:"Point",coordinates:[T.longitude||T.lng,T.latitude||T.lat],properties:T,data:T})).filter(T=>!isNaN(T.coordinates[0])&&!isNaN(T.coordinates[1]));if(g.latitude||g.lat)return console.log("📍 Processing single object"),[{id:g.id||"json-single",name:g.name||g.Nome||"Ponto Importado",type:"Point",coordinates:[g.longitude||g.lng,g.latitude||g.lat],properties:g,data:g}]}return console.error("❌ Formato JSON não reconhecido"),[]},k=O=>(O.match(/<Placemark>[\s\S]*?<\/Placemark>/g)||[]).map((_,w)=>{const C=_.match(/<name>(.*?)<\/name>/),T=_.match(/<coordinates>(.*?)<\/coordinates>/);if(T){const P=T[1].trim().split(",");return{id:`kml-${w}`,name:C?C[1]:`Ponto ${w+1}`,latitude:parseFloat(P[1]),longitude:parseFloat(P[0]),type:"imported",data:{source:"kml"}}}return null}).filter(Boolean),S=async O=>{var C;const g=O[0];if(!g)return;console.log("📁 UPLOAD DEBUG - File selected:",{name:g.name,size:g.size,type:g.type});const _=[".csv",".json",".geojson",".kml"],w="."+((C=g.name.split(".").pop())==null?void 0:C.toLowerCase());if(console.log("🔍 UPLOAD DEBUG - File extension:",w),!_.includes(w)){f({success:!1,message:"Formato não suportado. Use CSV, JSON, GeoJSON ou KML."});return}u(!0),f(null);try{const T=await g.text();console.log("📄 UPLOAD DEBUG - File content length:",T.length),console.log("📄 UPLOAD DEBUG - First 200 chars:",T.substring(0,200));let P=[];switch(w){case".csv":console.log("🔄 UPLOAD DEBUG - Parsing as CSV"),P=b(T);break;case".json":case".geojson":console.log("🔄 UPLOAD DEBUG - Parsing as JSON/GeoJSON"),P=N(T);break;case".kml":console.log("🔄 UPLOAD DEBUG - Parsing as KML"),P=k(T);break}console.log("🎯 UPLOAD DEBUG - Parsed data:",{count:P.length,sample:P[0]}),P.length>0?(n(P,g.name),f({success:!0,message:"Arquivo carregado com sucesso!",count:P.length})):f({success:!1,message:"Nenhum dado georreferenciado encontrado no arquivo."})}catch(T){console.error("❌ UPLOAD DEBUG - Error:",T),f({success:!1,message:"Erro ao processar arquivo: "+T.message})}finally{u(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Nn,{className:"w-6 h-6 text-blue-600"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Upload de Dados Georreferenciados"})]}),a.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(mt,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[a.jsxs("div",{className:`relative border-2 border-dashed rounded-lg p-8 text-center transition-colors ${i?"border-green-400 bg-green-50":"border-gray-300 hover:border-green-400 hover:bg-green-50"}`,onDragEnter:p,onDragLeave:p,onDragOver:p,onDrop:v,children:[a.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:x,accept:".csv,.json,.geojson,.kml"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:l?a.jsx("div",{className:"w-8 h-8 border-2 border-green-600 border-t-transparent rounded-full animate-spin"}):a.jsx(Nn,{className:"w-8 h-8 text-green-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:l?"Processando arquivo...":"Upload de Dados Georreferenciados"}),a.jsx("p",{className:"text-gray-600",children:"Arraste e solte ou clique para selecionar arquivos"}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Formatos suportados: CSV, JSON, GeoJSON, KML"})]})]})]}),h&&a.jsx("div",{className:`p-4 rounded-lg border ${h.success?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:a.jsxs("div",{className:"flex items-start space-x-3",children:[h.success?a.jsx(_s,{className:"w-5 h-5 text-green-600 mt-0.5"}):a.jsx(Vg,{className:"w-5 h-5 text-red-600 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:`font-medium ${h.success?"text-green-900":"text-red-900"}`,children:h.message}),h.success&&h.count&&a.jsxs("p",{className:"text-sm text-green-700 mt-1",children:[h.count," pontos carregados"]})]}),a.jsx("button",{onClick:()=>f(null),className:`p-1 rounded ${h.success?"text-green-400 hover:text-green-600":"text-red-400 hover:text-red-600"}`,children:a.jsx(mt,{className:"w-4 h-4"})})]})}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[a.jsxs("h4",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(rt,{className:"w-4 h-4"}),"Exemplos de Formato"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"CSV"}),a.jsx("pre",{className:"text-xs bg-white p-3 rounded border text-gray-600",children:`name,latitude,longitude,status
Empresa A,-23.5505,-46.6333,ativo
Processo B,-22.9068,-43.1729,aprovado`})]}),a.jsxs("div",{children:[a.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"JSON"}),a.jsx("pre",{className:"text-xs bg-white p-3 rounded border text-gray-600",children:`[
  {
    "name": "Empresa A",
    "latitude": -23.5505,
    "longitude": -46.6333,
    "status": "ativo"
  }
]`})]})]})]})]})]})})}function c1({isOpen:t,onClose:e,onSave:n,currentSettings:i}){const[s,l]=z.useState({defaultZoom:10,defaultCenter:{lat:-23.5505,lng:-46.6333},mapStyle:"satellite",showClusters:!0,clusterRadius:50,pointSize:8,showLabels:!0,autoRefresh:!1,refreshInterval:30,colorScheme:"status",...i});if(!t)return null;const u=()=>{n(s),e()},h=[{id:"satellite",name:"Satélite",preview:"🛰️"},{id:"street",name:"Ruas",preview:"🗺️"},{id:"terrain",name:"Terreno",preview:"🏔️"},{id:"hybrid",name:"Híbrido",preview:"🌍"}],f=[{id:"status",name:"Por Status",description:"Cores baseadas no status do processo"},{id:"type",name:"Por Tipo",description:"Cores baseadas no tipo de licença"},{id:"date",name:"Por Data",description:"Cores baseadas na data de criação"},{id:"custom",name:"Personalizado",description:"Esquema de cores personalizado"}];return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Bs,{className:"w-6 h-6 text-blue-600"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Configurações do Mapa"})]}),a.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(mt,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center gap-2",children:[a.jsx(ba,{className:"w-5 h-5"}),"Visualização do Mapa"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Zoom Padrão"}),a.jsx("input",{type:"range",min:"1",max:"20",value:s.defaultZoom,onChange:p=>l(v=>({...v,defaultZoom:parseInt(p.target.value)})),className:"w-full"}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Nível: ",s.defaultZoom]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tamanho dos Pontos"}),a.jsx("input",{type:"range",min:"4",max:"16",value:s.pointSize,onChange:p=>l(v=>({...v,pointSize:parseInt(p.target.value)})),className:"w-full"}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s.pointSize,"px"]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estilo do Mapa"}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:h.map(p=>a.jsx("button",{onClick:()=>l(v=>({...v,mapStyle:p.id})),className:`p-3 border rounded-lg text-left transition-colors ${s.mapStyle===p.id?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-lg",children:p.preview}),a.jsx("span",{className:"text-sm font-medium",children:p.name})]})},p.id))})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center gap-2",children:[a.jsx(yu,{className:"w-5 h-5"}),"Agrupamento de Pontos"]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",id:"showClusters",checked:s.showClusters,onChange:p=>l(v=>({...v,showClusters:p.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsx("label",{htmlFor:"showClusters",className:"text-sm font-medium text-gray-700",children:"Agrupar pontos próximos"})]}),s.showClusters&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Raio de Agrupamento"}),a.jsx("input",{type:"range",min:"20",max:"100",value:s.clusterRadius,onChange:p=>l(v=>({...v,clusterRadius:parseInt(p.target.value)})),className:"w-full"}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s.clusterRadius,"px"]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center gap-2",children:[a.jsx(ja,{className:"w-5 h-5"}),"Esquema de Cores"]}),a.jsx("div",{className:"space-y-3",children:f.map(p=>a.jsxs("label",{className:`flex items-start p-3 border rounded-lg cursor-pointer transition-colors ${s.colorScheme===p.id?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,children:[a.jsx("input",{type:"radio",name:"colorScheme",value:p.id,checked:s.colorScheme===p.id,onChange:v=>l(x=>({...x,colorScheme:v.target.value})),className:"mt-1 text-blue-600 focus:ring-blue-500"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:p.name}),a.jsx("div",{className:"text-xs text-gray-500",children:p.description})]})]},p.id))})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Outras Opções"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",id:"showLabels",checked:s.showLabels,onChange:p=>l(v=>({...v,showLabels:p.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsx("label",{htmlFor:"showLabels",className:"text-sm font-medium text-gray-700",children:"Mostrar rótulos dos pontos"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",id:"autoRefresh",checked:s.autoRefresh,onChange:p=>l(v=>({...v,autoRefresh:p.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsx("label",{htmlFor:"autoRefresh",className:"text-sm font-medium text-gray-700",children:"Atualização automática"})]}),s.autoRefresh&&a.jsxs("div",{className:"ml-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Intervalo (segundos)"}),a.jsxs("select",{value:s.refreshInterval,onChange:p=>l(v=>({...v,refreshInterval:parseInt(p.target.value)})),className:"w-32 p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:15,children:"15s"}),a.jsx("option",{value:30,children:"30s"}),a.jsx("option",{value:60,children:"1min"}),a.jsx("option",{value:300,children:"5min"})]})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Centro Padrão do Mapa"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Latitude"}),a.jsx("input",{type:"number",step:"0.000001",value:s.defaultCenter.lat,onChange:p=>l(v=>({...v,defaultCenter:{...v.defaultCenter,lat:parseFloat(p.target.value)}})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Longitude"}),a.jsx("input",{type:"number",step:"0.000001",value:s.defaultCenter.lng,onChange:p=>l(v=>({...v,defaultCenter:{...v.defaultCenter,lng:parseFloat(p.target.value)}})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50",children:[a.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),a.jsxs("button",{onClick:u,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[a.jsx(Wa,{className:"w-4 h-4"}),"Salvar Configurações"]})]})]})})}function u1({isOpen:t,onClose:e,data:n}){var S;const[i,s]=z.useState("csv"),[l,u]=z.useState({coordinates:!0,name:!0,type:!0,status:!0,details:!1}),[h,f]=z.useState(!1);if(!t)return null;const p=[{id:"csv",name:"CSV",icon:rt,description:"Planilha compatível com Excel"},{id:"json",name:"JSON",icon:rt,description:"Formato de dados estruturados"},{id:"geojson",name:"GeoJSON",icon:rm,description:"Formato padrão para dados geográficos"},{id:"kml",name:"KML",icon:rm,description:"Compatível com Google Earth"}],v=async()=>{f(!0);try{let O="",g="",_="";switch(i){case"csv":O=x(),g="dados_geo.csv",_="text/csv";break;case"json":O=b(),g="dados_geo.json",_="application/json";break;case"geojson":O=N(),g="dados_geo.geojson",_="application/geo+json";break;case"kml":O=k(),g="dados_geo.kml",_="application/vnd.google-earth.kml+xml";break}const w=new Blob([O],{type:_}),C=URL.createObjectURL(w),T=document.createElement("a");T.href=C,T.download=g,document.body.appendChild(T),T.click(),document.body.removeChild(T),URL.revokeObjectURL(C),e()}catch(O){console.error("Error exporting data:",O),alert("Erro ao exportar dados: "+O.message)}finally{f(!1)}},x=()=>{const O=[];l.name&&O.push("nome"),l.coordinates&&O.push("latitude","longitude"),l.type&&O.push("tipo"),l.status&&O.push("status"),l.details&&O.push("detalhes");const g=n.map(_=>{const w=[];return l.name&&w.push(_.name||""),l.coordinates&&w.push(_.latitude,_.longitude),l.type&&w.push(_.type||""),l.status&&w.push(_.status||""),l.details&&w.push(JSON.stringify(_.data||{})),w.join(",")});return[O.join(","),...g].join(`
`)},b=()=>{const O=n.map(g=>{const _={};return l.name&&(_.name=g.name),l.coordinates&&(_.latitude=g.latitude,_.longitude=g.longitude),l.type&&(_.type=g.type),l.status&&(_.status=g.status),l.details&&(_.details=g.data),_});return JSON.stringify(O,null,2)},N=()=>{const O=n.map(g=>({type:"Feature",geometry:{type:"Point",coordinates:[g.longitude,g.latitude]},properties:{...l.name&&{name:g.name},...l.type&&{type:g.type},...l.status&&{status:g.status},...l.details&&{details:g.data}}}));return JSON.stringify({type:"FeatureCollection",features:O},null,2)},k=()=>`<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Document>
    <name>Dados Georreferenciados</name>
    <description>Exportado do Sistema de Licenciamento Ambiental</description>
    ${n.map(g=>`
    <Placemark>
      <name>${g.name||"Ponto"}</name>
      <description>${g.status||""}</description>
      <Point>
        <coordinates>${g.longitude},${g.latitude},0</coordinates>
      </Point>
    </Placemark>`).join("")}
  </Document>
</kml>`;return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(jr,{className:"w-6 h-6 text-blue-600"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Exportar Dados Georreferenciados"})]}),a.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(mt,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Formato de Exportação"}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:p.map(O=>{const g=O.icon;return a.jsxs("button",{onClick:()=>s(O.id),className:`p-4 border rounded-lg text-left transition-colors ${i===O.id?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx(g,{className:"w-5 h-5 text-gray-600"}),a.jsx("span",{className:"font-medium text-gray-900",children:O.name})]}),a.jsx("p",{className:"text-sm text-gray-600",children:O.description})]},O.id)})})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Campos a Incluir"}),a.jsx("div",{className:"space-y-3",children:Object.entries(l).map(([O,g])=>{const _={coordinates:"Coordenadas (Latitude/Longitude)",name:"Nome do Ponto",type:"Tipo (Processo/Empresa)",status:"Status",details:"Detalhes Completos"};return a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",checked:g,onChange:w=>u(C=>({...C,[O]:w.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-gray-700",children:_[O]})]},O)})})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Resumo da Exportação"}),a.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[a.jsxs("p",{children:["• ",a.jsx("strong",{children:n.length})," pontos serão exportados"]}),a.jsxs("p",{children:["• Formato: ",a.jsx("strong",{children:(S=p.find(O=>O.id===i))==null?void 0:S.name})]}),a.jsxs("p",{children:["• Campos incluídos: ",a.jsx("strong",{children:Object.values(l).filter(Boolean).length})]})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50",children:[a.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),a.jsxs("button",{onClick:v,disabled:h||n.length===0,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2 transition-colors",children:[h?a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsx(jr,{className:"w-4 h-4"}),h?"Exportando...":"Exportar"]})]})]})})}function d1({isOpen:t,onClose:e,currentColor:n,onColorChange:i,layerName:s}){const l=["#3B82F6","#10B981","#8B5CF6","#F59E0B","#EF4444","#06B6D4","#84CC16","#F97316","#EC4899","#6366F1","#14B8A6","#A855F7","#22C55E","#F43F5E","#0EA5E9","#8B5A2B","#6B7280","#DC2626","#059669","#7C3AED","#F59E0B","#EF4444","#8B5CF6","#06B6D4"],[u,h]=nt.useState(n);return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(ja,{className:"w-5 h-5 text-purple-600"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Alterar Cor da Camada"}),a.jsx("p",{className:"text-sm text-gray-500",children:s})]})]}),a.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(mt,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"p-4 space-y-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[a.jsx("div",{className:"w-8 h-8 rounded border-2 border-white shadow-sm",style:{backgroundColor:n}}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Cor Atual"}),a.jsx("p",{className:"text-xs text-gray-500 font-mono",children:n})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Cores Predefinidas"}),a.jsx("div",{className:"grid grid-cols-8 gap-2",children:l.map(f=>a.jsx("button",{onClick:()=>i(f),className:"relative w-8 h-8 rounded border-2 border-gray-200 hover:border-gray-400 transition-colors",style:{backgroundColor:f},title:f,children:n===f&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx(Gg,{className:"w-4 h-4 text-white drop-shadow-lg"})})},f))})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Cor Personalizada"}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"color",value:u,onChange:f=>h(f.target.value),className:"w-12 h-10 border border-gray-300 rounded cursor-pointer"}),a.jsx("div",{className:"flex-1",children:a.jsx("input",{type:"text",value:u,onChange:f=>h(f.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 font-mono text-sm",placeholder:"#000000"})}),a.jsx("button",{onClick:()=>i(u),className:"px-3 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:"Aplicar"})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Visualização"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-6 h-6 rounded border-2 border-white shadow-sm",style:{backgroundColor:u}}),a.jsx("span",{className:"text-sm text-gray-700",children:"Nova cor"})]}),a.jsx("div",{className:"text-gray-400",children:"→"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-4 h-4 border-2",style:{backgroundColor:u,borderColor:u,opacity:.6}}),a.jsx("span",{className:"text-sm text-gray-700",children:"Como aparecerá no mapa"})]})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 p-4 border-t border-gray-200 bg-gray-50",children:[a.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),a.jsxs("button",{onClick:()=>i(u),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2",children:[a.jsx(ja,{className:"w-4 h-4"}),"Aplicar Cor"]})]})]})}):null}delete kd.Icon.Default.prototype._getIconUrl;kd.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});function h1({onRightClick:t,onMapReady:e,zoomToLayerId:n,layers:i,onZoomComplete:s}){const l=r1({ready:()=>{console.log("🗺️ Map is ready"),e(l)},contextmenu:u=>{console.log("Right click at:",u.latlng)}});return nt.useEffect(()=>{if(n&&l){const u=i.find(p=>p.id===n);if(!u||u.features.length===0){s();return}console.log("🎯 Zooming to layer:",u.name,"with",u.features.length,"features");const h=[];if(u.features.forEach(p=>{if(p.type==="Point"){const[v,x]=p.coordinates;!isNaN(x)&&!isNaN(v)&&h.push([x,v])}else p.type==="Polygon"?p.coordinates[0].forEach(x=>{!isNaN(x[1])&&!isNaN(x[0])&&h.push([x[1],x[0]])}):p.type==="MultiPolygon"&&p.coordinates.forEach(v=>{v[0].forEach(b=>{!isNaN(b[1])&&!isNaN(b[0])&&h.push([b[1],b[0]])})})}),h.length===0){console.warn("❌ No valid coordinates found for layer"),s();return}console.log("🎯 Fitting bounds for",h.length,"coordinates");const f=kd.latLngBounds(h);l.fitBounds(f,{padding:[50,50],maxZoom:12,animate:!0,duration:1}),console.log("✅ Map centered on layer:",u.name),s()}},[n,l,i,s]),null}function f1({feature:t,color:e,opacity:n,onRightClick:i}){const l=(u=>t.type==="MultiPolygon"?u[0].map(h=>h.map(f=>[f[1],f[0]])):t.type==="Polygon"?u.map(h=>h.map(f=>[f[1],f[0]])):[])(t.coordinates);return a.jsx(a1,{positions:l,pathOptions:{color:e,weight:2,opacity:1,fillColor:e,fillOpacity:n*.4},eventHandlers:{contextmenu:u=>{u.originalEvent.preventDefault(),i(t,u.latlng)}},children:a.jsx(a0,{children:a.jsxs("div",{className:"text-sm",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:t.name}),a.jsxs("p",{className:"text-gray-600",children:["Tipo: ",t.type]}),t.properties&&Object.keys(t.properties).length>0&&a.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200",children:Object.entries(t.properties).slice(0,3).map(([u,h])=>a.jsxs("div",{className:"text-xs text-gray-500",children:[a.jsxs("strong",{children:[u,":"]})," ",String(h)]},u))})]})})})}function m1({processes:t=[],companies:e=[]}){var Ks,zr;const[n,i]=z.useState([]),[s,l]=z.useState(""),[u,h]=z.useState(null),[f,p]=z.useState(!1),[v,x]=z.useState(!1),[b,N]=z.useState(!1),[k,S]=z.useState(!1),[O,g]=z.useState(!1),[_,w]=z.useState(null),[C,T]=z.useState(null),[P,I]=z.useState({defaultZoom:6,defaultCenter:{lat:-15.7801,lng:-47.9292},mapStyle:"openstreetmap",showClusters:!0,colorScheme:"status"}),[U,K]=z.useState(null),[E,$]=z.useState(null),[W,Z]=z.useState(null),[J,ae]=z.useState(null),[je,Re]=z.useState(320),[D,Y]=z.useState(!1),[H,re]=z.useState(0),[ue,Ce]=z.useState(0),me=["#3B82F6","#10B981","#8B5CF6","#F59E0B","#EF4444","#06B6D4","#84CC16","#F97316","#EC4899","#6366F1","#14B8A6","#A855F7","#22C55E","#F43F5E","#0EA5E9","#8B5A2B","#6B7280","#DC2626","#059669","#7C3AED"],he=()=>{const R=n.map(te=>te.color);return me.find(te=>!R.includes(te))||me[n.length%me.length]};z.useEffect(()=>{const R=[];if(t.length>0){const ne=t.filter(te=>te.coordinates).map((te,Ne)=>{var Ut;const[be,$e]=te.coordinates.split(",").map(Ft=>parseFloat(Ft.trim()));return isNaN(be)||isNaN($e)?null:{id:te.id,name:((Ut=te.companies)==null?void 0:Ut.name)||"Processo",type:"Point",coordinates:[$e,be],properties:{...te,type:"process"},layerId:"processes"}}).filter(Boolean);ne.length>0&&R.push({id:"processes",name:"Processos de Licenciamento",features:ne,visible:!0,color:"#3B82F6",opacity:1,source:"system",featureCount:ne.length})}if(e.length>0){const ne=e.filter(te=>te.coordinates).map((te,Ne)=>{const[be,$e]=te.coordinates.split(",").map(Ut=>parseFloat(Ut.trim()));return isNaN(be)||isNaN($e)?null:{id:te.id,name:te.name,type:"Point",coordinates:[$e,be],properties:{...te,type:"company"},layerId:"companies"}}).filter(Boolean);ne.length>0&&R.push({id:"companies",name:"Empresas Cadastradas",features:ne,visible:!0,color:"#8B5CF6",opacity:1,source:"system",featureCount:ne.length})}i(ne=>{const te=ne.filter(Ne=>Ne.source==="imported");return[...R,...te]})},[t,e]);const B=(R,ne)=>{console.log("🎯 Creating layer from uploaded data:",R.length,"features");const te=R.map(($e,Ut)=>({id:$e.id||`uploaded-${Date.now()}-${Ut}`,name:$e.name,type:$e.type,coordinates:$e.coordinates,properties:$e.properties||$e.data||{},layerId:`layer-${Date.now()}`})),Ne=ne.replace(/\.[^/.]+$/,""),be={id:`layer-${Date.now()}`,name:Ne,features:te,visible:!0,color:he(),opacity:1,source:"imported",uploadedAt:new Date().toISOString(),featureCount:te.length};console.log("✅ New layer created:",be.name,"with",be.featureCount,"features"),i($e=>[...$e,be]),p(!1),setTimeout(()=>{console.log("🎯 Auto-zooming to newly imported layer:",be.name),K(be.id)},100)},ve=R=>{i(ne=>ne.map(te=>te.id===R?{...te,visible:!te.visible}:te))},qe=R=>{confirm("Tem certeza que deseja remover esta camada?")&&i(ne=>ne.filter(te=>te.id!==R))},$t=R=>{w(R),g(!0)},V=R=>{_&&i(ne=>ne.map(te=>te.id===_?{...te,color:R}:te)),g(!1),w(null)},oe=(R,ne)=>{i(te=>te.map(Ne=>Ne.id===R?{...Ne,opacity:ne}:Ne))},De=(R,ne)=>{Z(ne),R.dataTransfer.effectAllowed="move",R.dataTransfer.setData("text/html",ne)},ye=(R,ne)=>{R.preventDefault(),R.dataTransfer.dropEffect="move",ae(ne)},dn=()=>{ae(null)},hn=(R,ne)=>{if(R.preventDefault(),!W||W===ne){Z(null),ae(null);return}console.log("🔄 Reordering layers:",{from:W,to:ne}),i(te=>{const Ne=[...te],be=Ne.findIndex(Ft=>Ft.id===W),$e=Ne.findIndex(Ft=>Ft.id===ne);if(be===-1||$e===-1)return te;const[Ut]=Ne.splice(be,1);return Ne.splice($e,0,Ut),console.log("✅ Layers reordered. New order:",Ne.map(Ft=>Ft.name)),Ne}),Z(null),ae(null)},ar=R=>{I(R),localStorage.setItem("geoMapSettings",JSON.stringify(R))},Ln=R=>{const ne=n.find(te=>te.id===R);!ne||ne.features.length===0||(console.log("🎯 Zooming to layer:",ne.name,"with",ne.features.length,"features"),K(R))},fn=R=>{Y(!0),re(R.clientX),Ce(je),R.preventDefault()},On=nt.useCallback(R=>{if(!D)return;const ne=R.clientX-H,te=Math.max(200,Math.min(600,ue+ne));Re(te)},[D,H,ue]),Mr=nt.useCallback(()=>{Y(!1)},[]);nt.useEffect(()=>{if(D)return document.addEventListener("mousemove",On),document.addEventListener("mouseup",Mr),document.body.style.cursor="col-resize",document.body.style.userSelect="none",()=>{document.removeEventListener("mousemove",On),document.removeEventListener("mouseup",Mr),document.body.style.cursor="",document.body.style.userSelect=""}},[D,On,Mr]);const lr=(R,ne)=>{T({x:event.clientX,y:event.clientY,feature:R})},Gs=R=>{h(R),S(!0),T(null)};nt.useEffect(()=>{const R=()=>T(null);if(C)return document.addEventListener("click",R),()=>document.removeEventListener("click",R)},[C]);const An=[...n].reverse().filter(R=>R.visible).flatMap(R=>R.features).filter(R=>!s||R.name.toLowerCase().includes(s.toLowerCase())),Xa=()=>{switch(P.mapStyle){case"satellite":return a.jsx(uc,{attribution:'© <a href="https://www.esri.com/">Esri</a>',url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"});case"terrain":return a.jsx(uc,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png"});default:return a.jsx(uc,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})}};return a.jsxs("div",{className:"flex flex-col bg-white h-full",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-lg flex items-center justify-center",children:a.jsx(ba,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Visualização Georreferenciada"}),a.jsxs("p",{className:"text-sm text-gray-500",children:[n.length," camadas • ",An.length," features visíveis"]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("button",{onClick:()=>p(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[a.jsx(Nn,{className:"w-4 h-4"}),"Importar Dados"]}),a.jsx("button",{onClick:()=>N(!0),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Exportar dados",children:a.jsx(jr,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>x(!0),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"Configurações",children:a.jsx(Bs,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{className:"flex-1 flex",style:{height:"calc(100vh - 80px)"},children:[a.jsxs("div",{className:"border-r border-gray-200 flex flex-col bg-gray-50 flex-shrink-0",style:{width:`${je}px`},children:[a.jsx("div",{className:"p-4 border-b border-gray-200 bg-white",children:a.jsxs("div",{className:"relative",children:[a.jsx(Ds,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Buscar camadas...",className:"pl-10 w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",value:s,onChange:R=>l(R.target.value)})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:a.jsxs("div",{className:"p-4",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("h3",{className:"text-sm font-medium text-gray-900 flex items-center gap-2",children:[a.jsx(yu,{className:"w-4 h-4"}),"Camadas (",n.length,")"]})}),a.jsxs("div",{className:"space-y-2",children:[n.map(R=>{var ne,te,Ne;return a.jsxs("div",{className:`bg-white border rounded-lg p-3 transition-all cursor-move ${W===R.id?"border-blue-500 shadow-lg opacity-50":J===R.id?"border-green-500 shadow-md":"border-gray-200 hover:shadow-sm"}`,draggable:!0,onDragStart:be=>De(be,R.id),onDragOver:be=>ye(be,R.id),onDragLeave:dn,onDrop:be=>hn(be,R.id),children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"text-gray-400 hover:text-gray-600 cursor-grab active:cursor-grabbing",children:a.jsx(tm,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>ve(R.id),className:`transition-colors ${R.visible?"text-green-600":"text-gray-400"}`,children:R.visible?a.jsx(Xg,{className:"w-5 h-5"}):a.jsx(Qg,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>$t(R.id),className:"w-4 h-4 rounded border-2 border-white shadow-sm",style:{backgroundColor:R.color},title:"Alterar cor da camada"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[a.jsxs("span",{className:"text-xs text-gray-500 w-8",children:[Math.round(R.opacity*100),"%"]}),a.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:R.opacity,onChange:be=>oe(R.id,parseFloat(be.target.value)),className:"flex-1 h-1 bg-gray-200 rounded-lg appearance-none cursor-pointer opacity-slider",title:`Opacidade: ${Math.round(R.opacity*100)}%`})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:R.name}),a.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[a.jsxs("span",{children:[R.featureCount," features"]}),a.jsx("span",{children:"•"}),a.jsx("span",{className:`px-1 py-0.5 rounded text-xs ${R.source==="system"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:R.source==="system"?"Sistema":"Importada"}),a.jsx("span",{children:"•"}),a.jsxs("span",{className:"text-xs text-gray-400",children:["#",n.indexOf(R)+1]})]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("button",{onClick:()=>Ln(R.id),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"Aproximar camada",children:a.jsx(Ds,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>$t(R.id),className:"p-1 text-gray-400 hover:text-purple-600 transition-colors",title:"Alterar cor",children:a.jsx(ja,{className:"w-4 h-4"})}),R.source==="imported"&&a.jsx("button",{onClick:()=>qe(R.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Remover camada",children:a.jsx(Va,{className:"w-4 h-4"})})]})]}),R.uploadedAt&&a.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Importada em ",new Date(R.uploadedAt).toLocaleString("pt-BR")]}),a.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100",children:a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Tipo:"}),a.jsx("span",{className:"ml-1 text-gray-700",children:((ne=R.features[0])==null?void 0:ne.type)==="Point"?"Pontos":((te=R.features[0])==null?void 0:te.type)==="Polygon"?"Polígonos":((Ne=R.features[0])==null?void 0:Ne.type)==="MultiPolygon"?"Multi-Polígonos":"Misto"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Status:"}),a.jsx("span",{className:`ml-1 ${R.visible?"text-green-600":"text-gray-400"}`,children:R.visible?"Visível":"Oculta"})]})]})})]},R.id)}),n.length===0&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(yu,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-500 text-sm",children:"Nenhuma camada carregada"}),a.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Importe dados para começar"})]}),n.length>1&&a.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:a.jsxs("div",{className:"flex items-center space-x-2 text-xs text-blue-700",children:[a.jsx(tm,{className:"w-3 h-3"}),a.jsx("span",{children:"Arraste as camadas para reordenar. A primeira da lista fica por cima."})]})})]})]})})]}),a.jsxs("div",{className:`w-1 bg-gray-300 hover:bg-blue-400 cursor-col-resize flex-shrink-0 relative group transition-colors ${D?"bg-blue-500":""}`,onMouseDown:fn,children:[a.jsx("div",{className:"absolute inset-y-0 left-0 w-1 bg-current opacity-0 group-hover:opacity-100 transition-opacity"}),a.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx("div",{className:"bg-white border border-gray-300 rounded p-1 shadow-sm",children:a.jsx(jb,{className:"w-3 h-3 text-gray-600 rotate-90"})})}),a.jsx("div",{className:"absolute top-1/2 left-2 transform -translate-y-1/2 bg-gray-800 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"Arraste para redimensionar"})]}),a.jsxs("div",{className:"flex-1 relative",children:[An.length>0||n.length===0?a.jsxs(s1,{center:[P.defaultCenter.lat,P.defaultCenter.lng],zoom:P.defaultZoom,style:{height:"100%",width:"100%",minHeight:"calc(100vh - 160px)"},className:"z-0",children:[a.jsxs("div",{className:"absolute top-4 right-4 z-[1000] bg-white rounded-lg shadow-lg border border-gray-200 p-2",children:[a.jsx("div",{className:"text-xs font-medium text-gray-700 mb-2",children:"Camada Base:"}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("button",{onClick:()=>I(R=>({...R,mapStyle:"openstreetmap"})),className:`w-full text-left px-2 py-1 text-xs rounded ${P.mapStyle==="openstreetmap"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:"🗺️ OpenStreetMap"}),a.jsx("button",{onClick:()=>I(R=>({...R,mapStyle:"satellite"})),className:`w-full text-left px-2 py-1 text-xs rounded ${P.mapStyle==="satellite"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:"🛰️ Satélite"})]})]}),Xa(),An.map(R=>{const ne=n.find(te=>te.id===R.layerId);if(!ne||!ne.visible)return null;if(R.type==="Polygon"||R.type==="MultiPolygon")return a.jsx(f1,{feature:R,color:ne.color,opacity:ne.opacity,onRightClick:lr},R.id);if(R.type==="Point"){const[te,Ne]=R.coordinates;return isNaN(Ne)||isNaN(te)?(console.warn("❌ Invalid Point coordinates for rendering:",R.name,[Ne,te]),null):a.jsx(o1,{position:[Ne,te],eventHandlers:{contextmenu:be=>{be.originalEvent.preventDefault(),lr(R,be.latlng)}},children:a.jsx(a0,{children:a.jsxs("div",{className:"text-sm",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:R.name}),a.jsxs("p",{className:"text-gray-600",children:["Camada: ",ne.name]}),a.jsxs("p",{className:"text-gray-500 text-xs",children:["Coords: ",Ne.toFixed(4),", ",te.toFixed(4)]}),R.properties&&Object.keys(R.properties).length>0&&a.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200",children:Object.entries(R.properties).slice(0,3).map(([be,$e])=>a.jsxs("div",{className:"text-xs text-gray-500",children:[a.jsxs("strong",{children:[be,":"]})," ",String($e)]},be))})]})})},R.id)}return null}),a.jsx(h1,{onRightClick:lr,onMapReady:$,zoomToLayerId:U,layers:n,onZoomComplete:()=>K(null)})]}):a.jsx("div",{className:"w-full bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center",style:{height:"calc(100vh - 160px)"},children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(ba,{className:"w-8 h-8 text-green-600"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Mapa Interativo"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Importe dados georreferenciados para visualizar no mapa"}),a.jsxs("button",{onClick:()=>p(!0),className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 mx-auto",children:[a.jsx(Nn,{className:"w-5 h-5"}),"Importar Dados GeoJSON"]})]})}),C&&a.jsx("div",{className:"absolute bg-white border border-gray-200 rounded-lg shadow-lg py-2 z-[1001]",style:{left:C.x,top:C.y,minWidth:"180px"},onClick:R=>R.stopPropagation(),children:a.jsxs("button",{onClick:()=>Gs(C.feature),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center gap-2",children:[a.jsx(rt,{className:"w-4 h-4"}),"Ver informações"]})})]})]}),a.jsx("div",{className:"border-t border-gray-200 bg-gray-50 px-6 py-3",children:a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("div",{className:"flex items-center space-x-6",children:n.map(R=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:R.visible?R.color:"#D1D5DB"}}),a.jsxs("span",{className:R.visible?"text-gray-700":"text-gray-400",children:[R.name,": ",R.featureCount]})]},R.id))}),a.jsxs("div",{className:"text-gray-500",children:[n.length," camadas • ",An.length," features visíveis"]})]})}),k&&u&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[80vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Informações da Feature"}),a.jsx("button",{onClick:()=>S(!1),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(mt,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"p-4 overflow-y-auto max-h-[60vh]",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:u.name}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Tipo:"}),a.jsx("span",{className:"ml-2 text-gray-900",children:u.type})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"ID:"}),a.jsx("span",{className:"ml-2 text-gray-900 font-mono text-xs",children:u.id})]})]})]}),u.properties&&a.jsxs("div",{children:[a.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Propriedades:"}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-3 space-y-2",children:Object.entries(u.properties).map(([R,ne])=>a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[a.jsxs("span",{className:"text-gray-500 font-medium",children:[R,":"]}),a.jsx("span",{className:"col-span-2 text-gray-900 break-words",children:typeof ne=="object"?JSON.stringify(ne):String(ne)})]},R))})]})]})})]})}),a.jsx(l1,{isOpen:f,onClose:()=>p(!1),onUpload:B}),a.jsx(c1,{isOpen:v,onClose:()=>x(!1),onSave:ar,currentSettings:P}),a.jsx(u1,{isOpen:b,onClose:()=>N(!1),data:An}),a.jsx(d1,{isOpen:O,onClose:()=>{g(!1),w(null)},currentColor:_&&((Ks=n.find(R=>R.id===_))==null?void 0:Ks.color)||"#3B82F6",onColorChange:V,layerName:_&&((zr=n.find(R=>R.id===_))==null?void 0:zr.name)||""})]})}function p1(){var me,he;const{user:t,userMetadata:e,signOut:n,loading:i,isConfigured:s,isSupabaseReady:l}=bd(),[u,h]=z.useState("dashboard"),[f,p]=z.useState(!1),[v,x]=z.useState(""),[b,N]=z.useState("all"),[k,S]=z.useState(!1),[O,g]=z.useState(!1),[_,w]=z.useState(!1),[C,T]=z.useState(null),[P,I]=z.useState([]),[U,K]=z.useState({total:0,pending:0,analysis:0,approved:0,rejected:0});nt.useEffect(()=>{t&&s&&l&&(E(),$())},[t,v,b,s,l]);const E=async()=>{try{const B=await zo.getProcesses({status:b,search:v});I(B)}catch(B){console.error("Error loading processes:",B),I([])}},$=async()=>{try{const B=await zo.getProcessStats();K(B)}catch(B){console.error("Error loading stats:",B),K({total:0,pending:0,analysis:0,approved:0,rejected:0})}},W=async B=>{try{await zo.createProcess(B),E(),$()}catch(ve){console.error("Error creating process:",ve)}},Z=B=>{const ve={...B,companies:B.companies||{name:"Empresa não informada",city:"N/A",state:"N/A"}};T(ve),g(!0)},J=async(B,ve)=>{try{await zo.updateProcess(B,ve),E(),$(),C&&C.id===B&&T(qe=>qe?{...qe,...ve,updated_at:new Date().toISOString()}:null)}catch(qe){console.error("Error updating process:",qe),alert("Erro ao atualizar processo: "+qe.message)}},ae=async()=>{try{await n()}catch(B){console.error("Error signing out:",B)}};if(i)return a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-green-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Carregando sistema..."})]})});if(!s||!l)return a.jsxs("div",{className:"min-h-screen flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-30"}),a.jsxs("div",{className:"relative text-center max-w-2xl mx-4 glass-effect p-8 rounded-lg",children:[a.jsx("div",{className:"w-16 h-16 bg-red-600 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(Lr,{className:"w-8 h-8 text-white"})}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Sistema Não Configurado"}),a.jsx("p",{className:"text-gray-600 mb-4",children:s?"Não foi possível conectar ao Supabase. Verifique se as credenciais estão corretas.":"As variáveis de ambiente do Supabase não estão configuradas corretamente."}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 text-left",children:[a.jsx("h3",{className:"font-medium text-blue-900 mb-3",children:"📋 Passo a passo para configurar:"}),a.jsxs("ol",{className:"text-sm text-blue-800 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"1."})," Acesse ",a.jsx("a",{href:"https://supabase.com/dashboard",target:"_blank",className:"text-blue-600 underline",children:"https://supabase.com/dashboard"})]}),a.jsxs("li",{children:[a.jsx("strong",{children:"2."})," Crie um novo projeto ou selecione um existente"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"3."})," Vá em Settings → API"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"4."}),' Copie a "Project URL" e "anon public" key']}),a.jsxs("li",{children:[a.jsx("strong",{children:"5."}),' Clique no botão "Connect to Supabase" no canto superior direito desta tela']}),a.jsxs("li",{children:[a.jsx("strong",{children:"6."})," Cole suas credenciais reais do Supabase"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"7."})," Certifique-se de que o banco de dados está configurado e acessível"]})]})]}),a.jsx("button",{onClick:()=>window.location.reload(),className:"mt-6 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"🔄 Recarregar após configurar"})]})]});if(!t)return a.jsxs("div",{className:"min-h-screen flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-20"}),a.jsxs("div",{className:"relative text-center glass-effect p-8 rounded-lg mx-4",children:[a.jsx("div",{className:"w-16 h-16 bg-green-600 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(hi,{className:"w-8 h-8 text-white"})}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Sistema de Licenciamento Ambiental"}),a.jsx("p",{className:"text-gray-600 mb-8",children:"Faça login para acessar o sistema"}),a.jsx("button",{onClick:()=>w(!0),className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors",children:"Fazer Login"})]}),a.jsx(Rb,{isOpen:_,onClose:()=>w(!1)})]});const je=B=>{switch(B){case"aprovado":return"text-green-700 bg-green-100 border-green-200";case"rejeitado":return"text-red-700 bg-red-100 border-red-200";case"em_analise":return"text-blue-700 bg-blue-100 border-blue-200";case"submitted":return"text-yellow-700 bg-yellow-100 border-yellow-200";case"documentacao_pendente":return"text-orange-700 bg-orange-100 border-orange-200";default:return"text-gray-700 bg-gray-100 border-gray-200"}},Re=B=>{switch(B){case"aprovado":return"Aprovada";case"rejeitado":return"Rejeitada";case"em_analise":return"Em Análise";case"submitted":return"Submetida";case"documentacao_pendente":return"Documentação Pendente";default:return B}},D=B=>{switch(B){case"LP":return"Licença Prévia";case"LI":return"Licença de Instalação";case"LO":return"Licença de Operação";default:return B}},Y=P.filter(B=>{var $t;const ve=(($t=B.companies)==null?void 0:$t.name.toLowerCase().includes(v.toLowerCase()))||B.activity.toLowerCase().includes(v.toLowerCase()),qe=b==="all"||B.status===b;return ve&&qe}),H=[{id:"dashboard",name:"Dashboard",icon:kb},{id:"processes",name:"Processos",icon:rt},{id:"companies",name:"Empresas",icon:Yf},{id:"reports",name:"Relatórios",icon:Xf},{id:"compliance",name:"Conformidade",icon:hi},{id:"geo",name:"Visualização Geo",icon:ba},{id:"admin",name:"Administração",icon:Bs}],re=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Painel de Controle"}),a.jsx("div",{className:"flex space-x-3",children:a.jsxs("button",{className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",onClick:()=>S(!0),children:[a.jsx(_u,{className:"w-5 h-5"}),"Novo Processo"]})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[a.jsx("div",{className:"stat-card p-6 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:a.jsx(rt,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total de Processos"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:U.total})]})]})}),a.jsx("div",{className:"stat-card p-6 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:a.jsx(gu,{className:"w-6 h-6 text-yellow-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pendentes"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:U.pending})]})]})}),a.jsx("div",{className:"stat-card p-6 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:a.jsx(Lb,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Em Análise"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:U.analysis})]})]})}),a.jsx("div",{className:"stat-card p-6 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:a.jsx(_s,{className:"w-6 h-6 text-green-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Aprovadas"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:U.approved})]})]})}),a.jsx("div",{className:"stat-card p-6 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:a.jsx(Lr,{className:"w-6 h-6 text-red-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Rejeitadas"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:U.rejected})]})]})})]}),a.jsxs("div",{className:"glass-effect rounded-lg",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 border-opacity-50",children:a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Atividade Recente"})}),a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"space-y-4",children:P.slice(0,3).map(B=>{var ve;return a.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-white bg-opacity-60 rounded-lg hover:bg-opacity-80 cursor-pointer transition-all duration-200 hover:transform hover:scale-[1.02]",onClick:()=>Z(B),children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx(rt,{className:"w-5 h-5 text-green-600"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:(ve=B.companies)==null?void 0:ve.name}),a.jsxs("p",{className:"text-sm text-gray-500",children:[D(B.license_type)," - ",B.activity]})]}),a.jsx("div",{className:"flex-shrink-0",children:a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full border ${je(B.status)}`,children:Re(B.status)})})]},B.id)})})})]})]}),ue=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Processos de Licenciamento"}),a.jsxs("button",{className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",onClick:()=>S(!0),children:[a.jsx(_u,{className:"w-5 h-5"}),"Novo Processo"]})]}),a.jsx("div",{className:"glass-effect p-4 rounded-lg",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx(Ds,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Buscar por empresa ou atividade...",className:"pl-10 w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",value:v,onChange:B=>x(B.target.value)})]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Jg,{className:"w-4 h-4 text-gray-400"}),a.jsxs("select",{className:"p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",value:b,onChange:B=>N(B.target.value),children:[a.jsx("option",{value:"all",children:"Todos os Status"}),a.jsx("option",{value:"submitted",children:"Submetida"}),a.jsx("option",{value:"em_analise",children:"Em Análise"}),a.jsx("option",{value:"documentacao_pendente",children:"Documentação Pendente"}),a.jsx("option",{value:"aprovado",children:"Aprovada"}),a.jsx("option",{value:"rejeitado",children:"Rejeitada"})]})]})]})}),a.jsxs("div",{className:"glass-effect rounded-lg",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 border-opacity-50",children:a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Lista de Processos"})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Processo"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Empresa"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progresso"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Analista"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prazo"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Y.map(B=>{var ve;return a.jsxs("tr",{className:"hover:bg-green-50 hover:bg-opacity-50 cursor-pointer transition-all duration-200",onClick:()=>Z(B),children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:B.protocol_number})}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("div",{className:"text-sm text-gray-900",children:(ve=B.companies)==null?void 0:ve.name}),a.jsx("div",{className:"text-sm text-gray-500",children:B.activity})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:D(B.license_type)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full border ${je(B.status)}`,children:Re(B.status)})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${B.progress||0}%`}})}),a.jsxs("span",{className:"text-xs text-gray-500",children:[B.progress||0,"%"]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:B.analyst_name||"Não atribuído"}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm text-gray-900",children:B.expected_date?new Date(B.expected_date).toLocaleDateString("pt-BR"):"N/A"}),a.jsxs("div",{className:"text-xs text-gray-500",children:[B.expected_date?Math.ceil((new Date(B.expected_date).getTime()-new Date().getTime())/(1e3*60*60*24)):0," dias"]})]})]},B.id)})})]})})]})]}),Ce=()=>{switch(u){case"dashboard":return re();case"processes":return ue();case"companies":return a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Yf,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Cadastro de Empresas"}),a.jsx("p",{className:"text-gray-600",children:"Módulo em desenvolvimento"})]});case"reports":return a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Xf,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Relatórios Gerenciais"}),a.jsx("p",{className:"text-gray-600",children:"Módulo em desenvolvimento"})]});case"compliance":return a.jsxs("div",{className:"text-center py-12",children:[a.jsx(hi,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Monitoramento de Conformidade"}),a.jsx("p",{className:"text-gray-600",children:"Módulo em desenvolvimento"})]});case"geo":return a.jsx(m1,{processes:P,companies:[]});case"admin":return a.jsx(qb,{});default:return re()}};return a.jsxs("div",{className:"min-h-screen",children:[a.jsx("div",{className:`fixed inset-y-0 left-0 sidebar-nav shadow-lg z-50 sidebar-transition ${f?"w-16":"w-64"}`,children:a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsx("div",{className:"flex items-center px-6 py-4 border-b border-gray-200 bg-white",children:a.jsxs("div",{className:"flex items-center justify-between w-full",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-lg flex items-center justify-center",children:a.jsx(hi,{className:"w-5 h-5 text-white"})}),!f&&a.jsxs("div",{className:"ml-3",children:[a.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Painel"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Licenciamento Ambiental"})]})]}),a.jsx("button",{onClick:()=>p(!f),className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",title:f?"Expandir menu":"Recolher menu",children:f?a.jsx(Eb,{className:"w-5 h-5"}):a.jsx(Kg,{className:"w-5 h-5"})})]})}),a.jsx("nav",{className:"flex-1 px-4 py-6 space-y-1",children:H.map(B=>{const ve=B.icon;return a.jsxs("button",{onClick:()=>h(B.id),className:`w-full flex items-center px-3 py-3 rounded-lg text-sm font-medium nav-item ${u===B.id?"active text-green-700":"text-gray-600 hover:text-gray-900"}`,title:f?B.name:void 0,children:[a.jsx(ve,{className:`w-5 h-5 flex-shrink-0 ${f?"":"mr-3"} ${u===B.id?"text-green-600":""}`}),!f&&B.name]},B.id)})})]})}),a.jsxs("div",{className:`transition-all duration-300 ${f?"ml-16":"ml-64"}`,children:[a.jsx("header",{className:"dark-header",children:a.jsxs("div",{className:"px-6 py-4 flex justify-between items-center",children:[a.jsx("div",{className:"flex items-center space-x-4",children:a.jsx("h2",{className:"text-sm text-gray-300",children:"Sistema de Licenciamento Ambiental - Baseado na Legislação Brasileira"})}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{className:"p-2 text-gray-300 hover:text-white transition-colors",children:a.jsx(yb,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-full flex items-center justify-center user-avatar",children:a.jsx("span",{className:"text-white text-sm font-medium",children:((me=e==null?void 0:e.name)==null?void 0:me.charAt(0).toUpperCase())||((he=t==null?void 0:t.email)==null?void 0:he.charAt(0).toUpperCase())||"U"})}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm font-medium text-white",children:(e==null?void 0:e.name)||(t==null?void 0:t.email)}),a.jsx("p",{className:"text-xs text-gray-300",children:(e==null?void 0:e.role)||"Usuário"})]})]}),a.jsx("button",{className:"p-2 text-gray-300 hover:text-white transition-colors",children:a.jsx(Bs,{className:"w-5 h-5"})}),a.jsx("button",{onClick:ae,className:"p-2 text-gray-300 hover:text-white transition-colors",title:"Sair",children:a.jsx(Sb,{className:"w-5 h-5"})})]})]})}),a.jsx("main",{className:"p-6 min-h-screen",children:a.jsx("div",{className:"content-area p-6 min-h-[calc(100vh-140px)]",children:Ce()})})]}),a.jsx(Ab,{isOpen:k,onClose:()=>S(!1),onSubmit:W}),a.jsx(zb,{isOpen:O,onClose:()=>g(!1),process:C,onUpdateProcess:J})]})}function g1(){return a.jsx(pb,{children:a.jsx(p1,{})})}wg(document.getElementById("root")).render(a.jsx(z.StrictMode,{children:a.jsx(g1,{})}));
